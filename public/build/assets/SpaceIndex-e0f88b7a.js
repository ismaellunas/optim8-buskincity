import{M as P}from"./FilterDataHandle-94157290.js";import{A as q}from"./AppLayout-40f8bbe7.js";import{B as O}from"./ButtonLink-abb08373.js";import{B as D}from"./Checkbox-8f917da5.js";import{B as I,a as N}from"./Dropdown-034da47d.js";import{B as V}from"./DropdownScroll-6b0f6840.js";import{B as j}from"./Search-4389f740.js";import{B as T}from"./Icon-6def3c13.js";import{B as F}from"./TableIndex-c25c722c.js";import L from"./SpaceRow-5ced5166.js";import{i as E}from"./icon-class-4ab3933f.js";import{c as Q,o as R,s as A}from"./alert-fe3154bb.js";import{B as p,l as M,f as u,i as t,p as s,q as a,u as _,s as U,r as i,o as c,t as h,F as y,j as b,k as B}from"./vue-loading.min-a6a947f0.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";import"./HasLoader-a564cfe6.js";import"./Breadcrumbs-f0ae94d4.js";import"./Link-359d994c.js";import"./utils-caa7a80b.js";import"./NavbarItem-766600c9.js";import"./Button-03e0d3fd.js";import"./ButtonIcon-b1d1d2b0.js";import"./Field-e1691255.js";import"./Input-4c73d710.js";import"./Pagination-c4350b04.js";import"./Table-6b0ddb68.js";import"./TableInfo-6db2c6af.js";import"./sweetalert2.all-7b2d1616.js";const W={components:{BizButtonLink:O,BizCheckbox:D,BizDropdown:I,BizDropdownItem:N,BizDropdownScroll:V,BizFilterSearch:j,BizIcon:T,BizTableIndex:F,SpaceRow:L},mixins:[P],layout:q,props:{baseRouteName:{type:String,required:!0},can:{type:Object,required:!0},pageQueryParams:{type:Object,default:()=>{}},parent:{type:String,default:null},parentOptions:{type:Object,required:!0},records:{type:Object,required:!0},title:{type:String,default:""},typeOptions:{type:Object,required:!0}},setup(o){var e;return{icon:E,parentId:p(o.parent),queryParams:p(o.pageQueryParams),term:p(((e=o.pageQueryParams)==null?void 0:e.term)??null),types:p([])}},computed:{selectedParent(){const o=M.find(this.parentOptions,e=>e.id==this.parentId);return o||this.parentOptions[0]}},watch:{parentId(o){const e=route("admin.spaces.index",{parent:o});this.$inertia.visit(e)}},methods:{deleteSpace(o){const e=this;Q().then(l=>{l.isConfirmed&&e.$inertia.delete(route(this.baseRouteName+".destroy",o.id),{onStart:e.onStartLoadingOverlay,onFinish:e.onEndLoadingOverlay,onError:()=>{R()},onSuccess:r=>{A(r.props.flash.message)}})})},onTypesChanged(){this.queryParams.types=this.types,this.refreshWithQueryParams()}}},G={class:"box"},J={class:"columns"},K={class:"column"},X={class:"column"},Y=t("span",null,"Type",-1),Z={class:"ml-1"},$={class:"column has-text-right"},ee=t("span",null,"Create New",-1),te=t("tr",null,[t("th",null,"Name"),t("th",null,"Parents"),t("th",null,"Type"),t("th",null,[t("div",{class:"level-right"}," Actions ")])],-1);function oe(o,e,l,r,re,d){const v=i("biz-filter-search"),f=i("biz-icon"),g=i("biz-dropdown-item"),z=i("biz-dropdown-scroll"),k=i("biz-dropdown"),w=i("biz-checkbox"),x=i("biz-button-link"),S=i("space-row"),C=i("biz-table-index");return c(),u("div",null,[t("div",G,[t("div",J,[t("div",K,[s(v,{modelValue:r.term,"onUpdate:modelValue":e[0]||(e[0]=n=>r.term=n),onSearch:o.search},null,8,["modelValue","onSearch"])]),t("div",X,[s(k,{"close-on-click":!1},{trigger:a(()=>[t("span",null,h(d.selectedParent?d.selectedParent.value:"Select Parent"),1),s(f,{icon:r.icon.angleDown},null,8,["icon"])]),default:a(()=>[s(z,{"max-height":300},{default:a(()=>[(c(!0),u(y,null,b(l.parentOptions,n=>(c(),_(g,{key:n.id,onClick:m=>r.parentId=n.id},{default:a(()=>[B(h(n.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),s(k,{class:"ml-2","close-on-click":!1},{trigger:a(()=>[Y,t("span",Z," ("+h(r.types.length)+") ",1),s(f,{icon:r.icon.angleDown},null,8,["icon"])]),default:a(()=>[s(z,{"max-height":300},{default:a(()=>[(c(!0),u(y,null,b(l.typeOptions,n=>(c(),_(g,{key:n.id},{default:a(()=>[s(w,{checked:r.types,"onUpdate:checked":e[1]||(e[1]=m=>r.types=m),value:n.id,onChange:d.onTypesChanged},{default:a(()=>[B(" Â  "+h(n.value),1)]),_:2},1032,["checked","value","onChange"])]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",$,[l.can.add?(c(),_(x,{key:0,class:"is-primary",href:o.route("admin.spaces.create")},{default:a(()=>[s(f,{icon:r.icon.add},null,8,["icon"]),ee]),_:1},8,["href"])):U("",!0)])]),s(C,{records:l.records,"query-params":r.queryParams},{thead:a(()=>[te]),default:a(()=>[(c(!0),u(y,null,b(l.records.data,n=>(c(),_(S,{key:n.id,space:n,can:l.can,onDeleteRow:e[2]||(e[2]=m=>d.deleteSpace(m))},null,8,["space","can"]))),128))]),_:1},8,["records","query-params"])])])}const De=H(W,[["render",oe]]);export{De as default};
