import{M as I}from"./HasPageErrors-4d447fdf.js";import{a as k}from"./Dropdown-5425ae3a.js";import{B as C}from"./DropdownSearch-783ef1d1.js";import{B as S}from"./ImageSquare-ffa664e1.js";import{B as L}from"./Input-50a73630.js";import{B as P}from"./Select-c82d82bb.js";import{B as O}from"./Image-52e0dacd.js";import{i as D}from"./icon-class-4ab3933f.js";import{c as F}from"./alert-e0e75cb7.js";import{C as q,l as a,z as E,f as g,i,p as m,q as f,k as _,n as N,s as h,u as b,r as u,o as s,F as y,j as B,t as c}from"./vue-loading.min-aa20e13d.js";import{u as x}from"./utils-79a9c8b1.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";import"./Button-b3acaac2.js";import"./Field-fbae01a6.js";import"./Field-c2e062a9.js";import"./InputError-bc1e9f36.js";import"./DropdownSearch-bd4068c6.js";import"./Input-2fb71e37.js";import"./Icon-150b61ef.js";import"./ButtonIcon-05c24ca4.js";import"./InputFile-1187b7e3.js";import"./ModalCard-42b1747b.js";import"./cropper-5d594675.js";import"./Select-9fda6861.js";import"./sweetalert2.all-ebd52f41.js";const M={name:"UserProfileForm",components:{BizDropdownItem:k,BizFormDropdownSearch:C,BizFormImageSquare:S,BizFormInput:L,BizFormSelect:P,BizImage:O},mixins:[I],props:{canSetRole:{type:Boolean,default:!0},errorBag:{type:String,default:"default"},modelValue:{},photoUrl:{type:[String,null],default:null},profilePageUrl:{type:String,default:""},roleOptions:{type:Array,default:()=>[]},languageOptions:{type:Array,default:()=>[]}},setup(e,{emit:o}){return{form:x(e,o)}},data(){return{userImage:q,filteredLanguages:this.languageOptions.slice(0,10),imageUrl:this.photoUrl,icon:D}},computed:{isDeleteButtonShown(){return!a.isEmpty(this.imageUrl)&&!a.isEmpty(this.photoUrl)},selectedCountry:{get(){return this.form.country_code?a.find(this.countryOptions,["id",this.form.country_code]).value:""},set(e){this.form.country_code=e.id}},selectedLanguage:{get(){if(this.form.language_id){let e=a.find(this.languageOptions,["id",parseInt(this.form.language_id)]);if(e)return e.value}return""},set(e){this.form.language_id=e.id}}},methods:{onCroppedImage(){this.form.is_photo_deleted=!1},onDeleteImage(){const e=this;F().then(o=>{o.isConfirmed&&(e.form.photo=null,e.form.photo_url=null,e.form.is_photo_deleted=!0,e.imageUrl=null)})},searchLanguage:a.debounce(function(e){!a.isEmpty(e)&&e.length>1?this.filteredLanguages=a.filter(this.languageOptions,function(o){return new RegExp(e,"i").test(o.value)}).slice(0,10):this.filteredLanguages=this.languageOptions.slice(0,10)},E)}},A={class:"mb-3"},T={class:"columns"},j={class:"column"},H={class:"field is-horizontal mb-5"},W={key:0,class:"column"},G={class:"buttons is-right"},J=["href"],K=["value"],Q={style:{"min-width":"4rem"}};function X(e,o,t,l,d,n){const U=u("biz-image"),z=u("biz-form-image-square"),p=u("biz-form-input"),V=u("biz-form-select"),v=u("biz-dropdown-item"),w=u("biz-form-dropdown-search");return s(),g("div",A,[i("div",T,[i("div",j,[i("div",H,[m(z,{modelValue:l.form.photo,"onUpdate:modelValue":o[0]||(o[0]=r=>l.form.photo=r),"photo-url":d.imageUrl,"onUpdate:photoUrl":o[1]||(o[1]=r=>d.imageUrl=r),label:"Profile picture","is-rounded-preview":"","modal-title":"Profile picture","wrapper-class":"field-body is-align-items-center",message:e.error("photo",t.errorBag),"original-image":t.photoUrl,"show-delete-button":n.isDeleteButtonShown,onOnCroppedImage:o[2]||(o[2]=r=>n.onCroppedImage()),onOnDeleteImage:o[3]||(o[3]=r=>n.onDeleteImage())},{defaultImageView:f(()=>[m(U,{ratio:"is-128x128",rounded:"is-rounded",src:d.userImage},null,8,["src"])]),_:1},8,["modelValue","photo-url","message","original-image","show-delete-button"])])]),t.profilePageUrl?(s(),g("div",W,[i("div",G,[i("a",{class:"button as-text-black ml-1",target:"_blank",title:"Profile Page Url",href:t.profilePageUrl},[_(" Open Public Profile Â  "),i("i",{class:N(d.icon.idCard)},null,2)],8,J)])])):h("",!0)]),m(p,{modelValue:l.form.first_name,"onUpdate:modelValue":o[4]||(o[4]=r=>l.form.first_name=r),label:"First Name",required:"",message:e.error("first_name",t.errorBag)},null,8,["modelValue","message"]),m(p,{modelValue:l.form.last_name,"onUpdate:modelValue":o[5]||(o[5]=r=>l.form.last_name=r),label:"Last Name",required:"",message:e.error("last_name",t.errorBag)},null,8,["modelValue","message"]),m(p,{modelValue:l.form.email,"onUpdate:modelValue":o[6]||(o[6]=r=>l.form.email=r),label:"Email",required:"",type:"email",message:e.error("email",t.errorBag)},null,8,["modelValue","message"]),t.canSetRole?(s(),b(V,{key:0,modelValue:l.form.role,"onUpdate:modelValue":o[7]||(o[7]=r=>l.form.role=r),label:"Role",placeholder:"- Select a Role -",message:e.error("role",t.errorBag)},{default:f(()=>[(s(!0),g(y,null,B(t.roleOptions,r=>(s(),g("option",{key:r.id,value:r.id},c(r.value),9,K))),128))]),_:1},8,["modelValue","message"])):h("",!0),m(w,{label:"Language",required:"","close-on-click":!0,message:e.error("language_id",t.errorBag),onSearch:o[8]||(o[8]=r=>n.searchLanguage(r))},{trigger:f(()=>[i("span",Q,c(n.selectedLanguage),1)]),default:f(()=>[(s(!0),g(y,null,B(d.filteredLanguages,r=>(s(),b(v,{key:r.id,onClick:Y=>n.selectedLanguage=r},{default:f(()=>[_(c(r.value),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["message"])])}const Ve=R(M,[["render",X]]);export{Ve as default};
