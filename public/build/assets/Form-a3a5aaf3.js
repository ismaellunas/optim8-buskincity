import{M as E}from"./HasModal-fa56130c.js";import{M as K}from"./HasPageErrors-da5616c1.js";import{M as Q}from"./HasTab-77ca33c2.js";import{B as F,M as P,a as G}from"./MediaTextEditor-a29275ff.js";import{B as W}from"./Button-03e0d3fd.js";import{B as J}from"./ButtonIcon-b1d1d2b0.js";import{B as X}from"./ButtonLink-abb08373.js";import{B as Y}from"./DateTime-c0efacbf.js";import{B as Z}from"./Input-137492c5.js";import{B as $}from"./Select-a178b677.js";import{B as ee}from"./Slug-e3370d8d.js";import{B as te}from"./InputError-9b7084c8.js";import{B as U}from"./Field-a8082082.js";import{B as ie,f as x}from"./EditorTinymce-3bb5766f.js";import{u as q,a as oe,d as le}from"./utils-caa7a80b.js";import{r as d,o as r,f as u,i as l,p as a,q as m,k as p,t as M,u as v,s as V,B as ae,ah as se,l as _,I as ne,m as I,y as T,F as b,j as B,w as L,n as re}from"./vue-loading.min-a6a947f0.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import{B as de}from"./Textarea-0e8af5bc.js";import{B as me}from"./Image-c2b8efed.js";import{B as ue,a as ce}from"./TabList-7a2ba8b0.js";import{i as fe}from"./icon-class-4ab3933f.js";import"./MediaLibrary-02fe4347.js";import"./HasLoader-a564cfe6.js";import"./ButtonsDisplayView-20deee35.js";import"./Checkbox-8f917da5.js";import"./Dropdown-034da47d.js";import"./Search-4389f740.js";import"./Field-e1691255.js";import"./Input-4c73d710.js";import"./InputFile-216a7277.js";import"./Gallery-86a7e0a4.js";import"./ButtonDownload-7545f1b2.js";import"./Modal-655bec1f.js";import"./Table-6b0ddb68.js";import"./ModalCard-06597c5e.js";import"./FieldHorizontal-bfc51f07.js";import"./cropper-72988d76.js";import"./Pagination-c4350b04.js";import"./Link-359d994c.js";import"./TableInfo-6db2c6af.js";import"./Form-7bfdff43.js";import"./ErrorNotifications-090d6193.js";import"./Select-19a91b6e.js";import"./alert-fe3154bb.js";import"./sweetalert2.all-7b2d1616.js";import"./Icon-6def3c13.js";import"./Textarea-fb59ae31.js";import"./Datepicker-4f509259.js";import"./InputAddons-7c9a4924.js";const be={name:"BizFormTextEditorFull",components:{BizInputError:te,BizLabel:U,BizModalMediaBrowser:F,BizTextEditor:ie},mixins:[E,P,G],props:{config:{type:Object,default:()=>{}},disabled:{type:Boolean,default:!1},isDownloadEnabled:{type:Boolean,default:!0},isMediaEnabled:{type:Boolean,default:!0},isUploadEnabled:{type:Boolean,default:!0},label:String,message:{},modelValue:{},placeholder:String,height:{type:Number,default:500},isConfigCombined:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:o}){return{editorValue:q(e,o)}},data(){return{tinyMceImage:{file:null,element:null},tinyMceModal:null,tinyMceModalSelector:"div.tox.tox-silver-sink.tox-tinymce-aux > div"}},computed:{editorConfig(){const e={...x,height:this.height,contextmenu:"link image",file_picker_types:"image media",file_picker_callback:this.isMediaEnabled?this.filePickerCallback:!1,media_live_embeds:!0};return this.isConfigCombined?Object.assign(e,this.config):oe(this.config)?e:this.config}},methods:{onShownModal(){this.tinyMceModal=document.querySelector(this.tinyMceModalSelector),this.tinyMceModal.style.display="none",this.setTerm(""),this.getMediaList(route(this.mediaListRouteName))},onCloseModal(){this.tinyMceModal&&(this.tinyMceModal.style.display="")},selectFile(e){this.tinyMceImage.file=e,this.tinyMceImage.element&&this.tinyMceImage.element.click(),this.closeModal()},onMediaSubmitted(e){this.selectFile(e.data)},filePickerCallback(e,o,n){const t=this;t.setTypeToMedia(n.filetype),t.openModal(),t.tinyMceImage.element=document.createElement("input"),t.tinyMceImage.element.onclick=function(){var c;e(t.tinyMceImage.file.file_url,{alt:((c=t.tinyMceImage.file)==null?void 0:c.alt)??""}),t.tinyMceImage.file=null,t.tinyMceImage.element.remove(),t.tinyMceImage.element=null}}}},pe={class:"field"},ge={class:"control"};function _e(e,o,n,t,c,s){const h=d("biz-label"),g=d("biz-text-editor"),C=d("biz-input-error"),y=d("biz-modal-media-browser");return r(),u("div",null,[l("div",pe,[a(h,null,{default:m(()=>[p(M(n.label),1)]),_:1}),l("div",ge,[a(g,{modelValue:t.editorValue,"onUpdate:modelValue":o[0]||(o[0]=f=>t.editorValue=f),disabled:n.disabled,placeholder:n.placeholder,config:s.editorConfig},null,8,["modelValue","disabled","placeholder","config"])]),a(C,{message:n.message},null,8,["message"])]),e.isModalOpen?(r(),v(y,{key:0,title:"Media Library","accepted-file-type":e.acceptedTypes,data:e.media,"is-download-enabled":n.isDownloadEnabled,"is-upload-enabled":n.isUploadEnabled,"query-params":e.mediaListQueryParams,search:e.search,style:{zIndex:1300},onClose:e.closeModal,onOnClickedPagination:e.getMediaList,onOnMediaSelected:s.selectFile,onOnMediaSubmitted:s.onMediaSubmitted,onOnViewChanged:e.setView},null,8,["accepted-file-type","data","is-download-enabled","is-upload-enabled","query-params","search","onClose","onOnClickedPagination","onOnMediaSelected","onOnMediaSubmitted","onOnViewChanged"])):V("",!0)])}const he=D(be,[["render",_e]]),ye={name:"PostForm",components:{BizButton:W,BizButtonIcon:J,BizButtonLink:X,BizFormDateTime:Y,BizFormInput:Z,BizFormSelect:$,BizFormSlug:ee,BizFormTextEditorFull:he,BizFormTextarea:de,BizImage:me,BizLabel:U,BizModalMediaBrowser:F,BizTab:ue,BizTabList:ce},mixins:[E,K,Q,P],props:{can:{type:Object,required:!0},categoryOptions:{type:Array,default:()=>[]},coverImage:{type:Object,default:()=>{}},errors:{},isNew:Boolean,isProcessing:Boolean,localeOptions:{type:Array,default:()=>[]},modelValue:{type:Object,required:!0},modules:{type:Object,default:()=>{}},statusOptions:{type:Array,default:()=>[]}},emits:["on-submit"],setup(e,{emit:o}){var t;const n={toolbar2:x.toolbar2+" | formLists",setup:c=>{var s;(s=e.modules)!=null&&s.form_builder&&c.ui.registry.addMenuButton("formLists",{text:"Form Lists",fetch:h=>{var y,f;let g=[];((f=(y=e.modules)==null?void 0:y.form_builder)==null?void 0:f.formOptions).forEach(function(z){g.push({type:"menuitem",text:z.name,onAction:()=>c.insertContent('[form-builder form-id="'+z.value+'"]')})}),h(g)}})}};return{coverSrc:ae(((t=e.coverImage)==null?void 0:t.file_url)??null),editorConfig:n,form:q(e,o),tabs:{content:{title:"Content"},seo:{title:"SEO"}}}},data(){return{acceptedTypes:se,activeTab:_.head(_.keys(this.tabs)),baseRouteName:"admin.posts",icon:fe,isSlugDisabled:!0,maxLength:ne().props.value.maxLength}},computed:{sortedCategoryOptions(){return _.sortBy(this.categoryOptions,[function(e){return e.value.toLowerCase()}])},hasCover(){return!_.isEmpty(this.coverSrc)},isInputDisabled(){return this.isProcessing}},methods:{selectCategory(e){this.form.categories.includes(e.id)?_.pull(this.form.categories,e.id):this.form.categories.push(e.id),_.isEmpty(this.form.categories)&&(this.form.primary_category=null)},onShownModal(){this.setTerm(""),this.getMediaList(route(this.mediaListRouteName))},selectFile(e){this.form.cover_image_id=e.id,this.coverSrc=e.file_url,this.closeModal()},removeCover(){this.coverSrc=null,this.form.cover_image_id=null},updateImage(e){this.selectFile(e.data),this.closeModal()},populateSlug(e){_.isEmpty(this.form.slug)&&(this.form.slug=le(this.form.title))},keyPressTitle(e){return e.keyCode==13&&this.populateSlug(e),!0}}},Me={class:"column is-two-thirds"},ve=["disabled"],Ce=["onClick"],ze=["value"],Be={class:"field"},ke={class:"buttons"},Ve=l("p",null,"Select The Primary Category",-1),Oe=["value"],we={class:"field"},Se=l("span",null,"Open Media",-1),Ie={key:1,class:"columns is-mobile"},Te={class:"column is-half is-offset-one-quarter"},Le={class:"card"},Ee={class:"card-image"},Fe={class:"card-footer"},Pe=l("span",null,"Open Media",-1),Ue=l("span",null,"Remove",-1),xe={class:"column"},qe=["disabled"],De=["value"],Ne={class:"field is-grouped is-grouped-right"},Ae={class:"control"},je={class:"control"};function Re(e,o,n,t,c,s){const h=d("biz-tab-list"),g=d("biz-tab"),C=d("biz-form-input"),y=d("biz-form-slug"),f=d("biz-form-select"),z=d("biz-label"),O=d("biz-button"),w=d("biz-button-icon"),N=d("biz-image"),S=d("biz-form-textarea"),A=d("biz-form-text-editor-full"),j=d("biz-form-date-time"),R=d("biz-button-link"),H=d("biz-modal-media-browser");return r(),u("div",null,[l("form",{class:"columns",method:"post",onSubmit:o[11]||(o[11]=L(i=>e.$emit("on-submit"),["prevent"]))},[l("div",Me,[l("fieldset",{class:"box",disabled:s.isInputDisabled},[a(g,{class:"is-boxed"},{default:m(()=>[l("ul",null,[(r(!0),u(b,null,B(t.tabs,(i,k)=>(r(),v(h,{key:k,"is-active":e.isTabActive(k)},{default:m(()=>[l("a",{onClick:L(He=>e.setActiveTab(k),["prevent"])},M(i.title),9,Ce)]),_:2},1032,["is-active"]))),128))])]),_:1}),I(l("div",null,[a(C,{modelValue:t.form.title,"onUpdate:modelValue":o[0]||(o[0]=i=>t.form.title=i),label:"Title",message:e.error("title"),placeholder:"e.g A Good News",required:"",onOnBlur:s.populateSlug,onOnKeypress:s.keyPressTitle},null,8,["modelValue","message","onOnBlur","onOnKeypress"]),a(y,{modelValue:t.form.slug,"onUpdate:modelValue":o[1]||(o[1]=i=>t.form.slug=i),label:"Slug",message:e.error("slug"),disabled:s.isInputDisabled},null,8,["modelValue","message","disabled"]),a(f,{modelValue:t.form.locale,"onUpdate:modelValue":o[2]||(o[2]=i=>t.form.locale=i),class:"is-fullwidth",label:"Language",required:"",message:e.error("locale")},{default:m(()=>[(r(!0),u(b,null,B(n.localeOptions,i=>(r(),u("option",{key:i.id,value:i.id},M(i.id.toUpperCase()),9,ze))),128))]),_:1},8,["modelValue","message"]),l("div",Be,[a(z,null,{default:m(()=>[p("Category")]),_:1}),l("div",ke,[(r(!0),u(b,null,B(s.sortedCategoryOptions,i=>(r(),v(O,{key:i.id,type:"button",class:re({"is-primary":t.form.categories.includes(i.id)}),onClick:k=>s.selectCategory(i)},{default:m(()=>[p(M(i.value),1)]),_:2},1032,["class","onClick"]))),128))]),Ve,a(f,{modelValue:t.form.primary_category,"onUpdate:modelValue":o[3]||(o[3]=i=>t.form.primary_category=i),class:"is-fullwidth",placeholder:"- Select -",message:e.error("primary_category")},{default:m(()=>[(r(!0),u(b,null,B(s.sortedCategoryOptions,i=>(r(),u(b,{key:i.id},[t.form.categories.includes(i.id)?(r(),u("option",{key:0,value:i.id},M(i.value),9,Oe)):V("",!0)],64))),128))]),_:1},8,["modelValue","message"])]),l("div",we,[a(z,null,{default:m(()=>[p("Thumbnail")]),_:1}),s.hasCover?(r(),u("div",Ie,[l("div",Te,[l("div",Le,[l("div",Ee,[a(N,{src:t.coverSrc},null,8,["src"])]),l("footer",Fe,[a(w,{class:"card-footer-item is-borderless is-shadowless is-inverted",icon:c.icon.image,type:"button",onClick:e.openModal},{default:m(()=>[Pe]),_:1},8,["icon","onClick"]),a(O,{class:"card-footer-item is-borderless is-shadowless is-inverted",type:"button",onClick:s.removeCover},{default:m(()=>[Ue]),_:1},8,["onClick"])])])])])):(r(),v(w,{key:0,class:"is-borderless is-shadowless is-inverted",icon:c.icon.image,type:"button",disabled:!n.can.media.browse,onClick:o[4]||(o[4]=i=>e.openModal())},{default:m(()=>[Se]),_:1},8,["icon","disabled"]))]),a(S,{modelValue:t.form.excerpt,"onUpdate:modelValue":o[5]||(o[5]=i=>t.form.excerpt=i),label:"Excerpt",placeholder:"...",rows:"2",message:e.error("excerpt")},null,8,["modelValue","message"]),a(A,{modelValue:t.form.content,"onUpdate:modelValue":o[6]||(o[6]=i=>t.form.content=i),label:"Content",config:t.editorConfig,disabled:s.isInputDisabled,"is-download-enabled":n.can.media.read,"is-media-enabled":n.can.media.browse,"is-upload-enabled":n.can.media.add,"is-config-combined":!0,message:e.error("content")},null,8,["modelValue","config","disabled","is-download-enabled","is-media-enabled","is-upload-enabled","message"])],512),[[T,e.isTabActive("content")]]),I(l("div",null,[a(C,{modelValue:t.form.meta_title,"onUpdate:modelValue":o[7]||(o[7]=i=>t.form.meta_title=i),label:"Meta Title",placeholder:"Meta title",maxlength:c.maxLength.meta_title,message:e.error("meta_title")},null,8,["modelValue","maxlength","message"]),a(S,{modelValue:t.form.meta_description,"onUpdate:modelValue":o[8]||(o[8]=i=>t.form.meta_description=i),label:"Meta Description",placeholder:"Meta description",rows:"2",maxlength:c.maxLength.meta_description,message:e.error("meta_description")},null,8,["modelValue","maxlength","message"])],512),[[T,e.isTabActive("seo")]])],8,ve)]),l("div",xe,[l("fieldset",{class:"box",disabled:s.isInputDisabled},[a(g,null,{default:m(()=>[a(h,null,{default:m(()=>[p(" Publish Options ")]),_:1})]),_:1}),a(f,{modelValue:t.form.status,"onUpdate:modelValue":o[9]||(o[9]=i=>t.form.status=i),class:"is-fullwidth",label:"Status",required:"",disabled:s.isInputDisabled,message:e.error("status")},{default:m(()=>[(r(!0),u(b,null,B(n.statusOptions,i=>(r(),u("option",{key:i.id,value:i.id},M(i.value),9,De))),128))]),_:1},8,["modelValue","disabled","message"]),t.form.status===2?(r(),v(j,{key:0,modelValue:t.form.scheduled_at,"onUpdate:modelValue":o[10]||(o[10]=i=>t.form.scheduled_at=i),label:"Scheduled At",required:"",message:e.error("scheduled_at")},null,8,["modelValue","message"])):V("",!0)],8,qe),l("div",Ne,[l("div",Ae,[a(R,{href:e.route(c.baseRouteName+".index"),class:"is-link is-light"},{default:m(()=>[p(" Cancel ")]),_:1},8,["href"])]),l("div",je,[a(O,{class:"is-link"},{default:m(()=>[n.isNew?(r(),u(b,{key:0},[p(" Create ")],64)):(r(),u(b,{key:1},[p(" Update ")],64))]),_:1})])])])],32),e.isModalOpen?(r(),v(H,{key:0,data:e.media,"is-download-enabled":n.can.media.read,"is-upload-enabled":n.can.media.add,"query-params":e.mediaListQueryParams,search:e.search,onClose:e.closeModal,onOnClickedPagination:e.getMediaList,onOnMediaSelected:s.selectFile,onOnMediaSubmitted:s.updateImage,onOnViewChanged:e.setView},null,8,["data","is-download-enabled","is-upload-enabled","query-params","search","onClose","onOnClickedPagination","onOnMediaSelected","onOnMediaSubmitted","onOnViewChanged"])):V("",!0)])}const Nt=D(ye,[["render",Re]]);export{Nt as default};
