import{A as w}from"./AppLayout-40f8bbe7.js";import{B as N}from"./ButtonIcon-b1d1d2b0.js";import{B as O}from"./ButtonLink-abb08373.js";import{B as V}from"./Checkbox-8f917da5.js";import{B as D,a as F}from"./Dropdown-034da47d.js";import{B as I}from"./Search-4389f740.js";import{B as L}from"./Icon-6def3c13.js";import{B as Q}from"./TableIndex-c25c722c.js";import{B as j}from"./Tag-8100534e.js";import{M as A}from"./FilterDataHandle-94157290.js";import{i as E}from"./icon-class-4ab3933f.js";import{c as R,o as M,s as T}from"./alert-fe3154bb.js";import{l as U,B as h,f as m,i as e,p as i,q as n,u as d,s as p,r as l,o as c,k as f,F as B,j as k,t as u,n as H,w as W}from"./vue-loading.min-a6a947f0.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import"./Breadcrumbs-f0ae94d4.js";import"./Link-359d994c.js";import"./utils-caa7a80b.js";import"./NavbarItem-766600c9.js";import"./Button-03e0d3fd.js";import"./Field-e1691255.js";import"./Input-4c73d710.js";import"./Pagination-c4350b04.js";import"./Table-6b0ddb68.js";import"./TableInfo-6db2c6af.js";import"./HasLoader-a564cfe6.js";import"./sweetalert2.all-7b2d1616.js";const J={components:{BizButtonIcon:N,BizButtonLink:O,BizCheckbox:V,BizDropdown:D,BizDropdownItem:F,BizFilterSearch:I,BizIcon:L,BizTableIndex:Q,BizTag:j},mixins:[A],layout:w,props:{baseRouteName:{type:String,required:!0},can:{type:Object,required:!0},pageQueryParams:{type:Object,default:()=>{}},products:{type:Object,required:!0},statusOptions:{type:Array,required:!0}},setup(r){var s,o;const a=U.merge({},r.pageQueryParams);return{statuses:h(((s=r.pageQueryParams)==null?void 0:s.status)??[]),icon:E,queryParams:h(a),term:h(((o=r.pageQueryParams)==null?void 0:o.term)??null)}},methods:{deleteProduct(r){const a=this;R().then(s=>{s.isConfirmed&&a.$inertia.delete(route(this.baseRouteName+".destroy",r.id),{onStart:a.onStartLoadingOverlay,onFinish:a.onEndLoadingOverlay,onError:()=>{M()},onSuccess:o=>{T(o.props.flash.message)}})})},onStatusChanged(){this.queryParams.status=this.statuses,this.refreshWithQueryParams()}}},K={class:"box"},X={class:"columns"},Y={class:"column"},Z={class:"column"},$=e("span",null,"Filter",-1),ee={class:"column has-text-right"},te=e("span",null,"Create New",-1),oe=e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Status"),e("th",null,[e("div",{class:"level-right"}," Actions ")])],-1),se={class:"level-right"};function ae(r,a,s,o,ne,b){const v=l("biz-filter-search"),_=l("biz-icon"),y=l("biz-dropdown-item"),x=l("biz-checkbox"),C=l("biz-dropdown"),z=l("biz-button-link"),P=l("biz-tag"),S=l("biz-button-icon"),q=l("biz-table-index");return c(),m("div",K,[e("div",X,[e("div",Y,[i(v,{modelValue:o.term,"onUpdate:modelValue":a[0]||(a[0]=t=>o.term=t),onSearch:r.search},null,8,["modelValue","onSearch"])]),e("div",Z,[i(C,{"close-on-click":!1},{trigger:n(()=>[$,i(_,{icon:o.icon.angleDown},null,8,["icon"])]),default:n(()=>[i(y,null,{default:n(()=>[f(" Status ")]),_:1}),(c(!0),m(B,null,k(s.statusOptions,t=>(c(),d(y,{key:t.id},{default:n(()=>[i(x,{checked:o.statuses,"onUpdate:checked":a[1]||(a[1]=g=>o.statuses=g),value:t.id,onChange:b.onStatusChanged},{default:n(()=>[f(" Â  "+u(t.value),1)]),_:2},1032,["checked","value","onChange"])]),_:2},1024))),128))]),_:1})]),e("div",ee,[s.can.add?(c(),d(z,{key:0,href:r.route(s.baseRouteName+".create"),class:"is-primary"},{default:n(()=>[i(_,{icon:o.icon.add},null,8,["icon"]),te]),_:1},8,["href"])):p("",!0)])]),i(q,{records:s.products,"query-params":o.queryParams},{thead:n(()=>[oe]),default:n(()=>[(c(!0),m(B,null,k(s.products.data,t=>(c(),m("tr",{key:t.id},[e("td",null,u(t.id),1),e("td",null,u(t.name),1),e("td",null,[i(P,{class:H(["is-small is-rounded",{"is-primary":t.status=="Published"}])},{default:n(()=>[f(u(t.status),1)]),_:2},1032,["class"])]),e("td",null,[e("div",se,[t.can.edit?(c(),d(z,{key:0,class:"is-ghost has-text-black",href:r.route(s.baseRouteName+".edit",t.id)},{default:n(()=>[i(_,{class:"is-small",icon:o.icon.edit},null,8,["icon"])]),_:2},1032,["href"])):p("",!0),t.can.delete?(c(),d(S,{key:1,class:"is-ghost has-text-black ml-1",type:"button",icon:o.icon.remove,onClick:W(g=>b.deleteProduct(t),["prevent"])},null,8,["icon","onClick"])):p("",!0)])])]))),128))]),_:1},8,["records","query-params"])])}const Ve=G(J,[["render",ae]]);export{Ve as default};
