import{M as g}from"./HasLoader-a564cfe6.js";import{A as L}from"./AppLayout-40f8bbe7.js";import{B as h}from"./ErrorNotifications-090d6193.js";import _ from"./Form-bfa72458.js";import{g as i}from"./translation-2d24d0f6.js";import{i as n}from"./utils-caa7a80b.js";import{s as b,a as y}from"./alert-fe3154bb.js";import{I as l,H as m,f as O,p as c,i as C,r as p,o as v}from"./vue-loading.min-a6a947f0.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";import"./Breadcrumbs-f0ae94d4.js";import"./Link-359d994c.js";import"./NavbarItem-766600c9.js";import"./HasPageErrors-da5616c1.js";import"./Button-03e0d3fd.js";import"./ButtonLink-abb08373.js";import"./Input-137492c5.js";import"./Field-a8082082.js";import"./Field-e1691255.js";import"./Input-4c73d710.js";import"./InputError-9b7084c8.js";import"./Slug-e3370d8d.js";import"./InputAddons-7c9a4924.js";import"./ButtonIcon-b1d1d2b0.js";import"./Icon-6def3c13.js";import"./icon-class-4ab3933f.js";import"./Textarea-0e8af5bc.js";import"./Textarea-fb59ae31.js";import"./LanguageTab-ce3e8bfb.js";import"./page-9994df2c.js";import"./sweetalert2.all-7b2d1616.js";const N={name:"CategoryEdit",components:{BizErrorNotifications:h,CategoryForm:_},mixins:[g],layout:L,props:{baseRouteName:{type:String,required:!0},errors:{type:Object,default:()=>{}},record:{type:Object,required:!0},title:{type:String,required:!0}},setup(e){const o=l().props.value.defaultLanguage,t={[o]:{}};let r=i(e.record,o);return n(r)&&(r={name:null,slug:null,meta_title:null,meta_description:null}),t[o]=r,{defaultLocale:o,localeOptions:l().props.value.languageOptions,form:m(t)}},data(){return{isNew:!1,isProcessing:!1,selectedLocale:this.defaultLocale}},methods:{submit(){const e=this;e.form.put(route(e.baseRouteName+".update",e.record.id),{onStart:()=>{e.onStartLoadingOverlay(),e.isProcessing=!0},onSuccess:o=>{e.setTranslationForm(e.selectedLocale),b(o.props.flash.message)},onFinish:()=>{e.onEndLoadingOverlay(),e.isProcessing=!1}})},onChangeLocale(e){this.form.isDirty?y().then(o=>{if(o.isDismissed)return!1;o.isConfirmed&&this.changeLocale(e)}):this.changeLocale(e)},changeLocale(e){this.setTranslationForm(e),this.selectedLocale=e},setTranslationForm(e){const o=i(this.record,e);let t={[this.defaultLocale]:{}};n(o)?t[e]={name:null,slug:null,meta_title:null,meta_description:null}:t[e]=o,this.form=m(t)}}},S={class:"box mb-6"};function B(e,o,t,r,s,a){const u=p("biz-error-notifications"),d=p("category-form");return v(),O("div",null,[c(u,{errors:e.$page.props.errors},null,8,["errors"]),C("div",S,[c(d,{modelValue:r.form[s.selectedLocale],"onUpdate:modelValue":o[0]||(o[0]=f=>r.form[s.selectedLocale]=f),"base-route":t.baseRouteName,"default-locale":r.defaultLocale,errors:t.errors,"is-input-disabled":s.isProcessing,"is-new":s.isNew,"locale-options":r.localeOptions,"selected-locale":s.selectedLocale,onOnChangeLocale:a.onChangeLocale,onOnSubmit:a.submit},null,8,["modelValue","base-route","default-locale","errors","is-input-disabled","is-new","locale-options","selected-locale","onOnChangeLocale","onOnSubmit"])])])}const se=F(N,[["render",B]]);export{se as default};
