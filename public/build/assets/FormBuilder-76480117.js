import{M as W}from"./HasPageErrors-da5616c1.js";import{M as Q}from"./HasLoader-a564cfe6.js";import{D as X}from"./vuedraggable.umd-d7851836.js";import{d as y,j as v}from"./style-options-cda219e9.js";import{B as Y}from"./Button-03e0d3fd.js";import{B as Z}from"./ButtonLink-abb08373.js";import{B as R}from"./Card-64180043.js";import{B as U}from"./Input-137492c5.js";import{B as $}from"./InputAddons-7c9a4924.js";import{B as ee}from"./ButtonIcon-b1d1d2b0.js";import{u as x,j as E,i as N,b as le}from"./utils-caa7a80b.js";import{i as L,m as ne,r as oe}from"./icon-class-4ab3933f.js";import{r as m,o as s,u as _,q as b,i as a,m as K,y as M,p as f,n as I,l as q,f as g,t as D,F as O,j as z,s as V,P as te,k as B,K as A,I as ae}from"./vue-loading.min-a6a947f0.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";import ie from"./FieldGroup-4ce5a37d.js";import{C as j,a as se,b as de,c as re,d as ue,e as ce,T as me,f as pe}from"./TRBLInput-8cbbcf29.js";import{B as fe}from"./Number-d98ba32a.js";import{c as be}from"./alert-fe3154bb.js";const ge={type:"Country",title:"Country",column:"is-full",label:"Country",name:"country",placeholder:null,note:null,default_value:null,readonly:!1,disabled:!1,options:[],validation:{rules:{required:!1},message:[]},visibility:[],translated:!1},_e={properties:{label:"Properties",config:{label:{component:"ConfigInput",label:"Label"},name:{component:"ConfigAutoGenerateKey",label:"Name",settings:{generateBasedOn:"label",placeholder:"field_name"}},note:{component:"ConfigInput",label:"Note"},column:{component:"ConfigSelect",label:"Column",settings:{options:y.concat(v)}}}},data:{label:"Data",config:{default_value:{component:"ConfigInput",label:"Default Value"}}},validation:{label:"Validation",config:{required:{component:"ConfigCheckbox",label:"Is Required?"}}},attributes:{label:"Attributes",config:{disabled:{component:"ConfigCheckbox",label:"Is Disabled?",settings:{disableBasedOn:"validation.rules.required"}},readonly:{component:"ConfigCheckbox",label:"Is Readonly?",settings:{disableBasedOn:"validation.rules.required"}}}}},Ce={type:"Email",title:"Email",column:"is-full",label:"Email",name:"email",placeholder:"e.g. example@mail.com",note:null,default_value:"",readonly:!1,disabled:!1,validation:{rules:{required:!1,max:null,min:null,email:!0},message:[]},visibility:[],translated:!1},he={properties:{label:"Properties",config:{label:{component:"ConfigInput",label:"Label"},name:{component:"ConfigAutoGenerateKey",label:"Name",settings:{generateBasedOn:"label",placeholder:"field_name"}},placeholder:{component:"ConfigInput",label:"Placeholder"},note:{component:"ConfigInput",label:"Note"},column:{component:"ConfigSelect",label:"Column",settings:{options:y.concat(v)}}}},data:{label:"Data",config:{default_value:{component:"ConfigInput",label:"Default Value"}}},validation:{label:"Validation",config:{required:{component:"ConfigCheckbox",label:"Is Required?"},min:{component:"ConfigNumber",label:"Minimal Character"},max:{component:"ConfigNumber",label:"Maximal Character"}}},attributes:{label:"Attributes",config:{disabled:{component:"ConfigCheckbox",label:"Is Disabled?",settings:{disableBasedOn:"validation.rules.required"}},readonly:{component:"ConfigCheckbox",label:"Is Readonly?",settings:{disableBasedOn:"validation.rules.required"}}}}},ye={type:"FileDragDrop",title:"File Upload",column:"is-full",label:"File",name:"file",placeholder:"Drop files here...",note:null,default_value:[],max_file_number:1,min_file_number:0,validation:{rules:{required:!1,mimes:["image"],max:null},message:[]},is_multiple_upload:!1,visibility:[],translated:!1},ve={properties:{label:"Properties",config:{label:{component:"ConfigInput",label:"Label"},name:{component:"ConfigAutoGenerateKey",label:"Name",settings:{generateBasedOn:"label",placeholder:"field_name"}},placeholder:{component:"ConfigInput",label:"Placeholder"},note:{component:"ConfigInput",label:"Note"},column:{component:"ConfigSelect",label:"Column",settings:{options:y.concat(v)}}}},validation:{label:"Validation",config:{required:{component:"ConfigCheckbox",label:"Is Required?"},mimes:{component:"ConfigCheckboxes",label:"Accepted Type",settings:{options:[{id:"image",value:"Image"},{id:"video",value:"Video"},{id:"document",value:"Document"},{id:"spreadsheet",value:"Spreadsheet"},{id:"presentation",value:"Presentation"}]}},max:{component:"ConfigNumberAddons",label:"Maximal File Size",settings:{addons:"KiB"}}}},attributes:{label:"Attributes",component:"ConfigFileUploadAttribute"}},Ve={type:"Number",title:"Number",column:"is-full",label:"Number",name:"number",placeholder:null,note:null,default_value:null,readonly:!1,disabled:!1,validation:{rules:{required:!1,min:null,max:null},message:[]},visibility:[],translated:!1},xe={properties:{label:"Properties",config:{label:{component:"ConfigInput",label:"Label"},name:{component:"ConfigAutoGenerateKey",label:"Name",settings:{generateBasedOn:"label",placeholder:"field_name"}},placeholder:{component:"ConfigInput",label:"Placeholder"},note:{component:"ConfigInput",label:"Note"},column:{component:"ConfigSelect",label:"Column",settings:{options:y.concat(v)}}}},data:{label:"Data",config:{default_value:{component:"ConfigInput",label:"Default Value"}}},validation:{label:"Validation",config:{required:{component:"ConfigCheckbox",label:"Is Required?"},min:{component:"ConfigNumber",label:"Minimal Value"},max:{component:"ConfigNumber",label:"Maximal Value"}}},attributes:{label:"Attributes",config:{disabled:{component:"ConfigCheckbox",label:"Is Disabled?",settings:{disableBasedOn:"validation.rules.required"}},readonly:{component:"ConfigCheckbox",label:"Is Readonly?",settings:{disableBasedOn:"validation.rules.required"}}}}},Ie={type:"Phone",title:"Phone",column:"is-full",label:"Phone",name:"phone",placeholder:null,note:null,default_value:{country:null,number:null},readonly:!1,disabled:!1,validation:{rules:{required:!1},message:[]},visibility:[],translated:!1},ke={properties:{label:"Properties",config:{label:{component:"ConfigInput",label:"Label"},name:{component:"ConfigAutoGenerateKey",label:"Name",settings:{generateBasedOn:"label",placeholder:"field_name"}},placeholder:{component:"ConfigInput",label:"Placeholder"},note:{component:"ConfigInput",label:"Note"},column:{component:"ConfigSelect",label:"Column",settings:{options:y.concat(v)}}}},validation:{label:"Validation",config:{required:{component:"ConfigCheckbox",label:"Is Required?"}}},attributes:{label:"Attributes",config:{disabled:{component:"ConfigCheckbox",label:"Is Disabled?",settings:{disableBasedOn:"validation.rules.required"}},readonly:{component:"ConfigCheckbox",label:"Is Readonly?",settings:{disableBasedOn:"validation.rules.required"}}}}},Oe={type:"Postcode",title:"Postcode",column:"is-full",label:"Postcode",name:"postcode",placeholder:null,note:null,default_value:"",readonly:!1,disabled:!1,validation:{rules:{required:!1,max:null,min:null},message:[]},visibility:[],translated:!1},Be={properties:{label:"Properties",config:{label:{component:"ConfigInput",label:"Label"},name:{component:"ConfigAutoGenerateKey",label:"Name",settings:{generateBasedOn:"label",placeholder:"field_name"}},placeholder:{component:"ConfigInput",label:"Placeholder"},note:{component:"ConfigInput",label:"Note"},column:{component:"ConfigSelect",label:"Column",settings:{options:y.concat(v)}}}},data:{label:"Data",config:{default_value:{component:"ConfigInput",label:"Default Value"}}},validation:{label:"Validation",config:{required:{component:"ConfigCheckbox",label:"Is Required?"},min:{component:"ConfigNumber",label:"Minimal Character"},max:{component:"ConfigNumber",label:"Maximal Character"}}},attributes:{label:"Attributes",config:{disabled:{component:"ConfigCheckbox",label:"Is Disabled?",settings:{disableBasedOn:"validation.rules.required"}},readonly:{component:"ConfigCheckbox",label:"Is Readonly?",settings:{disableBasedOn:"validation.rules.required"}}}}},qe={type:"Select",title:"Select",column:"is-full",label:"Select",name:"select",placeholder:null,note:null,default_value:null,readonly:!1,disabled:!1,options:[{id:"id",value:"value"}],validation:{rules:{required:!1},message:[]},visibility:[],translated:!1},Se={properties:{label:"Properties",config:{label:{component:"ConfigInput",label:"Label"},name:{component:"ConfigAutoGenerateKey",label:"Name",settings:{generateBasedOn:"label",placeholder:"field_name"}},note:{component:"ConfigInput",label:"Note"},column:{component:"ConfigSelect",label:"Column",settings:{options:y.concat(v)}}}},data:{label:"Data",config:{default_value:{component:"ConfigInput",label:"Default Value"},options:{component:"ConfigAddOption",label:"Options"}}},validation:{label:"Validation",config:{required:{component:"ConfigCheckbox",label:"Is Required?"}}},attributes:{label:"Attributes",config:{disabled:{component:"ConfigCheckbox",label:"Is Disabled?",settings:{disableBasedOn:"validation.rules.required"}},readonly:{component:"ConfigCheckbox",label:"Is Readonly?",settings:{disableBasedOn:"validation.rules.required"}}}}},De={type:"Text",title:"Text",column:"is-full",label:"Text",name:"text",placeholder:null,note:null,default_value:"",readonly:!1,disabled:!1,validation:{rules:{required:!1,max:null,min:null,regex:null},message:[]},visibility:[],translated:!1},Ne={properties:{label:"Properties",config:{label:{component:"ConfigInput",label:"Label"},name:{component:"ConfigAutoGenerateKey",label:"Name",settings:{generateBasedOn:"label",placeholder:"field_name"}},placeholder:{component:"ConfigInput",label:"Placeholder"},note:{component:"ConfigInput",label:"Note"},column:{component:"ConfigSelect",label:"Column",settings:{options:y.concat(v)}}}},data:{label:"Data",config:{default_value:{component:"ConfigInput",label:"Default Value"}}},validation:{label:"Validation",config:{required:{component:"ConfigCheckbox",label:"Is Required?"},min:{component:"ConfigNumber",label:"Minimal Character"},max:{component:"ConfigNumber",label:"Maximal Character"},regex:{component:"ConfigInput",label:"Regex"}}},attributes:{label:"Attributes",config:{disabled:{component:"ConfigCheckbox",label:"Is Disabled?",settings:{disableBasedOn:"validation.rules.required"}},readonly:{component:"ConfigCheckbox",label:"Is Readonly?",settings:{disableBasedOn:"validation.rules.required"}}}}},Fe={type:"Textarea",title:"Textarea",column:"is-full",label:"Textarea",name:"textarea",placeholder:null,note:null,default_value:null,readonly:!1,disabled:!1,validation:{rules:{required:!1,max:null,min:null},message:[]},visibility:[],translated:!1},Ae={properties:{label:"Properties",config:{label:{component:"ConfigInput",label:"Label"},name:{component:"ConfigAutoGenerateKey",label:"Name",settings:{generateBasedOn:"label",placeholder:"field_name"}},placeholder:{component:"ConfigInput",label:"Placeholder"},note:{component:"ConfigInput",label:"Note"},column:{component:"ConfigSelect",label:"Column",settings:{options:y.concat(v)}}}},data:{label:"Data",config:{default_value:{component:"ConfigInput",label:"Default Value"}}},validation:{label:"Validation",config:{required:{component:"ConfigCheckbox",label:"Is Required?"},min:{component:"ConfigNumber",label:"Minimal Character"},max:{component:"ConfigNumber",label:"Maximal Character"}}},attributes:{label:"Attributes",config:{disabled:{component:"ConfigCheckbox",label:"Is Disabled?",settings:{disableBasedOn:"validation.rules.required"}},readonly:{component:"ConfigCheckbox",label:"Is Readonly?",settings:{disableBasedOn:"validation.rules.required"}}}}},P={country:ge,email:Ce,fileUpload:ye,number:Ve,phone:Ie,postcode:Oe,select:qe,text:De,textarea:Fe},ze={name:"BizFormKey",components:{BizFormInputAddons:$,BizButtonIcon:ee},props:{disabled:{type:Boolean,default:!1},label:{type:String,default:null},message:{type:[Array,Object,String],default:void 0},modelValue:{type:[String,null],required:!0},required:{type:Boolean,default:!0},placeholder:{type:String,default:"e.g. a_good_news"},isSmall:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:l}){return{computedValue:x(e,l)}},data(){return{isKeyDisabled:!0,icon:L}},methods:{onKeypress(e){let l=String.fromCharCode(e.keyCode);const t=e.target.value.slice(-1),n="a-z0-9_";if((l===" "||l==="-")&&t!=="_")e.target.value+="_";else if(l==="_"&&t==="_")e.target.value+="";else if(new RegExp("^["+n+"]+$").test(l))return!0;e.preventDefault()}}},Re={class:"control"};function Ke(e,l,t,n,d,o){const c=m("biz-button-icon"),i=m("biz-form-input-addons");return s(),_(i,{modelValue:n.computedValue,"onUpdate:modelValue":l[2]||(l[2]=u=>n.computedValue=u),disabled:d.isKeyDisabled||t.disabled,label:t.label,message:t.message,required:t.required,placeholder:t.placeholder,"is-small":t.isSmall,onInput:l[3]||(l[3]=u=>e.$emit("update:modelValue",u.target.value)),onOnKeypress:o.onKeypress},{afterInput:b(()=>[a("div",Re,[K(f(c,{icon:d.icon.edit,type:"button",class:I({"is-small":t.isSmall}),tabindex:"-1",onClick:l[0]||(l[0]=u=>d.isKeyDisabled=!1)},null,8,["icon","class"]),[[M,d.isKeyDisabled]]),K(f(c,{icon:d.icon.suspend,type:"button",class:I({"is-small":t.isSmall}),tabindex:"-1",onClick:l[1]||(l[1]=u=>d.isKeyDisabled=!0)},null,8,["icon","class"]),[[M,!d.isKeyDisabled]])])]),_:1},8,["modelValue","disabled","label","message","required","placeholder","is-small","onOnKeypress"])}const H=k(ze,[["render",Ke]]),Me={name:"AddOption",components:{FormInput:U},props:{label:{type:String,default:""},modelValue:{type:Array,default:()=>[]}},setup(e,{emit:l}){return{computedValue:x(e,l)}},data(){return{icon:L,emptyOption:{id:null,value:null}}},computed:{canRemove(){return this.computedValue.length>1}},methods:{onAdd(){this.computedValue.push(q.cloneDeep(this.emptyOption))},onDelete(e){this.computedValue.splice(e,1)}}},Pe={class:"label is-size-7"},Ge={class:"field-body"},Ue={key:0,class:"field"},Ee={class:"control"},Le=["onClick"];function je(e,l,t,n,d,o){const c=m("form-input");return s(),g("div",null,[a("label",Pe,D(t.label),1),(s(!0),g(O,null,z(n.computedValue,(i,u)=>(s(),g("div",{key:u,class:"field is-horizontal"},[a("div",Ge,[f(c,{modelValue:i.id,"onUpdate:modelValue":r=>i.id=r,class:"is-small",placeholder:"id"},null,8,["modelValue","onUpdate:modelValue"]),f(c,{modelValue:i.value,"onUpdate:modelValue":r=>i.value=r,class:"is-small",placeholder:"value"},null,8,["modelValue","onUpdate:modelValue"]),o.canRemove?(s(),g("div",Ue,[a("p",Ee,[a("button",{type:"button",class:"button is-small is-danger component-configurable",onClick:r=>o.onDelete(u)},[a("i",{class:I(d.icon.remove)},null,2)],8,Le)])])):V("",!0)])]))),128)),a("button",{type:"button",class:"button is-success is-small",onClick:l[0]||(l[0]=(...i)=>o.onAdd&&o.onAdd(...i))},[a("i",{class:I(d.icon.add)},null,2)])])}const He=k(Me,[["render",je]]),Te={name:"AutoGenerateKey",components:{BizFormKey:H},props:{label:{type:String,default:""},modelValue:{type:[String,null],required:!0},settings:{type:Object,default:()=>{}},entity:{type:Object,default:()=>{}}},setup(e,{emit:l}){return{computedValue:x(e,l)}},computed:{entityGenerated(){return this.entity[this.settings.generateBasedOn]}},watch:{entityGenerated(e,l){let t=e;t||(t=this.entity.type??""),this.computedValue=E(t)}}};function we(e,l,t,n,d,o){const c=m("biz-form-key");return s(),g("div",null,[f(c,{modelValue:n.computedValue,"onUpdate:modelValue":l[0]||(l[0]=i=>n.computedValue=i),label:t.label,placeholder:t.settings.placeholder,required:!1,"is-small":!0},null,8,["modelValue","label","placeholder"])])}const Je=k(Te,[["render",we]]),We={name:"ConfigNumber",components:{BizFormNumber:fe},props:{label:{type:String,default:""},modelValue:{type:[String,Number,null],required:!0},settings:{type:Object,default:()=>{}}},setup(e,{emit:l}){return{computedValue:x(e,l)}}},Qe={class:"help"};function Xe(e,l,t,n,d,o){var i;const c=m("biz-form-number");return s(),g("div",null,[f(c,{modelValue:n.computedValue,"onUpdate:modelValue":l[0]||(l[0]=u=>n.computedValue=u),label:t.label,"is-small":!0},te({_:2},[(i=t.settings)!=null&&i.note?{name:"note",fn:b(()=>{var u;return[a("p",Qe,D((u=t.settings)==null?void 0:u.note),1)]}),key:"0"}:void 0]),1032,["modelValue","label"])])}const T=k(We,[["render",Xe]]),Ye={name:"ConfigFileUploadAttribute",components:{BizCard:R,ConfigCheckbox:j,ConfigNumber:T},props:{modelValue:{type:[Object,Array],default:()=>{}},isExpandingOnLoad:{type:Boolean,default:!1}},emits:["on-click-header-card"],setup(e,{emit:l}){return{computedValue:x(e,l)}},data(){return{oldData:{max_file_number:this.computedValue.max_file_number,min_file_number:this.computedValue.min_file_number}}},computed:{isMultipleUpload(){return this.computedValue.is_multiple_upload}},watch:{isMultipleUpload(e,l){e||(this.computedValue.max_file_number=this.oldData.max_file_number,this.computedValue.min_file_number=this.oldData.min_file_number)}},methods:{onClickHeaderCard(e){this.$emit("on-click-header-card",e)}}},Ze=a("hr",null,null,-1),$e=a("hr",null,null,-1);function el(e,l,t,n,d,o){const c=m("config-checkbox"),i=m("config-number"),u=m("biz-card");return s(),_(u,{ref:"card","is-collapsed":!0,"is-expanding-on-load":t.isExpandingOnLoad,onOnClickHeaderCard:o.onClickHeaderCard},{headerTitle:b(()=>[B(" Others ")]),default:b(()=>[n.computedValue.hasOwnProperty("is_multiple_upload")?(s(),_(c,{key:0,modelValue:n.computedValue.is_multiple_upload,"onUpdate:modelValue":l[0]||(l[0]=r=>n.computedValue.is_multiple_upload=r),label:"Is Multiple File Upload?"},null,8,["modelValue"])):V("",!0),o.isMultipleUpload?(s(),g(O,{key:1},[Ze,n.computedValue.hasOwnProperty("max_file_number")?(s(),_(i,{key:0,modelValue:n.computedValue.max_file_number,"onUpdate:modelValue":l[1]||(l[1]=r=>n.computedValue.max_file_number=r),label:"Maximal File Number"},null,8,["modelValue"])):V("",!0),$e,n.computedValue.hasOwnProperty("min_file_number")?(s(),_(i,{key:1,modelValue:n.computedValue.min_file_number,"onUpdate:modelValue":l[2]||(l[2]=r=>n.computedValue.min_file_number=r),label:"Minimal File Number"},null,8,["modelValue"])):V("",!0)],64)):V("",!0)]),_:1},8,["is-expanding-on-load","onOnClickHeaderCard"])}const ll=k(Ye,[["render",el]]),G={country:_e,email:he,fileDragDrop:ve,number:xe,phone:ke,postcode:Be,select:Se,text:Ne,textarea:Ae},nl={name:"InputConfig",components:{BizCard:R,ConfigAddOption:He,ConfigAutoGenerateKey:Je,ConfigCheckbox:j,ConfigCheckboxes:se,ConfigFileUploadAttribute:ll,ConfigInput:de,ConfigNumber:T,ConfigNumberAddons:re,ConfigRowSection:ue,ConfigSelect:ce,TRBL:me,TRBLInput:pe},props:{modelValue:{type:Object,required:!0}},setup(e,{emit:l}){let t=x(e,l),n=G[q.camelCase(t.value.type)];for(const[d,o]of Object.entries(n))for(const[c,i]of Object.entries(o))t.value[d]===void 0&&(t.value[d]={});return{entity:t}},computed:{configOptions(){return G[q.camelCase(this.entity.type)]},numberOfOptions(){return Object.keys(this.configOptions).length},validationRules(){return this.entity.validation.rules??{}}},methods:{isBlank:N,onClickHeaderCard(e,l){const t=this;if(e){let n=0;q.forEach(t.configOptions,function(d){if(n!=l)if(!d.component)t.$refs[`config-${n}`][0].isContentShown=!1;else{let o=t.$refs[`config-${n}`][0].$refs.card;typeof o<"u"&&o!==null&&(o.isContentShown=!1)}n++})}}}},ol={key:2};function tl(e,l,t,n,d,o){const c=m("biz-card");return s(),g("div",null,[(s(!0),g(O,null,z(o.configOptions,(i,u,r)=>(s(),g(O,{key:r},[i.component&&!o.isBlank(n.entity)?(s(),_(A(i.component),{key:0,ref_for:!0,ref:`config-${r}`,modelValue:n.entity,"onUpdate:modelValue":l[0]||(l[0]=p=>n.entity=p),class:I({"mb-1":r!=o.numberOfOptions-1}),"is-expanding-on-load":r==0,onOnClickHeaderCard:p=>o.onClickHeaderCard(p,r)},null,40,["modelValue","class","is-expanding-on-load","onOnClickHeaderCard"])):o.isBlank(n.entity)?V("",!0):(s(),_(c,{key:1,ref_for:!0,ref:`config-${r}`,class:I({"mb-1":r!=o.numberOfOptions-1}),"is-collapsed":!0,"is-expanding-on-load":r==0,onOnClickHeaderCard:p=>o.onClickHeaderCard(p,r)},{headerTitle:b(()=>[B(D(i.label),1)]),default:b(()=>[(s(!0),g(O,null,z(i.config,(p,C,F)=>(s(),g(O,{key:C},[p.component&&u!="validation"?(s(),_(A(p.component),{key:0,modelValue:n.entity[C],"onUpdate:modelValue":S=>n.entity[C]=S,label:p.label,entity:n.entity,settings:p.settings},null,8,["modelValue","onUpdate:modelValue","label","entity","settings"])):p.component&&u=="validation"?(s(),_(A(p.component),{key:1,modelValue:o.validationRules[C],"onUpdate:modelValue":S=>o.validationRules[C]=S,label:p.label,entity:n.entity,settings:p.settings},null,8,["modelValue","onUpdate:modelValue","label","entity","settings"])):V("",!0),F!=Object.keys(i.config).length-1?(s(),g("hr",ol)):V("",!0)],64))),128))]),_:2},1032,["class","is-expanding-on-load","onOnClickHeaderCard"]))],64))),128))])}const al=k(nl,[["render",tl]]);function Zl(){return{name:null,form_id:null,setting:{button:{text:null,position:null}},field_groups:[w()]}}function w(){return{title:null,order:null,fields:[]}}const il={name:"FormBuilder",components:{BizButton:Y,BizButtonLink:Z,BizCard:R,BizFormInput:U,BizFormKey:H,Draggable:X,FieldGroup:ie,InputConfig:al},mixins:[W,Q],inject:{isEditMode:{default:!1}},props:{inputConfigId:{type:String,default:""},modelValue:{type:Object,required:!0}},emits:["update:inputConfigId"],setup(e,{emit:l}){return{form:x(e,l),computedInputConfigId:x(e,l,"inputConfigId"),isDebugMode:!1,baseRouteName:ae().props.value.baseRouteName,iconMove:ne,iconRemove:oe}},data(){return{clonedComponent:null}},computed:{computedFieldGroups(){return this.form.field_groups},fieldByConfigId(){var n;const e=this;let l=null,t=null;return e.computedFieldGroups.forEach(function(d,o){let c=d.fields.findIndex(i=>i.id==e.inputConfigId);c!==-1&&(l=o,t=c)}),((n=e.computedFieldGroups[l])==null?void 0:n.fields[t])??{}},isComponentConfigOpen(){return!N(this.fieldByConfigId)&&!N(this.inputConfigId)},availableFields(){let e=[];for(const l in P)e.push(P[l]);return e},hasFields(){return N(this.form.field_groups)?!1:this.form.field_groups.length>0}},methods:{log:function(e){this.isDebugMode&&console.log(e)},cloneComponent(e){return this.clonedComponent=JSON.parse(JSON.stringify(e)),this.clonedComponent.id=le(),this.computedInputConfigId=this.clonedComponent.id,this.clonedComponent},onSettingInput(e){this.computedInputConfigId=e},addFieldGroup(){this.computedFieldGroups.push(w())},deleteFieldGroup(e){const l=this;be("Are you sure?").then(t=>{t.isConfirmed&&l.computedFieldGroups.splice(e,1)})},onSubmit(){const e=this;this.isEditMode?e.form.put(route(e.baseRouteName+".update",e.form.id),{onStart:()=>e.onStartLoadingOverlay(),onFinish:()=>e.onEndLoadingOverlay()}):e.form.post(route(e.baseRouteName+".store"),{onStart:()=>e.onStartLoadingOverlay(),onFinish:()=>e.onEndLoadingOverlay()})},populateKey(e){q.isEmpty(this.form.form_id)&&!q.isEmpty(this.form.name)&&(this.form.form_id=E(this.form.name))},onStartedHandler(e){e.item.classList.remove("is-half"),e.item.classList.add("is-full")},onEndedHandler(e){e.item.classList.remove("is-full"),e.item.classList.add("is-half")}}},sl={class:"columns"},dl={class:"column"},rl={class:"column"},ul=a("hr",null,null,-1),cl={class:"columns"},ml={class:"column is-3 is-narrow pt-0"},pl={id:"side-menu-form-builder",class:"p-1"},fl={class:"column is-half p-2"},bl={class:"card"},gl={class:"card-content is-size-7"},_l={class:"content is-center"},Cl={class:"column is-9"},hl={class:"column is-12"},yl={class:"field has-addons is-pulled-right"},vl={class:"control"},Vl={class:"icon"},xl={class:"control"},Il={class:"icon"},kl=a("div",{class:"is-clearfix"},null,-1),Ol={class:"columns"},Bl={class:"column is-12"},ql={class:"field is-grouped is-grouped-right"},Sl={class:"control"},Dl={class:"control"};function Nl(e,l,t,n,d,o){const c=m("biz-form-input"),i=m("biz-form-key"),u=m("draggable"),r=m("biz-card"),p=m("input-config"),C=m("biz-button"),F=m("field-group"),S=m("biz-button-link");return s(),g("div",null,[a("div",sl,[a("div",dl,[f(c,{modelValue:n.form.name,"onUpdate:modelValue":l[0]||(l[0]=h=>n.form.name=h),label:"Name",placeholder:"Contact Form",required:!0,message:e.error("name"),onOnBlur:o.populateKey},null,8,["modelValue","message","onOnBlur"])]),a("div",rl,[f(i,{modelValue:n.form.form_id,"onUpdate:modelValue":l[1]||(l[1]=h=>n.form.form_id=h),label:"Form ID",placeholder:"e.g. contact_form",required:!0,message:e.error("form_id")},null,8,["modelValue","message"])])]),ul,a("div",cl,[a("div",ml,[a("div",pl,[o.isComponentConfigOpen?(s(),_(p,{key:1,modelValue:o.fieldByConfigId,"onUpdate:modelValue":l[2]||(l[2]=h=>o.fieldByConfigId=h),class:"form-builder-input-config"},null,8,["modelValue"])):(s(),_(r,{key:0,class:"mb-1","is-collapsed":!0,"is-expanding-on-load":!0},{headerTitle:b(()=>[B(" General ")]),default:b(()=>[f(u,{class:"dragArea columns is-multiline",list:o.availableFields,group:{name:"fields",pull:"clone",put:!1},clone:o.cloneComponent,sort:!1,"item-key":"id",onChange:o.log,onStart:o.onStartedHandler,onEnd:o.onEndedHandler},{item:b(({element:h})=>[a("div",fl,[a("div",bl,[a("div",gl,[a("div",_l,D(h.title),1)])])])]),_:1},8,["list","clone","onChange","onStart","onEnd"])]),_:1}))])]),a("div",Cl,[f(u,{class:"dragArea list-group columns is-multiline",group:"fieldGroups",handle:".handle-field-group","item-key":"id",animation:300,list:o.computedFieldGroups},{item:b(({element:h,index:J})=>[a("div",hl,[a("div",yl,[a("p",vl,[f(C,{type:"button",class:"is-small",onClick:Al=>o.deleteFieldGroup(J)},{default:b(()=>[a("span",Vl,[a("i",{class:I(n.iconRemove)},null,2)])]),_:2},1032,["onClick"])]),a("p",xl,[f(C,{type:"button",class:"is-small handle-field-group"},{default:b(()=>[a("span",Il,[a("i",{class:I(n.iconMove)},null,2)])]),_:1})])]),kl,f(F,{"field-group":h,onOnSettingInput:o.onSettingInput},null,8,["field-group","onOnSettingInput"])])]),_:1},8,["list"]),a("div",Ol,[a("div",Bl,[f(C,{class:"is-primary",onClick:l[3]||(l[3]=h=>o.addFieldGroup())},{default:b(()=>[B(" Add Field Group ")]),_:1})])])])]),a("div",ql,[a("div",Sl,[f(S,{class:"is-link is-light",href:e.route(n.baseRouteName+".index")},{default:b(()=>[B(" Cancel ")]),_:1},8,["href"])]),a("div",Dl,[f(C,{class:"is-link",onClick:o.onSubmit},{default:b(()=>[B(D(o.isEditMode?"Update":"Create"),1)]),_:1},8,["onClick"])])])])}const Fl=k(il,[["render",Nl]]),$l=Object.freeze(Object.defineProperty({__proto__:null,default:Fl},Symbol.toStringTag,{value:"Module"}));export{Fl as F,$l as a,Zl as g};
