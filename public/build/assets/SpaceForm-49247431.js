import{M as U}from"./HasPageErrors-4d447fdf.js";import{B as x}from"./ButtonIcon-05c24ca4.js";import{B as E}from"./Card-52ddfc57.js";import{B as L}from"./File-df13363c.js";import{B as w}from"./Input-50a73630.js";import{B as j}from"./Select-c82d82bb.js";import{B as q}from"./Textarea-18e9b25c.js";import{B as A}from"./Icon-150b61ef.js";import{B as N}from"./Image-52e0dacd.js";import{B as I}from"./Field-fbae01a6.js";import T from"./SpaceModalContact-6304ce14.js";import{i as H}from"./icon-class-4ab3933f.js";import{l as f,f as u,p as n,i as l,q as i,u as _,s as g,F as b,j as V,x as F,r as c,o as r,t as p,k as h}from"./vue-loading.min-aa20e13d.js";import{u as W,g as G}from"./utils-79a9c8b1.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";import"./Button-b3acaac2.js";import"./InputFile-1187b7e3.js";import"./InputError-bc1e9f36.js";import"./Input-2fb71e37.js";import"./Select-9fda6861.js";import"./Textarea-3c29db5c.js";import"./Field-c2e062a9.js";import"./Phone-f71a3985.js";import"./Dropdown-5425ae3a.js";import"./DropdownScroll-6bec070e.js";import"./DropdownSearch-bd4068c6.js";import"./ModalCard-42b1747b.js";const K={components:{BizButtonIcon:x,BizCard:E,BizFormFile:L,BizFormInput:w,BizFormSelect:j,BizFormTextarea:q,BizIcon:A,BizImage:N,BizLabel:I,SpaceModalContact:T},mixins:[U],props:{modelValue:{type:Object,required:!0},coverUrl:{type:[String,null],default:""},defaultCountry:{type:String,default:""},instructions:{type:Object,default:()=>{}},logoUrl:{type:[String,null],default:""},parentOptions:{type:Object,required:!0},typeOptions:{type:Object,required:!0},canChangeParent:{type:Boolean,default:!0}},setup(o,{emit:t}){return{space:W(o,t)}},data(){return{formContact:this.initForm(),isContactModalOpen:!1,contactErrors:{},icon:H,logoSrc:this.logoUrl,coverSrc:this.coverUrl,countryOptions:[]}},computed:{logoDisplay(){return this.logoSrc??null},coverDisplay(){return this.coverSrc??null}},mounted:async function(){this.countryOptions=await G()},methods:{openContactModal(){this.formContact=this.initForm(),this.isContactModalOpen=!0,this.contactErrors={}},closeContactModal(){this.isContactModalOpen=!1},initForm(){return{name:null,phone:{},email:null}},addContact(){const o=this,t=route("admin.api.spaces.contact.validate");axios.post(t,o.formContact).then(()=>{o.space.contacts.push(o.formContact),o.closeContactModal()}).catch(m=>{o.contactErrors=m.response.data.errors})},removeContact(o){this.space.contacts.splice(o,1)},getDial(o){if(o.number){const t=f.find(this.countryOptions,["id",o.country]);return t?"+"+t.dial:""}return""},onFilePicked(o){this.logoSrc=o.target.result,f.unset(this.space,"deleted_media.logo")},onCoverFilePicked(o){this.coverSrc=o.target.result,f.unset(this.space,"deleted_media.cover")},deleteLogo(){this.space.logo=null,this.logoSrc=null,f.set(this.space,"deleted_media.logo",!0)},deleteCover(){this.space.cover=null,this.coverSrc=null,f.set(this.space,"deleted_media.cover",!0)}}},Q={class:"columns"},R={class:"column is-half"},X=["value"],Y={class:"column is-half"},Z=["value"],$={class:"columns"},ee={class:"column is-half"},oe={class:"column is-half"},te={class:"columns"},le={class:"column is-half"},se={class:"field"},ae=l("span",null,"Delete",-1),ne={class:"column is-half"},re={class:"field"},ie=l("span",null,"Delete",-1),ce={class:"field"},de=l("span",null,"Add Contact",-1),me={class:"columns is-multiline pl-3"};function ue(o,t,m,s,d,a){const y=c("biz-form-input"),k=c("biz-form-select"),S=c("biz-form-textarea"),v=c("biz-label"),z=c("biz-image"),C=c("biz-button-icon"),B=c("biz-form-file"),M=c("biz-icon"),P=c("biz-card"),D=c("space-modal-contact");return r(),u("div",null,[n(y,{modelValue:s.space.name,"onUpdate:modelValue":t[0]||(t[0]=e=>s.space.name=e),label:"Name",placeholder:"e.g My Location",required:"",maxlength:"128",message:o.error("name")},null,8,["modelValue","message"]),l("div",Q,[l("div",R,[n(k,{modelValue:s.space.parent_id,"onUpdate:modelValue":t[1]||(t[1]=e=>s.space.parent_id=e),class:"is-fullwidth",label:"Parent",disabled:!m.canChangeParent,message:o.error("parent_id")},{default:i(()=>[(r(!0),u(b,null,V(m.parentOptions,e=>(r(),u("option",{key:e.id,value:e.id},p(e.value),9,X))),128))]),_:1},8,["modelValue","disabled","message"])]),l("div",Y,[n(k,{modelValue:s.space.type_id,"onUpdate:modelValue":t[2]||(t[2]=e=>s.space.type_id=e),class:"is-fullwidth",label:"Type",message:o.error("type_id")},{default:i(()=>[(r(!0),u(b,null,V(m.typeOptions,e=>(r(),u("option",{key:e.id,value:e.id},p(e.value),9,Z))),128))]),_:1},8,["modelValue","message"])])]),n(S,{modelValue:s.space.address,"onUpdate:modelValue":t[3]||(t[3]=e=>s.space.address=e),label:"Address",placeholder:"Address",rows:"2",maxlength:"500",message:o.error("address")},null,8,["modelValue","message"]),l("div",$,[l("div",ee,[n(y,{modelValue:s.space.latitude,"onUpdate:modelValue":t[4]||(t[4]=e=>s.space.latitude=e),label:"Latitude",message:o.error("latitude")},null,8,["modelValue","message"])]),l("div",oe,[n(y,{modelValue:s.space.longitude,"onUpdate:modelValue":t[5]||(t[5]=e=>s.space.longitude=e),label:"Longitude",message:o.error("longitude")},null,8,["modelValue","message"])])]),l("div",te,[l("div",le,[l("div",se,[n(v,null,{default:i(()=>[h("Logo")]),_:1}),a.logoDisplay?(r(),_(z,{key:0,src:a.logoDisplay,"img-style":{"max-width":"300px","max-height":"300px"}},null,8,["src"])):g("",!0),a.logoDisplay?(r(),_(C,{key:1,class:"is-small is-danger",type:"button",icon:d.icon.remove,onClick:a.deleteLogo},{default:i(()=>[ae]),_:1},8,["icon","onClick"])):g("",!0),n(B,{modelValue:s.space.logo,"onUpdate:modelValue":t[6]||(t[6]=e=>s.space.logo=e),"is-name-displayed":!1,message:o.error("logo"),notes:m.instructions.logo,onOnFilePicked:a.onFilePicked},null,8,["modelValue","message","notes","onOnFilePicked"])])]),l("div",ne,[l("div",re,[n(v,null,{default:i(()=>[h("Cover")]),_:1}),a.coverDisplay?(r(),_(z,{key:0,src:a.coverDisplay,"img-style":{"max-width":"600px","max-height":"400px"}},null,8,["src"])):g("",!0),a.coverDisplay?(r(),_(C,{key:1,class:"is-small is-danger",type:"button",icon:d.icon.remove,onClick:a.deleteCover},{default:i(()=>[ie]),_:1},8,["icon","onClick"])):g("",!0),n(B,{modelValue:s.space.cover,"onUpdate:modelValue":t[7]||(t[7]=e=>s.space.cover=e),"is-name-displayed":!1,message:o.error("cover"),notes:m.instructions.cover,onOnFilePicked:a.onCoverFilePicked},null,8,["modelValue","message","notes","onOnFilePicked"])])])]),l("div",ce,[n(v,null,{default:i(()=>[h("Contacts")]),_:1}),n(C,{icon:d.icon.add,type:"button",onClick:a.openContactModal},{default:i(()=>[de]),_:1},8,["icon","onClick"])]),l("div",me,[(r(!0),u(b,null,V(s.space.contacts,(e,O)=>(r(),u("div",{key:O,class:"column is-4"},[n(P,null,{headerTitle:i(()=>[h(p(e.name),1)]),headerButton:i(()=>[n(M,{icon:d.icon.close,onClick:pe=>a.removeContact(O)},null,8,["icon","onClick"])]),default:i(()=>[l("p",null," Email: "+p(e.email),1),l("p",null," Phone: "+p(a.getDial(e.phone))+" "+p(e.phone.number),1)]),_:2},1024)]))),128))]),d.isContactModalOpen?(r(),_(D,{key:0,modelValue:d.formContact,"onUpdate:modelValue":t[8]||(t[8]=e=>d.formContact=e),"contact-errors":d.contactErrors,"country-options":d.countryOptions,"default-country":m.defaultCountry,onAdd:a.addContact,onClose:a.closeContactModal},null,8,["modelValue","contact-errors","country-options","default-country","onAdd","onClose"])):g("",!0),F(o.$slots,"default"),F(o.$slots,"action")])}const Ie=J(K,[["render",ue]]);export{Ie as default};
