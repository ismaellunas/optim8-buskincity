import{M as x}from"./FilterDataHandle-94157290.js";import{M as z}from"./HasModal-fa56130c.js";import{B}from"./Button-b3acaac2.js";import{B as N}from"./Search-cafe34ab.js";import{o as p,f as d,i as s,x as S,H as O,p as r,q as l,u as E,s as F,r as c,k as b,t as h,n as _,F as L,j as V}from"./vue-loading.min-aa20e13d.js";import{_ as g}from"./_plugin-vue_export-helper-c27b6911.js";import{B as q}from"./TableIndex-6b2a4ef8.js";import P from"./SpaceTypeFormModal-473c4657.js";import{i as D}from"./icon-class-4ab3933f.js";import{s as y,o as f,c as R}from"./alert-e0e75cb7.js";import"./HasLoader-a564cfe6.js";import"./ButtonIcon-05c24ca4.js";import"./Icon-150b61ef.js";import"./Field-c2e062a9.js";import"./Input-2fb71e37.js";import"./utils-79a9c8b1.js";import"./Pagination-8d9b0028.js";import"./Link-2bcf0cab.js";import"./Table-2efbef14.js";import"./TableInfo-c372d0e5.js";import"./HasPageErrors-4d447fdf.js";import"./Input-50a73630.js";import"./Field-fbae01a6.js";import"./InputError-bc1e9f36.js";import"./ModalCard-42b1747b.js";import"./sweetalert2.all-ebd52f41.js";const j={name:"BizListSection"},w={class:"title is-4 mt-5"},H={class:"box is-shadowless"};function U(t,e,n,m,o,a){return p(),d("div",null,[s("h2",w,[S(t.$slots,"title")]),s("div",H,[S(t.$slots,"default")])])}const A=g(j,[["render",U]]),I={name:"SpaceType",components:{BizButton:B,BizFilterSearch:N,BizListSection:A,BizTableIndex:q,SpaceTypeFormModal:P},mixins:[x,z],inject:["i18n"],data(){return{baseRouteName:"admin.spaces.settings.space-types",icon:D,queryParams:{},selectedType:{},term:null,types:{}}},mounted(){this.getSpaceTypes()},methods:{getSpaceTypes(t=null){const e=this;t=t??route(e.baseRouteName+".records"),axios.get(t,{params:e.queryParams}).then(n=>{e.types=n.data})},refreshWithQueryParams(){this.getSpaceTypes()},openModalCreate(){this.selectedType={},this.openModal()},openModalEdit(t){this.selectedType=t,this.openModal()},onSubmit(t){t=O(t),t.id?this.onUpdate(t):this.onStore(t)},onStore(t){const e=this;t.post(route(e.baseRouteName+".store"),{onStart:()=>{e.onStartLoadingOverlay()},onSuccess:n=>{y(n.props.flash.message),e.getSpaceTypes()},onError:()=>{f()},onFinish:()=>{e.selectedType={},e.closeModal(),e.onEndLoadingOverlay()}})},onUpdate(t){const e=this;t.put(route(e.baseRouteName+".update",t.id),{onStart:()=>{e.onStartLoadingOverlay()},onSuccess:n=>{y(n.props.flash.message),e.getSpaceTypes()},onError:()=>{f()},onFinish:()=>{e.selectedType={},e.closeModal(),e.onEndLoadingOverlay()}})},onDelete(t){const e=this;R().then(n=>{n.isConfirmed&&e.$inertia.delete(route(this.baseRouteName+".destroy",t.id),{onStart:e.onStartLoadingOverlay,onFinish:e.onEndLoadingOverlay,onError:()=>{f()},onSuccess:m=>{y(m.props.flash.message),e.getSpaceTypes()}})})}}},Q={class:"columns"},W={class:"column is-4"},$={class:"column has-text-right"},G={class:"icon is-small"},J=s("span",null,"Add New",-1),K=s("tr",null,[s("th",null,"Name"),s("th",null,[s("div",{class:"level-right"}," Actions ")])],-1),X={class:"level-right"},Y={class:"icon is-small"},Z={class:"icon is-small"};function ee(t,e,n,m,o,a){const v=c("biz-filter-search"),u=c("biz-button"),T=c("biz-table-index"),M=c("biz-list-section"),k=c("space-type-form-modal");return p(),d("div",null,[r(M,null,{title:l(()=>[b(h(a.i18n.spaceType),1)]),default:l(()=>[s("div",Q,[s("div",W,[r(v,{modelValue:o.term,"onUpdate:modelValue":e[0]||(e[0]=i=>o.term=i),onSearch:t.search},null,8,["modelValue","onSearch"])]),s("div",$,[r(u,{type:"button",class:"is-primary",onClick:e[1]||(e[1]=i=>a.openModalCreate())},{default:l(()=>[s("span",G,[s("i",{class:_(o.icon.add)},null,2)]),J]),_:1})])]),r(T,{"is-ajax":!0,records:o.types,"query-params":o.queryParams,onOnClickedPagination:a.getSpaceTypes},{thead:l(()=>[K]),default:l(()=>[(p(!0),d(L,null,V(o.types.data,i=>(p(),d("tr",{key:i.id},[s("td",null,h(i.name),1),s("td",null,[s("div",X,[r(u,{type:"button",class:"is-ghost has-text-black",onClick:C=>a.openModalEdit(i)},{default:l(()=>[s("span",Y,[s("i",{class:_(o.icon.edit)},null,2)])]),_:2},1032,["onClick"]),r(u,{type:"button",class:"is-ghost has-text-black ml-1",onClick:C=>a.onDelete(i)},{default:l(()=>[s("span",Z,[s("i",{class:_(o.icon.remove)},null,2)])]),_:2},1032,["onClick"])])])]))),128))]),_:1},8,["records","query-params","onOnClickedPagination"])]),_:1}),t.isModalOpen?(p(),E(k,{key:0,"selected-type":o.selectedType,onClose:e[2]||(e[2]=i=>t.closeModal()),onOnSubmit:a.onSubmit},{header:l(()=>[b(h(o.selectedType.id?a.i18n.editSpaceType:a.i18n.createSpaceType),1)]),_:1},8,["selected-type","onOnSubmit"])):F("",!0)])}const ze=g(I,[["render",ee]]);export{ze as default};
