import{B as S}from"./Button-03e0d3fd.js";import{B as x}from"./GmapMarker-54ec501b.js";import{B as I}from"./Icon-6def3c13.js";import{B as Y}from"./Image-c2b8efed.js";import{B as w}from"./Link-359d994c.js";import{B as N}from"./ModalCard-06597c5e.js";import{B as T}from"./Table-6b0ddb68.js";import{B as V}from"./Tag-8100534e.js";import q from"./BookingTime-c844dd6b.js";import{L as P}from"./User-b709320f.js";import{M as L}from"./HasLoader-a564cfe6.js";import{M as O}from"./HasModal-fa56130c.js";import{M as R}from"./HasPageErrors-da5616c1.js";import{b as E}from"./booking-icon-853771cf.js";import{h as g}from"./moment-fbc5633a.js";import{s as H,o as F}from"./alert-fe3154bb.js";import{H as j,B as v,f as m,i as t,p as n,q as a,t as l,F as A,j as U,s as k,u as G,r,o as d,k as u}from"./vue-loading.min-a6a947f0.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import"./map-664e1f49.js";import"./utils-caa7a80b.js";import"./Datepicker-4f509259.js";import"./Field-e1691255.js";import"./FieldHorizontal-bfc51f07.js";import"./NavbarItem-766600c9.js";import"./icon-class-4ab3933f.js";import"./sweetalert2.all-7b2d1616.js";const J={components:{BizButton:S,BizIcon:I,BizImage:Y,BizLink:w,BizModalCard:N,BizTable:T,BizTag:V,BookingTime:q,BizGmapMarker:x},mixins:[L,O,R],layout:P,props:{allowedDatesRouteName:{type:String,required:!0},availableTimesRouteName:{type:String,required:!0},baseRouteName:{type:String,required:!0},event:{type:Object,required:!0},maxDate:{type:String,required:!0},minDate:{type:String,required:!0},product:{type:Object,required:!0},timezone:{type:String,required:!0},googleApiKey:{type:String,default:null}},setup(e){var o,s;const i={date:null,time:null,timezone:e.timezone};return{bookingIcon:E,form:j(i),isShortDescription:v(!0),selectedImageId:v(null),mapPosition:{latitude:(o=e.event.location)==null?void 0:o.latitude,longitude:(s=e.event.location)==null?void 0:s.longitude}}},computed:{selectedImageUrl(){return this.product.gallery.length==0?"https://bulma.io/images/placeholders/1280x960.png":this.selectedImageId?this.product.gallery[this.selectedImageId].file_url:this.product.gallery[0].file_url},bookedAt(){if(this.form.date&&this.form.time){const e=g(this.form.date).format("YYYY-MM-DD")+" "+this.form.time;return g(e).format("YYYY/MM/DD HH:mm")}return null}},methods:{toggleDescription(){this.isShortDescription=!this.isShortDescription},submitBooking(){const e=this;e.form.transform(i=>(i.date=g(i.date).format("YYYY-MM-DD"),i)).post(route("booking.orders.book-event",e.product.id),{onStart:()=>e.onStartLoadingOverlay(),onSuccess:i=>{H(i.props.flash.message)},onError:i=>{const o=[e.error("date","default",i),e.error("time","default",i)].filter(Boolean);F({html:o.join("<br>")})},onFinish:()=>{e.onEndLoadingOverlay()}})}}},Q={class:"columns is-multiline is-centered box"},W={class:"column is-11"},X={class:"breadcrumb","aria-label":"breadcrumbs"},Z={class:"is-active"},$={href:"#","aria-current":"page"},tt={class:"column is-11"},ot={class:"title is-2 mt-5 mb-2"},et={class:"is-size-7"},it={class:"columns is-multiline mt-3"},st={class:"column is-8"},nt={class:"content"},lt={class:"buttons"},at={class:"column is-4"},rt=t("th",null,"Duration",-1),dt=t("th",null,"Timezone",-1),ct={class:"columns is-multiline mt-5"},mt=t("div",{class:"column is-12"},[t("h2",{class:"title is-3"}," Gallery ")],-1),ut={class:"column is-5"},_t={key:0,class:"hero is-medium is-primary is-radius"},ht=t("div",{class:"hero-body"},null,-1),bt=[ht],gt={key:1,class:"card"},ft={class:"card-image"},pt={class:"column is-7"},vt={key:0,class:"columns is-multiline"},kt={class:"card"},yt={class:"card-image"},zt={key:1,class:"hero is-medium is-primary is-radius"},Bt=t("div",{class:"hero-body"},null,-1),Dt=[Bt],Mt={class:"columns is-multiline mt-5"},Ct=t("div",{class:"column is-12"},[t("h2",{class:"title is-3"}," Event Booking ")],-1),St={key:0,class:"column is-4"},xt={class:"card"},It={class:"column is-8"},Yt={class:"card"},wt={class:"card-content"},Nt={class:"content"},Tt=t("p",{class:"modal-card-title has-text-weight-bold"}," Booking Event Confirmation ",-1),Vt={class:"title is-5"},qt={class:"columns mx-0",style:{width:"100%"}},Pt={class:"column px-0"},Lt={class:"is-pulled-right"};function Ot(e,i,o,s,Rt,_){const y=r("biz-link"),z=r("biz-tag"),h=r("biz-button"),f=r("biz-table"),p=r("biz-image"),B=r("biz-gmap-marker"),D=r("booking-time"),b=r("biz-icon"),M=r("biz-modal-card");return d(),m("div",Q,[t("div",W,[t("nav",X,[t("ul",null,[t("li",null,[n(y,{href:e.route(o.baseRouteName+".index")},{default:a(()=>[u(" Products ")]),_:1},8,["href"])]),t("li",Z,[t("a",$,l(o.product.name),1)])])])]),t("div",tt,[t("h1",ot,l(o.product.name),1),t("p",et,[n(z,null,{default:a(()=>[u(l(o.product.sku),1)]),_:1})]),t("div",it,[t("div",st,[t("div",nt,[t("p",null,l(s.isShortDescription?o.product.short_description:o.product.description),1),t("p",lt,[n(h,{class:"is-ghost has-text-primary has-text-weight-bold",type:"button",onClick:_.toggleDescription},{default:a(()=>[u(l(s.isShortDescription?"Read more":"Less"),1)]),_:1},8,["onClick"])])])]),t("div",at,[n(f,null,{default:a(()=>[t("tbody",null,[t("tr",null,[rt,t("td",null,l(o.event.duration),1)]),t("tr",null,[dt,t("td",null,l(o.event.timezone),1)])])]),_:1})])]),t("div",ct,[mt,t("div",ut,[o.product.gallery.length==0?(d(),m("div",_t,bt)):(d(),m("div",gt,[t("div",ft,[n(p,{ratio:"is-3by2",src:_.selectedImageUrl},null,8,["src"])])]))]),t("div",pt,[o.product.gallery.length>0?(d(),m("div",vt,[(d(!0),m(A,null,U(o.product.gallery,(c,C)=>(d(),m("div",{key:c.id,class:"column is-one-third-desktop is-half-tablet"},[t("div",kt,[t("div",yt,[n(p,{ratio:"is-3by2",src:c.thumbnail_url,alt:"",onClick:Et=>s.selectedImageId=C},null,8,["src","onClick"])])])]))),128))])):(d(),m("div",zt,Dt))])]),t("div",Mt,[Ct,s.mapPosition.latitude&&s.mapPosition.longitude?(d(),m("div",St,[t("div",xt,[n(B,{modelValue:s.mapPosition,"onUpdate:modelValue":i[0]||(i[0]=c=>s.mapPosition=c),"api-key":o.googleApiKey,"init-position":s.mapPosition,"map-style":["width: 100%","height: 378px"],"enable-search-box":!1,"enable-marker-move":!1},null,8,["modelValue","api-key","init-position"])])])):k("",!0),t("div",It,[t("div",Yt,[t("div",wt,[t("div",Nt,[n(D,{modelValue:s.form,"onUpdate:modelValue":i[1]||(i[1]=c=>s.form=c),"allowed-dates-route":o.allowedDatesRouteName,"available-times-param":{product:o.product.id},"available-times-route":o.availableTimesRouteName,"max-date":o.maxDate,"min-date":o.minDate,"product-id":o.product.id,onOnTimeConfirmed:e.openModal},null,8,["modelValue","allowed-dates-route","available-times-param","available-times-route","max-date","min-date","product-id","onOnTimeConfirmed"])])])])])])]),e.isModalOpen?(d(),G(M,{key:0,onClose:e.closeModal},{header:a(()=>[Tt,t("button",{"aria-label":"close",class:"delete",onClick:i[2]||(i[2]=(...c)=>e.closeModal&&e.closeModal(...c))})]),footer:a(()=>[t("div",qt,[t("div",Pt,[t("div",Lt,[n(h,{onClick:e.closeModal},{default:a(()=>[u(" Cancel ")]),_:1},8,["onClick"]),n(h,{class:"is-link",onClick:_.submitBooking},{default:a(()=>[u(" Book ")]),_:1},8,["onClick"])])])])]),default:a(()=>[t("h5",Vt,l(o.product.name),1),n(f,{"is-fullwidth":""},{default:a(()=>[t("tr",null,[t("th",null,[n(b,{icon:s.bookingIcon.duration},null,8,["icon"])]),t("td",null,l(o.event.duration),1)]),t("tr",null,[t("th",null,[n(b,{icon:s.bookingIcon.timezone},null,8,["icon"])]),t("td",null,l(o.event.timezone),1)]),t("tr",null,[t("th",null,[n(b,{icon:s.bookingIcon.calendar},null,8,["icon"])]),t("td",null,[t("b",null,l(_.bookedAt),1)])])]),_:1})]),_:1},8,["onClose"])):k("",!0)])}const ho=K(J,[["render",Ot]]);export{ho as default};
