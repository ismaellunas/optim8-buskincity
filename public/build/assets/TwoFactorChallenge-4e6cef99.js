import{M as g}from"./HasLoader-a564cfe6.js";import{M as B}from"./HasPageErrors-da5616c1.js";import z from"./LayoutAdmin-41c47b18.js";import{B as V}from"./Button-03e0d3fd.js";import{B as x}from"./ErrorNotifications-090d6193.js";import{B as w}from"./Input-137492c5.js";import{B as C}from"./Icon-6def3c13.js";import{B as S}from"./Recaptcha-a5a7d1cc.js";import{q as E}from"./icon-class-4ab3933f.js";import{u as F,q as p,r as i,o as r,i as c,p as t,w as u,f as n,k as m,F as d}from"./vue-loading.min-a6a947f0.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import"./utils-caa7a80b.js";import"./Image-c2b8efed.js";import"./Field-a8082082.js";import"./Field-e1691255.js";import"./Input-4c73d710.js";import"./InputError-9b7084c8.js";const M={components:{LayoutAdmin:z,BizButton:V,BizErrorNotifications:x,BizFormInput:w,BizIcon:C,BizRecaptcha:S},mixins:[g,B],props:{recaptchaSiteKey:{type:[String,null],default:null}},data(){return{recovery:!1,form:this.$inertia.form({code:"",recovery_code:""}),iconBack:E}},methods:{toggleRecovery(){this.recovery^=!0,this.$nextTick(()=>{this.recovery?(this.$refs.recovery_code.$refs.input.focus(),this.form.code=""):(this.$refs.code.$refs.input.focus(),this.form.recovery_code="")})},onSubmit(){this.$refs.recaptcha.execute()},redirectBack(){window.history.back()},recaptchaVerify(s=null){this.form.transform(e=>({...e,"g-recaptcha-response":s})).post(this.route("admin.two-factor.login.attempt"),{onStart:()=>this.onStartLoadingOverlay(),onError:()=>this.$refs.recaptcha.onExpired(),onFinish:()=>this.onEndLoadingOverlay()})}}},q=c("span",null,"Back",-1),N={class:"mb-4"},O={class:"has-text-left"},R={key:0},T={key:1},U={class:"mt-4"};function I(s,e,_,P,o,l){const h=i("biz-icon"),b=i("biz-error-notifications"),f=i("biz-form-input"),v=i("biz-recaptcha"),y=i("biz-button"),k=i("layout-admin");return r(),F(k,{title:"Two Factor Authentication"},{back:p(()=>[c("a",{onClick:e[0]||(e[0]=u(a=>l.redirectBack(),["prevent"]))},[t(h,{icon:o.iconBack},null,8,["icon"]),q])]),default:p(()=>[c("p",N,[o.recovery?(r(),n(d,{key:1},[m(" Please confirm access to your account by entering one of your emergency recovery codes. ")],64)):(r(),n(d,{key:0},[m(" Please confirm access to your account by entering the authentication code provided by your authenticator application. ")],64))]),c("div",O,[t(b,{errors:s.$page.props.errors},null,8,["errors"]),c("form",{onSubmit:e[3]||(e[3]=u(a=>l.onSubmit(),["prevent"]))},[o.recovery?(r(),n("div",T,[t(f,{ref:"recovery_code",modelValue:o.form.recovery_code,"onUpdate:modelValue":e[2]||(e[2]=a=>o.form.recovery_code=a),label:"Recovery Code",required:"",type:"text",autocomplete:"one-time-code",message:s.error("recovery_code")},null,8,["modelValue","message"])])):(r(),n("div",R,[t(f,{ref:"code",modelValue:o.form.code,"onUpdate:modelValue":e[1]||(e[1]=a=>o.form.code=a),label:"Code",required:"",type:"text",inputmode:"numeric",autofocus:"",autocomplete:"one-time-code",message:s.error("code")},null,8,["modelValue","message"])])),t(v,{ref:"recaptcha","site-key":_.recaptchaSiteKey,onOnVerify:l.recaptchaVerify},null,8,["site-key","onOnVerify"]),c("div",U,[t(y,{type:"button",class:"button",disabled:o.form.processing,onClick:u(l.toggleRecovery,["prevent"])},{default:p(()=>[o.recovery?(r(),n(d,{key:1},[m(" Use an authentication code ")],64)):(r(),n(d,{key:0},[m(" Use a recovery code ")],64))]),_:1},8,["disabled","onClick"]),t(y,{class:"button is-info ml-4",disabled:o.form.processing},{default:p(()=>[m(" Log In ")]),_:1},8,["disabled"])])],32)])]),_:1})}const ie=L(M,[["render",I]]);export{ie as default};
