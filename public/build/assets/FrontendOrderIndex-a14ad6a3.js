import{B as Q,M as T}from"./TableColumnSort-d0deb03b.js";import{L as A}from"./User-145a30bc.js";import{B as N}from"./ButtonLink-71ebb617.js";import{B as R}from"./Checkbox-8d9a17c8.js";import{B as j,a as F}from"./Dropdown-5425ae3a.js";import{B as I}from"./DropdownSearch-bd4068c6.js";import{B as E}from"./DateRange-7ae8c660.js";import{B as L}from"./Search-cafe34ab.js";import{B as U}from"./Icon-150b61ef.js";import{B as W}from"./TableIndex-6b2a4ef8.js";import{B as M}from"./Tag-083af5c2.js";import{b as H,s as G}from"./icon-class-4ab3933f.js";import"./sweetalert2.all-ebd52f41.js";import{B as p,l as y,z as J,f as h,i as r,p as i,q as s,r as a,o as u,t as l,F as C,j as z,u as B,k as d}from"./vue-loading.min-aa20e13d.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import"./FilterDataHandle-94157290.js";import"./HasLoader-a564cfe6.js";import"./Link-2bcf0cab.js";import"./NavbarItem-7e983d41.js";import"./Button-b3acaac2.js";import"./utils-79a9c8b1.js";import"./Input-2fb71e37.js";import"./Datepicker-847140ac.js";import"./moment-fbc5633a.js";import"./ButtonIcon-05c24ca4.js";import"./Field-c2e062a9.js";import"./Pagination-8d9b0028.js";import"./Table-2efbef14.js";import"./TableInfo-c372d0e5.js";const X={components:{BizButtonLink:N,BizCheckbox:R,BizDropdown:j,BizDropdownItem:F,BizDropdownSearch:I,BizFilterDateRange:E,BizFilterSearch:L,BizIcon:U,BizTableColumnSort:Q,BizTableIndex:W,BizTag:M},mixins:[T],layout:A,props:{baseRouteName:{type:String,required:!0},pageQueryParams:{type:Object,default:()=>{}},orders:{type:Object,required:!0},cityOptions:{type:Object,required:!0},statusOptions:{type:Object,required:!0}},setup(e){var o,m,n,_;return{iconAngleDown:H,iconShow:G,dates:p(y.isArray((o=e.pageQueryParams)==null?void 0:o.dates)?(m=e.pageQueryParams)==null?void 0:m.dates.filter(Boolean):[]),filteredCities:p(e.cityOptions.slice(0,10)),queryParams:p({...e.pageQueryParams}),statuses:p(((n=e.pageQueryParams)==null?void 0:n.status)??[]),term:p(((_=e.pageQueryParams)==null?void 0:_.term)??null)}},methods:{onStatusChanged(){this.queryParams.status=this.statuses,this.refreshWithQueryParams()},onDateRangeChanged(){this.queryParams.dates=this.dates,this.refreshWithQueryParams()},onCityChange(e=null){this.queryParams.city=e,this.refreshWithQueryParams()},searchCity:y.debounce(function(e){!y.isEmpty(e)&&e.length>1?this.filteredCities=y.filter(this.cityOptions,function(o){return new RegExp(e,"i").test(o)}).slice(0,10):this.filteredCities=this.cityOptions.slice(0,10)},J)}},Y={class:"box"},Z={class:"columns is-multiline"},x={class:"column is-4-desktop"},$={class:"column is-2-desktop"},ee={class:"column is-4 is-3-widescreen"},te={class:"column is-narrow"},oe=r("th",null,"Timezone",-1),re=r("th",null,[r("div",{class:"level-right"}," Actions ")],-1),se={class:"level-right"};function ie(e,o,m,n,_,f){const v=a("biz-filter-search"),k=a("biz-icon"),w=a("biz-checkbox"),b=a("biz-dropdown-item"),P=a("biz-dropdown"),S=a("biz-filter-date-range"),q=a("biz-dropdown-search"),c=a("biz-table-column-sort"),D=a("biz-tag"),O=a("biz-button-link"),V=a("biz-table-index");return u(),h("div",Y,[r("div",Z,[r("div",x,[i(v,{modelValue:n.term,"onUpdate:modelValue":o[0]||(o[0]=t=>n.term=t),onSearch:e.search},null,8,["modelValue","onSearch"])]),r("div",$,[i(P,{class:"is-fullwidth","close-on-click":!1},{trigger:s(()=>[r("span",null,"Status ("+l(n.statuses.length)+")",1),i(k,{class:"is-small",icon:n.iconAngleDown},null,8,["icon"])]),default:s(()=>[(u(!0),h(C,null,z(m.statusOptions,t=>(u(),B(b,{key:t.id},{default:s(()=>[i(w,{checked:n.statuses,"onUpdate:checked":o[1]||(o[1]=g=>n.statuses=g),value:t.id,onChange:f.onStatusChanged},{default:s(()=>[d(" Â  "+l(t.value),1)]),_:2},1032,["checked","value","onChange"])]),_:2},1024))),128))]),_:1})]),r("div",ee,[i(S,{modelValue:n.dates,"onUpdate:modelValue":[o[2]||(o[2]=t=>n.dates=t),f.onDateRangeChanged],"max-range":"31"},null,8,["modelValue","onUpdate:modelValue"])]),r("div",te,[i(q,{class:"is-fullwidth","close-on-click":!0,onSearch:o[4]||(o[4]=t=>f.searchCity(t))},{trigger:s(()=>[r("span",null,l(n.queryParams.city??"Any"),1)]),default:s(()=>[i(b,{onClick:o[3]||(o[3]=t=>f.onCityChange())},{default:s(()=>[d(" Any ")]),_:1}),(u(!0),h(C,null,z(n.filteredCities,(t,g)=>(u(),B(b,{key:g,onClick:ne=>f.onCityChange(t)},{default:s(()=>[d(l(t),1)]),_:2},1032,["onClick"]))),128))]),_:1})])]),i(V,{records:m.orders,"query-params":n.queryParams},{thead:s(()=>[r("tr",null,[i(c,{order:e.order,"is-sorted":e.column=="status",onClick:o[5]||(o[5]=t=>e.orderColumn("status"))},{default:s(()=>[d(" Status ")]),_:1},8,["order","is-sorted"]),i(c,{order:e.order,"is-sorted":e.column=="name",onClick:o[6]||(o[6]=t=>e.orderColumn("name"))},{default:s(()=>[d(" Name ")]),_:1},8,["order","is-sorted"]),i(c,{order:e.order,"is-sorted":e.column=="city",onClick:o[7]||(o[7]=t=>e.orderColumn("city"))},{default:s(()=>[d(" City ")]),_:1},8,["order","is-sorted"]),i(c,{order:e.order,"is-sorted":e.column=="date",onClick:o[8]||(o[8]=t=>e.orderColumn("date"))},{default:s(()=>[d(" Date ")]),_:1},8,["order","is-sorted"]),oe,i(c,{order:e.order,"is-sorted":e.column=="time",onClick:o[9]||(o[9]=t=>e.orderColumn("time"))},{default:s(()=>[d(" Time ")]),_:1},8,["order","is-sorted"]),i(c,{order:e.order,"is-sorted":e.column=="checkin",onClick:o[10]||(o[10]=t=>e.orderColumn("checkin"))},{default:s(()=>[d(" Check-In ")]),_:1},8,["order","is-sorted"]),re])]),default:s(()=>[(u(!0),h(C,null,z(m.orders.data,t=>(u(),h("tr",{key:t.id},[r("td",null,[i(D,{class:"is-medium"},{default:s(()=>[d(l(t.status),1)]),_:2},1024)]),r("td",null,l(t.product_name),1),r("td",null,l(t.city),1),r("td",null,l(t.date),1),r("td",null,l(t.timezone),1),r("td",null,l(t.start_end_time),1),r("td",null,l(t.check_in_time),1),r("td",null,[r("div",se,[i(O,{class:"is-ghost has-text-black",href:e.route(m.baseRouteName+".show",t.id)},{default:s(()=>[i(k,{class:"is-small",icon:n.iconShow},null,8,["icon"])]),_:2},1032,["href"])])])]))),128))]),_:1},8,["records","query-params"])])}const Re=K(X,[["render",ie]]);export{Re as default};
