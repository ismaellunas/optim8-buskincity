import{M as U}from"./FilterDataHandle-94157290.js";import{M as A}from"./HasTab-77ca33c2.js";import{A as H}from"./AppLayout-40f8bbe7.js";import{B as S}from"./ButtonLink-abb08373.js";import{B as W}from"./ButtonsDisplayView-20deee35.js";import{B as $}from"./Checkbox-8f917da5.js";import{B as K,a as J}from"./Dropdown-034da47d.js";import{B as X}from"./DropdownScroll-6b0f6840.js";import{B as Y}from"./Search-4389f740.js";import{B as Z}from"./Icon-6def3c13.js";import{B as ee}from"./Pagination-c4350b04.js";import{o as i,f as _,F as C,j as P,n as p,x,l as z,r as n,i as e,u as m,t as h,p as c,q as r,k as B,s as w,B as k,I as te,K as q,w as se}from"./vue-loading.min-a6a947f0.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import{B as V}from"./ButtonIcon-b1d1d2b0.js";import{B as D}from"./Image-c2b8efed.js";import{B as I}from"./Tag-8100534e.js";import{i as E}from"./icon-class-4ab3933f.js";import{B as ie}from"./Table-6b0ddb68.js";import{B as oe,a as ne}from"./TabList-7a2ba8b0.js";import{B as ae}from"./TableInfo-6db2c6af.js";import{c as re}from"./alert-fe3154bb.js";import"./HasLoader-a564cfe6.js";import"./Breadcrumbs-f0ae94d4.js";import"./Link-359d994c.js";import"./utils-caa7a80b.js";import"./NavbarItem-766600c9.js";import"./Button-03e0d3fd.js";import"./Field-e1691255.js";import"./Input-4c73d710.js";import"./sweetalert2.all-7b2d1616.js";const le={name:"PostGallery",props:{records:{},class:{type:[Array,String,Object],default:()=>["column","is-3"]}}},ce={class:"columns is-multiline m-0"};function de(s,o,t,a,d,u){return i(),_("div",ce,[(i(!0),_(C,null,P(t.records,b=>(i(),_("div",{key:b.id,class:p(t.class)},[x(s.$slots,"default",{record:b})],2))),128))])}const ue=L(le,[["render",de]]),N={props:{record:Object},computed:{hasCover(){return!z.isEmpty(this.record.thumbnail_url)},hasCategory(){var s;return(s=this.record)!=null&&s.categories?this.record.categories.length>0:!1}}},me={name:"PostGalleryItem",components:{BizButtonIcon:V,BizButtonLink:S,BizImage:D,BizTag:I},mixins:[N],props:{editLink:{type:String,default:null},isDeleteEnabled:{type:Boolean,default:!0},isEditEnabled:{type:Boolean,default:!0},previewLink:{type:String,default:null},record:{type:Object,required:!0}},emits:["on-delete-clicked"],data(){return{actionClass:"card-footer-item p-2 is-borderless is-shadowless is-inverted",icon:E}}},_e={class:"card card-equal-height"},he={class:"card-image has-text-centered"},be={key:1,class:"icon is-large"},ge=e("span",{class:"fa-stack fa-lg"},[e("i",{class:p(["fas fa-image","fa-5x"])})],-1),fe=[ge],pe={class:"card-content p-2"},ye={class:"media"},ve={class:"media-content"},ke={class:"subtitle is-6"},ze={class:"title is-4"},Be=["href"],we={class:"content",style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},Ce={class:"card-footer"},Pe={class:"icon is-small"};function Le(s,o,t,a,d,u){const b=n("biz-image"),g=n("biz-tag"),f=n("biz-button-link"),v=n("biz-button-icon");return i(),_("div",_e,[e("div",he,[s.hasCover?(i(),m(b,{key:0,src:t.record.thumbnail_url},null,8,["src"])):(i(),_("span",be,fe))]),e("div",pe,[e("div",ye,[e("div",ve,[e("p",ke,[e("span",{class:p({"mr-2":s.hasCategory})},h(t.record.category_names),3),c(g,{class:"is-info"},{default:r(()=>[B(h(t.record.locale.toUpperCase()),1)]),_:1})]),e("p",ze,[e("a",{href:t.previewLink,target:"_blank"},[e("strong",null,h(t.record.title),1)],8,Be)])])]),e("div",we,[e("p",null,h(t.record.excerpt),1)])]),e("footer",Ce,[t.isEditEnabled?(i(),m(f,{key:0,title:"Edit",type:"button",class:p([d.actionClass,"is-ghost","has-text-black"]),href:t.editLink},{default:r(()=>[e("span",Pe,[e("i",{class:p(d.icon.edit)},null,2)])]),_:1},8,["class","href"])):w("",!0),t.isDeleteEnabled?(i(),m(v,{key:1,icon:d.icon.remove,title:"Delete",type:"button",class:p([d.actionClass,"is-ghost","has-text-black","ml-1"]),onClick:o[0]||(o[0]=O=>s.$emit("on-delete-clicked",t.record))},null,8,["icon","class"])):w("",!0),x(s.$slots,"actions",{record:t.record})])])}const Oe=L(me,[["render",Le]]),xe={name:"PostList",components:{BizTable:ie},props:["records"]};function Se(s,o,t,a,d,u){const b=n("biz-table");return i(),m(b,{class:"is-striped is-hoverable is-fullwidth"},{default:r(()=>[e("tbody",null,[(i(!0),_(C,null,P(t.records,g=>x(s.$slots,"default",{key:g.id,record:g})),128))])]),_:3})}const Ee=L(xe,[["render",Se]]),qe={name:"PostListItem",components:{BizButtonIcon:V,BizButtonLink:S,BizImage:D,BizTag:I},mixins:[N],props:{editLink:{type:String,default:null},isDeleteEnabled:{type:Boolean,default:!0},isEditEnabled:{type:Boolean,default:!0},previewLink:{type:String,default:null},record:{type:Object,required:!0}},emits:["on-delete-clicked"],data(){return{icon:E}}},Ve={class:"media"},De={key:1,class:"media-left",style:{width:"64px"}},Ie={class:"media-content"},Ne={class:"content"},Te=e("br",null,null,-1),je=["href"],Qe=e("br",null,null,-1),Ge={class:"media-right"},Fe={class:"icon is-small"};function Re(s,o,t,a,d,u){const b=n("biz-image"),g=n("biz-tag"),f=n("biz-button-link"),v=n("biz-button-icon");return i(),_("tr",null,[e("td",null,[e("article",Ve,[t.record.thumbnail_url?(i(),m(b,{key:0,class:"media-left",ratio:"is-64x64",src:t.record.thumbnail_url},null,8,["src"])):(i(),_("div",De)),e("div",Ie,[e("div",Ne,[e("p",null,[e("span",{class:p({"mr-2":s.hasCategory})},h(t.record.category_names),3),c(g,{class:"is-info"},{default:r(()=>[B(h(t.record.locale.toUpperCase()),1)]),_:1}),Te,e("a",{href:t.previewLink,target:"_blank"},[e("strong",null,h(t.record.title),1)],8,je),Qe,e("span",null,h(t.record.excerpt),1)])])]),e("div",Ge,[t.isEditEnabled?(i(),m(f,{key:0,class:"is-ghost has-text-black",title:"Edit",type:"button",href:t.editLink},{default:r(()=>[e("span",Fe,[e("i",{class:p(d.icon.edit)},null,2)])]),_:1},8,["href"])):w("",!0),t.isDeleteEnabled?(i(),m(v,{key:1,class:"is-ghost has-text-black ml-1",icon:d.icon.remove,type:"button",onClick:o[0]||(o[0]=O=>s.$emit("on-delete-clicked",t.record))},null,8,["icon"])):w("",!0),x(s.$slots,"actions",{record:t.record})])])])])}const Me=L(qe,[["render",Re]]),Ue={name:"PageIndex",components:{BizButtonLink:S,BizButtonsDisplayView:W,BizCheckbox:$,BizDropdown:K,BizDropdownItem:J,BizDropdownScroll:X,BizFilterSearch:Y,BizIcon:Z,BizPagination:ee,BizPostGallery:ue,BizPostGalleryItem:Oe,BizPostList:Ee,BizPostListItem:Me,BizTab:oe,BizTabList:ne,BizTableInfo:ae},mixins:[U,A],layout:H,props:{can:{type:Object,required:!0},categoryOptions:{type:Object,default:()=>{}},languageOptions:{type:Object,default:()=>{}},pageNumber:{type:String,default:null},pageQueryParams:{type:Object,default:()=>{}},records:{type:Object,required:!0},title:{type:String,required:!0}},setup(s){var t,a,d,u;const o=z.merge({view:"gallery"},s.pageQueryParams);return{categories:k(((t=s.pageQueryParams)==null?void 0:t.categories)??[]),icon:E,languages:k(((a=s.pageQueryParams)==null?void 0:a.languages)??[]),localeOptions:k(te().props.value.languageOptions??[]),queryParams:k(o),term:k(((d=s.pageQueryParams)==null?void 0:d.term)??null),view:k(((u=s.pageQueryParams)==null?void 0:u.view)??"gallery"),tabs:{published:{title:"Published"},scheduled:{title:"Scheduled"},draft:{title:"Draft"}}}},data(){var s;return{activeTab:((s=this.queryParams)==null?void 0:s.status)??z.head(z.keys(this.tabs)),baseRouteName:"admin.posts",loader:null}},computed:{isGalleryView(){return this.view==="gallery"},filterCounter(){return this.categories.length+this.languages.length}},methods:{deleteRecord(s){const o=this;re().then(t=>{t.isConfirmed&&o.$inertia.delete(route(o.baseRouteName+".destroy",s.id),{},{onStart:()=>this.onStartLoadingOverlay(),onFinish:()=>this.onEndLoadingOverlay()})})},onTabSelected(s){this.queryParams.status=s,this.$inertia.get(route(this.baseRouteName+".index",this.queryParams),{},{only:["records","pageQueryParams"],onStart:()=>this.onStartLoadingOverlay(),onFinish:()=>this.onEndLoadingOverlay()})},onViewChanged(s){this.queryParams.view=s;const o=z.clone(this.queryParams);this.$inertia.get(route(this.baseRouteName+".index",z.merge(o,{page:this.pageNumber})),{},{replace:!0,preserveState:!0,onStart:()=>this.onStartLoadingOverlay(),onFinish:()=>this.onEndLoadingOverlay()})},onLanguagesChanged(){this.queryParams.languages=this.languages,this.refreshWithQueryParams()},onCategoriesChanged(){this.queryParams.categories=this.categories,this.refreshWithQueryParams()}}},Ae={class:"box"},He={class:"columns"},We={class:"column"},$e={class:"column"},Ke=e("span",null,"Filter",-1),Je={key:0,class:"ml-1"},Xe=e("hr",{class:"dropdown-divider"},null,-1),Ye={class:"column has-text-right"},Ze=e("span",null,"Create New",-1),et=e("div",{class:"is-clearfix"},null,-1),tt={class:"table-container"},st=["onClick"],it={class:"columns"},ot={class:"column is-4 is-offset-8"};function nt(s,o,t,a,d,u){const b=n("biz-filter-search"),g=n("biz-icon"),f=n("biz-dropdown-item"),v=n("biz-checkbox"),O=n("biz-dropdown-scroll"),T=n("biz-dropdown"),j=n("biz-button-link"),Q=n("biz-tab-list"),G=n("biz-tab"),F=n("biz-buttons-display-view"),R=n("biz-table-info"),M=n("biz-pagination");return i(),_("div",null,[e("div",Ae,[e("div",He,[e("div",We,[c(b,{modelValue:a.term,"onUpdate:modelValue":o[0]||(o[0]=l=>a.term=l),onSearch:s.search},null,8,["modelValue","onSearch"])]),e("div",$e,[c(T,{"close-on-click":!1},{trigger:r(()=>[Ke,u.filterCounter?(i(),_("span",Je," ("+h(u.filterCounter)+") ",1)):w("",!0),c(g,{icon:a.icon.angleDown},null,8,["icon"])]),default:r(()=>[c(f,null,{default:r(()=>[B(" Categories ")]),_:1}),c(O,{"max-height":300},{default:r(()=>[(i(!0),_(C,null,P(t.categoryOptions,l=>(i(),m(f,{key:l.id},{default:r(()=>[c(v,{checked:a.categories,"onUpdate:checked":o[1]||(o[1]=y=>a.categories=y),value:l.id,onChange:u.onCategoriesChanged},{default:r(()=>[B("   "+h(l.value),1)]),_:2},1032,["checked","value","onChange"])]),_:2},1024))),128))]),_:1}),Xe,c(f,null,{default:r(()=>[B(" Languages ")]),_:1}),c(O,{"max-height":300},{default:r(()=>[(i(!0),_(C,null,P(t.languageOptions,l=>(i(),m(f,{key:l.id},{default:r(()=>[c(v,{checked:a.languages,"onUpdate:checked":o[2]||(o[2]=y=>a.languages=y),value:l.id,onChange:u.onLanguagesChanged},{default:r(()=>[B("   "+h(l.name),1)]),_:2},1032,["checked","value","onChange"])]),_:2},1024))),128))]),_:1})]),_:1})]),e("div",Ye,[t.can.add?(i(),m(j,{key:0,class:"is-primary",href:s.route(d.baseRouteName+".create")},{default:r(()=>[c(g,{icon:a.icon.add},null,8,["icon"]),Ze]),_:1},8,["href"])):w("",!0)])]),et,e("div",tt,[c(G,{class:"is-boxed"},{default:r(()=>[e("ul",null,[(i(!0),_(C,null,P(a.tabs,(l,y)=>(i(),m(Q,{key:y,"is-active":s.isTabActive(y)},{default:r(()=>[e("a",{onClick:se(at=>s.setActiveTab(y),["prevent"])},h(l.title),9,st)]),_:2},1032,["is-active"]))),128))])]),_:1}),e("div",it,[e("div",ot,[c(F,{modelValue:a.view,"onUpdate:modelValue":o[3]||(o[3]=l=>a.view=l),"wrapper-tag":"div",class:"is-right",onOnViewChanged:u.onViewChanged},null,8,["modelValue","onOnViewChanged"])])]),c(R,{class:"mb-2",records:t.records},null,8,["records"]),(i(),m(q(u.isGalleryView?"BizPostGallery":"BizPostList"),{records:t.records.data},{default:r(({record:l})=>[(i(),m(q(u.isGalleryView?"BizPostGalleryItem":"BizPostListItem"),{"is-delete-enabled":t.can.delete,"is-edit-enabled":t.can.edit,record:l,"edit-link":s.route(d.baseRouteName+".edit",l.id),"preview-link":s.route("blog.show",l.slug),onOnDeleteClicked:u.deleteRecord},null,40,["is-delete-enabled","is-edit-enabled","record","edit-link","preview-link","onOnDeleteClicked"]))]),_:1},8,["records"]))]),c(M,{links:t.records.links,"query-params":a.queryParams},null,8,["links","query-params"])])])}const Tt=L(Ue,[["render",nt]]);export{Tt as default};
