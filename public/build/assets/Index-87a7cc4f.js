import{M as v}from"./FilterDataHandle-94157290.js";import{M as S}from"./HasLoader-a564cfe6.js";import{B as z}from"./Button-b3acaac2.js";import{B as k}from"./ButtonLink-71ebb617.js";import{B as x}from"./Search-cafe34ab.js";import{B as y}from"./TableIndex-6b2a4ef8.js";import{B as C}from"./Tag-083af5c2.js";import{i as R}from"./icon-class-4ab3933f.js";import{c as q,o as P,s as V}from"./alert-e0e75cb7.js";import{I as h,f as d,i as t,p as a,q as n,r as l,o as _,n as u,F as D,j as L,t as f,k as j}from"./vue-loading.min-aa20e13d.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";import"./Link-2bcf0cab.js";import"./ButtonIcon-05c24ca4.js";import"./Icon-150b61ef.js";import"./Field-c2e062a9.js";import"./Input-2fb71e37.js";import"./utils-79a9c8b1.js";import"./Pagination-8d9b0028.js";import"./Table-2efbef14.js";import"./TableInfo-c372d0e5.js";import"./sweetalert2.all-ebd52f41.js";const M={name:"SettingNotificationIndex",components:{BizButton:z,BizButtonLink:k,BizFilterSearch:x,BizTableIndex:y,BizTag:C},mixins:[v,S],setup(){return{baseRouteNameSetting:h().props.value.baseRouteNameSetting,formBuilder:h().props.value.formBuilder}},data(){return{icon:R,term:null,queryParams:{},records:{}}},computed:{baseRouteName(){return this.baseRouteNameSetting+".notifications"}},mounted(){this.getSettingNotifications()},methods:{getSettingNotifications(i=null){const e=this;i=i??route(e.baseRouteName+".records",e.formBuilder.id),e.onStartLoadingOverlay(),axios.get(i,{params:e.queryParams}).then(c=>{e.records=c.data}).then(()=>{e.onEndLoadingOverlay()})},search(){this.queryParams.term=this.term,this.getSettingNotifications()},onDelete(i){const e=this;q().then(c=>{c.isConfirmed&&e.$inertia.delete(route(this.baseRouteName+".destroy",{form_builder:e.formBuilder.id,notification:i.id}),{onError:()=>{P()},onSuccess:m=>{V(m.props.flash.message),e.getSettingNotifications()}})})}}},O={class:"columns"},E={class:"column"},I={class:"is-pulled-left"},T={class:"column"},w={class:"is-pulled-right"},A={class:"icon is-small"},H=t("span",null,"Add New",-1),U=t("tr",null,[t("th",null,"Name"),t("th",null,"Subject"),t("th",null,"Status"),t("th",null,[t("div",{class:"level-right"}," Actions ")])],-1),G={class:"level-right"},J={class:"icon is-small"},K={class:"icon is-small"};function Q(i,e,c,m,o,r){const b=l("biz-filter-search"),p=l("biz-button-link"),g=l("biz-tag"),B=l("biz-button"),N=l("biz-table-index");return _(),d("div",null,[t("div",O,[t("div",E,[t("div",I,[a(b,{modelValue:o.term,"onUpdate:modelValue":e[0]||(e[0]=s=>o.term=s),onSearch:r.search},null,8,["modelValue","onSearch"])])]),t("div",T,[t("div",w,[a(p,{href:i.route(r.baseRouteName+".create",m.formBuilder.id),class:"is-primary"},{default:n(()=>[t("span",A,[t("i",{class:u(o.icon.add)},null,2)]),H]),_:1},8,["href"])])])]),a(N,{"is-ajax":!0,records:o.records,"query-params":o.queryParams,onOnClickedPagination:r.getSettingNotifications},{thead:n(()=>[U]),default:n(()=>[(_(!0),d(D,null,L(o.records.data,s=>(_(),d("tr",{key:s.id},[t("td",null,f(s.name),1),t("td",null,f(s.subject),1),t("td",null,[a(g,{class:u({"is-success":s.is_active,"is-dark":!s.is_active})},{default:n(()=>[j(f(s.status),1)]),_:2},1032,["class"])]),t("td",null,[t("div",G,[a(p,{href:i.route(r.baseRouteName+".edit",{form_builder:m.formBuilder.id,notification:s.id}),class:"is-ghost has-text-black"},{default:n(()=>[t("span",J,[t("i",{class:u(o.icon.edit)},null,2)])]),_:2},1032,["href"]),a(B,{type:"button",class:"is-ghost has-text-black ml-1",onClick:W=>r.onDelete(s)},{default:n(()=>[t("span",K,[t("i",{class:u(o.icon.remove)},null,2)])]),_:2},1032,["onClick"])])])]))),128))]),_:1},8,["records","query-params","onOnClickedPagination"])])}const bt=F(M,[["render",Q]]);export{bt as default};
