import{M as $}from"./HasLoader-a564cfe6.js";import{M as j}from"./HasModal-fa56130c.js";import{M as ee}from"./HasPageErrors-da5616c1.js";import{B as T}from"./Button-03e0d3fd.js";import{B as ie}from"./ButtonsDisplayView-20deee35.js";import{B as te}from"./Checkbox-8f917da5.js";import{B as se,a as le}from"./Dropdown-034da47d.js";import{B as oe}from"./Search-4389f740.js";import{a as ae}from"./Field-a8082082.js";import{B as N}from"./Image-c2b8efed.js";import{B as ne}from"./InputFile-216a7277.js";import{M as re,B as de}from"./Gallery-86a7e0a4.js";import{B as ce}from"./Table-6b0ddb68.js";import{B as ue}from"./ButtonDownload-7545f1b2.js";import{B as q}from"./ButtonIcon-b1d1d2b0.js";import{r as c,o as d,f,i as s,u as y,n as h,t as z,s as k,x as M,p as a,q as n,F as E,j as H,m as me,y as pe,l as W,k as m,aj as fe,B as I,ah as be,H as A,K as _e}from"./vue-loading.min-a6a947f0.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import{B as Y}from"./Modal-655bec1f.js";import{B as G}from"./ModalCard-06597c5e.js";import{B as he}from"./FieldHorizontal-bfc51f07.js";import{B as ge}from"./Input-4c73d710.js";import{u as O,e as D}from"./utils-caa7a80b.js";import{_ as ye}from"./cropper-72988d76.js";import{B as ve}from"./Pagination-c4350b04.js";import{B as ke}from"./TableInfo-6db2c6af.js";import{i as Ce}from"./icon-class-4ab3933f.js";import ze from"./Form-7bfdff43.js";import{o as x,b as V,c as we,s as U}from"./alert-fe3154bb.js";const Ee={name:"MediaListItem",components:{BizButtonDownload:ue,BizButtonIcon:q,BizImage:N},mixins:[re],props:{isDeleteEnabled:{type:Boolean,default:!0},isDownloadEnabled:{type:Boolean,default:!0},isEditEnabled:{type:Boolean,default:!0},isPreviewEnabled:{type:Boolean,default:!0},medium:Object},emits:["on-delete-clicked","on-edit-clicked","on-preview-clicked"],data(){return{actionClass:"is-borderless is-shadowless is-inverted"}},computed:{type(){return this.isImage?"Image":"File"}}},Me={key:1,class:"icon is-large has-text-centered"},Be={class:"fa-stack fa-lg"},Se={class:"level-right"};function Ie(e,i,t,r,o,l){const u=c("biz-image"),g=c("biz-button-icon"),v=c("biz-button-download");return d(),f("tr",null,[s("td",null,[t.medium.is_image?(d(),y(u,{key:0,square:"is-48x48",src:t.medium.thumbnail_url},null,8,["src"])):(d(),f("span",Me,[s("span",Be,[s("i",{class:h(["fas",e.thumbnailIcon,"fa-2x"])},null,2)])]))]),s("td",null,[s("b",null,z(t.medium.file_name),1)]),s("td",null,z(t.medium.date_modified),1),s("td",null,z(l.type),1),s("td",null,z(t.medium.readable_size),1),s("td",null,[s("div",Se,[e.isImage?(d(),y(g,{key:0,class:h([o.actionClass,"is-info"]),icon:"fas fa-expand",title:"Preview",type:"button",onClick:i[0]||(i[0]=b=>e.$emit("on-preview-clicked",t.medium))},null,8,["class"])):k("",!0),t.isEditEnabled?(d(),y(g,{key:1,class:h([o.actionClass,"is-primary"]),icon:"fas fa-pen",title:"Edit",type:"button",onClick:i[1]||(i[1]=b=>e.$emit("on-edit-clicked",t.medium))},null,8,["class"])):k("",!0),t.isDeleteEnabled?(d(),y(g,{key:2,class:h([o.actionClass,"is-danger"]),icon:"far fa-trash-alt",title:"Delete",type:"button",onClick:i[2]||(i[2]=b=>e.$emit("on-delete-clicked",t.medium))},null,8,["class"])):k("",!0),t.isDownloadEnabled?(d(),y(v,{key:3,class:h([o.actionClass,"is-link"]),title:"Download",type:"button",url:t.medium.file_url},null,8,["class","url"])):k("",!0),M(e.$slots,"itemActions",{mediumItem:t.medium})])])])}const De=B(Ee,[["render",Ie]]),Re={name:"MediaList",components:{BizTable:ce,BizMediaListItem:De,BizModal:Y},mixins:[j],props:{isDeleteEnabled:{type:Boolean,default:!0},isDownloadEnabled:{type:Boolean,default:!0},isEditEnabled:{type:Boolean,default:!0},isPreviewEnabled:{type:Boolean,default:!0},isSelectEnabled:{type:Boolean,default:!1},media:{type:Array,default:()=>[]}},emits:["on-delete-clicked","on-edit-clicked"],data(){return{previewImageSrc:null}},methods:{onPreviewClicked(e){this.previewImageSrc=e.file_url,this.openModal()}}},Pe={class:"table-container"},Fe=s("thead",null,[s("tr",null,[s("th"),s("th",null,"File Name"),s("th",null,"Date Modified"),s("th",null,"Type"),s("th",null,"Size"),s("th",null,[s("div",{class:"level-right"}," Actions ")])])],-1),Ae={class:"image"},Oe=["src"];function xe(e,i,t,r,o,l){const u=c("biz-media-list-item"),g=c("biz-table"),v=c("biz-modal");return d(),f("div",Pe,[a(g,{class:"is-striped is-hoverable is-fullwidth"},{default:n(()=>[Fe,s("tbody",null,[(d(!0),f(E,null,H(t.media,b=>(d(),y(u,{key:b.id,medium:b,"is-delete-enabled":t.isDeleteEnabled,"is-download-enabled":t.isDownloadEnabled,"is-edit-enabled":t.isEditEnabled,"is-preview-enabled":t.isPreviewEnabled,"is-select-enabled":t.isSelectEnabled,onOnDeleteClicked:i[0]||(i[0]=C=>e.$emit("on-delete-clicked",C)),onOnEditClicked:i[1]||(i[1]=C=>e.$emit("on-edit-clicked",C)),onOnPreviewClicked:l.onPreviewClicked},{itemActions:n(({mediumItem:C})=>[M(e.$slots,"itemActions",{mediumItem:C})]),_:2},1032,["medium","is-delete-enabled","is-download-enabled","is-edit-enabled","is-preview-enabled","is-select-enabled","onOnPreviewClicked"]))),128))])]),_:3}),me(a(v,{onClose:i[2]||(i[2]=b=>e.closeModal())},{default:n(()=>[s("p",Ae,[s("img",{src:o.previewImageSrc,alt:"preview-image"},null,8,Oe)])]),_:1},512),[[pe,e.isModalOpen]])])}const Ve=B(Re,[["render",xe]]),Ue={components:{BizButton:T,BizButtonIcon:q,BizFormFieldHorizontal:he,BizInput:ge,BizModalCard:G,VueCropper:ye},props:{cropper:{},fileName:String,isDebugMode:{type:Boolean,default:!1},isProcessing:{Boolean,default:!1},modelValue:{},updateImage:{}},emits:["close","update:cropper","update:modelValue"],setup(e,{emit:i}){return{previewFileSrc:O(e,i),cropper:O(e,i,"cropper")}},data(){return{aspectRatio:null,imageData:null,resize:{width:null,height:null},state:null,stateOptions:{crop:"crop",resize:"resize",none:null}}},computed:{isCropState(){return this.state===this.stateOptions.crop},isResizeState(){return this.state===this.stateOptions.resize}},mounted(){this.cropper=this.$refs.cropper},methods:{enableCropState(){this.state=this.stateOptions.crop,this.cropper.initCrop().setDragMode("crop")},enableResizeState(){this.state=this.stateOptions.resize},disableState(){this.cropper.reset().clear().setDragMode("move"),this.state=null},cropAndReplace(){const e=this;D(this.cropper.getCroppedCanvas()).then(i=>{const t=URL.createObjectURL(i);e.previewFileSrc=t,e.cropper.replace(t,!1)}),this.disableState()},resizeAndReplace(){const e=this;let i={};for(const t in e.resize)W.isEmpty(e.resize[t])||(i[t]=e.resize[t]);this.cropper.initCrop(),D(this.cropper.getCroppedCanvas(i)).then(t=>{const r=URL.createObjectURL(t);e.previewFileSrc=r,e.cropper.replace(r,!1),e.resize.width=null,e.resize.height=null,e.disableState()})},rotateRight(){this.cropper.rotate(90)},rotateLeft(){this.cropper.rotate(-90)},flipY(e){const i=e.currentTarget;let t=i.getAttribute("data-scale");t=t?-t:-1,this.cropper.scaleY(t),i.setAttribute("data-scale",t)},flipX(e){const i=e.currentTarget;let t=i.getAttribute("data-scale");t=t?-t:-1,this.cropper.scaleX(t),i.setAttribute("data-scale",t)},reset(){this.cropper.reset().setAspectRatio(null),this.aspectRatio=null},setAspectRatio(e){this.cropper.setAspectRatio(e),this.aspectRatio=e},updateImageData(){this.isDebugMode&&(this.imageData=this.cropper.getData(!0))}}},Le={class:"modal-card-title mb-1"},je={class:"column"},Te={class:"column"},Ne={class:"buttons has-addons is-centered"},qe={class:"column"},He={class:"is-pulled-right"},We=s("div",{class:"is-clearfix"},null,-1),Ye=s("div",{class:"column"},null,-1),Ge={class:"column is-6"},Xe={class:"columns"},Ke={class:"column"},Je={class:"control"},Qe={class:"column"},Ze={class:"control"},$e={class:"column"},ei={class:"is-pulled-right"},ii=s("div",{class:"is-clearfix"},null,-1),ti=s("div",{class:"column"},null,-1),si={class:"column has-text-centered"},li={class:"columns"},oi={class:"column py-0"},ai={class:"column"},ni={class:"is-pulled-right"},ri=s("div",{class:"is-clearfix"},null,-1),di={id:"image-editor-container"};function ci(e,i,t,r,o,l){const u=c("biz-button"),g=c("biz-input"),v=c("biz-form-field-horizontal"),b=c("biz-button-icon"),C=c("vue-cropper"),S=c("biz-modal-card");return d(),y(S,{"content-class":["is-huge"],"is-close-hidden":!0},{header:n(()=>[s("p",Le," Image Editor : "+z(t.fileName??""),1),a(u,{"aria-label":"close",class:"delete is-primary",type:"button",disabled:t.isProcessing,onClick:i[0]||(i[0]=_=>e.$emit("close"))},null,8,["disabled"])]),footer:n(()=>[l.isCropState?(d(),f(E,{key:0},[s("div",je,[a(u,{type:"button",onClick:l.reset},{default:n(()=>[m(" Reset ")]),_:1},8,["onClick"])]),s("div",Te,[s("div",Ne,[a(u,{type:"button",class:h({"is-primary":o.aspectRatio==null}),disabled:t.isProcessing,onClick:i[1]||(i[1]=_=>l.setAspectRatio(null))},{default:n(()=>[m(" Free ")]),_:1},8,["class","disabled"]),a(u,{type:"button",class:h({"is-primary":o.aspectRatio==16/9}),disabled:t.isProcessing,onClick:i[2]||(i[2]=_=>l.setAspectRatio(16/9))},{default:n(()=>[m(" 16:9 ")]),_:1},8,["class","disabled"]),a(u,{type:"button",class:h({"is-primary":o.aspectRatio==4/3}),disabled:t.isProcessing,onClick:i[3]||(i[3]=_=>l.setAspectRatio(4/3))},{default:n(()=>[m(" 4:3 ")]),_:1},8,["class","disabled"]),a(u,{type:"button",class:h({"is-primary":o.aspectRatio==1}),disabled:t.isProcessing,onClick:i[4]||(i[4]=_=>l.setAspectRatio(1))},{default:n(()=>[m(" 1:1 ")]),_:1},8,["class","disabled"])])]),s("div",qe,[s("div",He,[a(u,{type:"button",onClick:l.disableState},{default:n(()=>[m(" Cancel ")]),_:1},8,["onClick"]),a(u,{class:"is-primary",type:"button",onClick:l.cropAndReplace},{default:n(()=>[m(" Done ")]),_:1},8,["onClick"])]),We])],64)):l.isResizeState?(d(),f(E,{key:1},[Ye,s("div",Ge,[s("div",Xe,[s("div",Ke,[a(v,null,{label:n(()=>[m(" Width ")]),default:n(()=>[s("div",Je,[a(g,{modelValue:o.resize.width,"onUpdate:modelValue":i[5]||(i[5]=_=>o.resize.width=_),disabled:t.isProcessing},null,8,["modelValue","disabled"])])]),_:1})]),s("div",Qe,[a(v,null,{label:n(()=>[m(" Height ")]),default:n(()=>[s("div",Ze,[a(g,{modelValue:o.resize.height,"onUpdate:modelValue":i[6]||(i[6]=_=>o.resize.height=_),disabled:t.isProcessing},null,8,["modelValue","disabled"])])]),_:1})])])]),s("div",$e,[s("div",ei,[a(u,{type:"button",onClick:l.disableState},{default:n(()=>[m(" Cancel ")]),_:1},8,["onClick"]),a(u,{class:"is-primary",type:"button",onClick:l.resizeAndReplace},{default:n(()=>[m(" Resize ")]),_:1},8,["onClick"])]),ii])],64)):(d(),f(E,{key:2},[ti,s("div",si,[s("div",li,[s("div",oi,[a(b,{"icon-class":"is-small",icon:"fas fa-crop-alt",title:"Crop",type:"button",disabled:t.isProcessing,onClick:l.enableCropState},null,8,["disabled","onClick"]),a(b,{icon:"fas fa-undo-alt","icon-class":"is-small",title:"Rotate Counterclockwise",type:"button",disabled:t.isProcessing,onClick:l.rotateLeft},null,8,["disabled","onClick"]),a(b,{icon:"fas fa-redo-alt","icon-class":"is-small",title:"Rotate Clockwise",type:"button",disabled:t.isProcessing,onClick:l.rotateRight},null,8,["disabled","onClick"]),a(b,{icon:"fas fa-arrows-alt-h","icon-class":"is-small",title:"Flip Horizontal",type:"button",disabled:t.isProcessing,onClick:i[7]||(i[7]=_=>l.flipX(_))},null,8,["disabled"]),a(b,{icon:"fas fa-arrows-alt-v","icon-class":"is-small",title:"Flip Vertical",type:"button",disabled:t.isProcessing,onClick:i[8]||(i[8]=_=>l.flipY(_))},null,8,["disabled"]),a(b,{icon:"fas fa-expand","icon-class":"is-small",title:"Resize",type:"button",disabled:t.isProcessing,onClick:l.enableResizeState},null,8,["disabled","onClick"])])])]),s("div",ai,[s("div",ni,[M(e.$slots,"actions",{cropper:r.cropper})]),ri])],64))]),default:n(()=>[s("div",di,[a(C,{ref:"cropper",alt:"Source Image","drag-mode":"move","auto-crop-area":1,"auto-crop":!1,"check-cross-origin":!0,src:r.previewFileSrc,"min-container-height":400,onCrop:l.updateImageData},null,8,["src","onCrop"])])]),_:3})}const ui=B(Ue,[["render",ci]]);function L(){return{file:null,file_url:null,file_name:null}}const mi={name:"MediaLibrary",components:{MediaForm:ze,BizButton:T,BizButtonsDisplayView:ie,BizCheckbox:te,BizDropdown:se,BizDropdownItem:le,BizFilterSearch:oe,BizFormField:ae,BizImage:N,BizInputFile:ne,BizMediaGallery:de,BizMediaList:Ve,BizModal:Y,BizModalCard:G,BizModalImageEditor:ui,BizPagination:ve,BizTableInfo:ke},mixins:[$,j,ee],props:{acceptedTypes:{type:Array,default:fe},baseRouteName:{type:String,default:"admin.media"},isAjax:{type:Boolean,default:!1},isDeleteEnabled:{type:Boolean,default:!0},isDownloadEnabled:{type:Boolean,default:!0},isEditEnabled:{type:Boolean,default:!0},isSelectEnabled:{type:Boolean,default:!1},isFilterEnabled:{type:Boolean,default:!1},isPaginationDisplayed:{type:Boolean,default:!0},isUploadEnabled:{type:Boolean,default:!0},queryParams:{type:Object,default:()=>{}},records:{type:Object,required:!0},search:{type:Function,required:!0},typeOptions:{type:Object,default(){return{image:"Image",video:"Video",document:"Document",spreadsheet:"Spreadsheet",presentation:"Presentation"}}}},emits:["on-media-submitted","on-type-changed","on-view-changed"],setup(e){var i;return{view:I(e.queryParams.view??"gallery"),term:I(e.queryParams.term),types:I(((i=e.queryParams)==null?void 0:i.types)??[])}},data(){return{cropper:null,file:null,formMedia:L(),isEditing:!1,isImageEditing:!1,isUploading:!1,isDeleting:!1,previewImageSrc:null,messageText:{successSaveAsMedia:"A new media has been created",successSubmitForm:"Media has been updated"},icon:Ce}},computed:{previewFileSrc(){var e,i;return((e=this.formMedia)==null?void 0:e.file_url)??((i=this.formMedia)==null?void 0:i.file)??""},isProcessing(){return this.isUploading||this.isDeleting},isGalleryView(){return this.view==="gallery"}},methods:{isImage(e){return(e==null?void 0:e.is_image)||(e==null?void 0:e.file)&&e.file.type.startsWith("image")},previewImage(e){this.previewImageSrc=e.file_url,this.openModal()},openEditModal(e){this.isEditing=!0,e&&(this.formMedia=e,this.formMedia.file_name=e.file_name_without_extension)},closeEditModal(){this.isEditing=!1},onFilePicked(e){let i=this.file.name.split(".").slice(0,-1).join(".").toLowerCase().replace(/[^a-z0-9]/gi,"-").replace(/-+/g,"-"),t="."+this.file.type.split("/")[1];this.formMedia={file:this.file,file_name:i,file_url:e.target.result,is_image:W.includes(be,t)},this.openEditModal()},onSuccessSubmit(e){this.file=null,this.formMedia=L(),this.closeEditModal(),this.$emit("on-media-submitted",e)},onErrorSubmit(){x()},onDeleteRecord(e){const i=this;e.canDeleted?i.deleteRecord(e):V("Delete Media?","This media is still being used in another place. If you delete this media, it may have an effect on that other place.","Yes",{icon:"warning"}).then(t=>{t.isConfirmed&&i.deleteRecord(e)})},deleteRecord(e){const i=this;we("Are you sure?").then(t=>{t.isConfirmed&&i.$inertia.delete(route(i.baseRouteName+".destroy",{id:e.id}),{onStart:r=>{i.onStartLoadingOverlay(),i.isDeleting=!0},onSuccess:r=>{U(r.props.flash.message)},onError:r=>{x()},onFinish:r=>{i.onEndLoadingOverlay(),i.isDeleting=!1}})})},openImageEditorModal(){this.isImageEditing=!0},closeImageEditorModal(){this.isImageEditing=!1},getCropperBlob(){return D(this.cropper.getCroppedCanvas())},updateFile(){const e=this;e.getCropperBlob().then(i=>{e.formMedia.file_url=URL.createObjectURL(i),e.formMedia.file=i,e.formMedia.is_image=!0,e.closeImageEditorModal()})},updateImage(){const e=this,i=this.formMedia,t=route(this.baseRouteName+".update-image",i.id),r=this.cropper;e.isUploading=!0,e.getCropperBlob().then(o=>{r.disable(),A({image:o,file_name:i.file_name}).post(t,{preserveState:!0,preserveScroll:!0,onStart:()=>e.onStartLoadingOverlay(),onSuccess:u=>{const g=u.props.records.data.find(v=>v.id===i.id);e.formMedia.file_url=g.file_url,e.closeImageEditorModal()},onError:u=>{e.$page.props.debug&&console.log(error)},onFinish:()=>{r&&r.enable(),e.isUploading=!1,e.onEndLoadingOverlay()}})})},saveAsImageConfirm(){V("Are you sure?","You will create a new image").then(e=>e.isConfirmed?this.saveAsImage():!1)},saveAsImage(){const e=this,i=this.formMedia,t=route(this.baseRouteName+".save-as-image",i.id);e.isUploading=!0,e.getCropperBlob().then(r=>{e.cropper.disable(),A({image:r,filename:i.file_name}).post(t,{preserveState:!0,preserveScroll:!0,onStart:()=>e.onStartLoadingOverlay(),onSuccess:l=>{e.closeImageEditorModal(),e.closeEditModal(),U(e.messageText.successSaveAsMedia)},onError:l=>{e.$page.props.debug&&console.log(error)},onFinish:()=>{e.cropper&&e.cropper.enable(),e.isUploading=!1,e.onEndLoadingOverlay()}})})},mediaIconThumbnail(e){if(e){if(e.file_type==="video")return"far fa-file-video";if(e.extension){if(e.extension==="pdf")return"far fa-file-pdf";if(e.extension.startsWith("doc"))return"far fa-file-word";if(e.extension.startsWith("ppt"))return"far fa-file-powerpoint";if(e.extension.startsWith("xls"))return"far fa-file-excel"}return"far fa-file-alt"}}}},pi={key:0,class:"columns"},fi={class:"column is-full"},bi={class:"content box"},_i={class:"field"},hi={class:"control"},gi={class:"columns is-multiline"},yi={class:"column is-full"},vi={class:"columns"},ki={class:"column"},Ci={key:0,class:"column"},zi=s("span",null,"Filter",-1),wi={key:0,class:"ml-1"},Ei={class:"icon is-small"},Mi={class:"column is-one-fifth"},Bi={class:"column is-full"},Si={class:"column is-full"},Ii={key:0,class:"column is-full"},Di=s("p",{class:"modal-card-title"}," Media Detail ",-1),Ri={class:"columns"},Pi={class:"column"},Fi={key:0,class:"card"},Ai={class:"card-image"},Oi={class:"card-footer"},xi={key:1,class:"card",style:{height:"90%"}},Vi={class:"card-image",style:{height:"inherit"}},Ui={class:"icon is-large",style:{width:"100%"}},Li={class:"fa-stack fa-lg"},ji={class:"column"};function Ti(e,i,t,r,o,l){var R;const u=c("biz-input-file"),g=c("biz-filter-search"),v=c("biz-checkbox"),b=c("biz-dropdown-item"),C=c("biz-dropdown"),S=c("biz-buttons-display-view"),_=c("biz-table-info"),X=c("biz-pagination"),w=c("biz-button"),K=c("biz-image"),J=c("media-form"),Q=c("biz-modal-card"),Z=c("biz-modal-image-editor");return d(),f("div",null,[t.isUploadEnabled?(d(),f("div",pi,[s("div",fi,[s("div",bi,[s("div",_i,[s("div",hi,[a(u,{modelValue:o.file,"onUpdate:modelValue":i[0]||(i[0]=p=>o.file=p),accept:t.acceptedTypes,"is-name-displayed":!1,disabled:l.isProcessing,onOnFilePicked:l.onFilePicked},null,8,["modelValue","accept","disabled","onOnFilePicked"])])])])])])):k("",!0),s("div",gi,[s("div",yi,[s("div",vi,[s("div",ki,[a(g,{modelValue:r.term,"onUpdate:modelValue":i[1]||(i[1]=p=>r.term=p),onSearch:t.search},null,8,["modelValue","onSearch"])]),t.isFilterEnabled?(d(),f("div",Ci,[a(C,{"close-on-click":!1},{trigger:n(()=>[zi,r.types.length>0?(d(),f("span",wi," ("+z(r.types.length)+") ",1)):k("",!0),s("span",Ei,[s("i",{class:h(o.icon.angleDown),"aria-hidden":"true"},null,2)])]),default:n(()=>[(d(!0),f(E,null,H(t.typeOptions,(p,P)=>(d(),y(b,{key:P},{default:n(()=>[a(v,{checked:r.types,"onUpdate:checked":i[2]||(i[2]=F=>r.types=F),value:P,onChange:i[3]||(i[3]=F=>e.$emit("on-type-changed",r.types))},{default:n(()=>[m(" Â "+z(p),1)]),_:2},1032,["checked","value"])]),_:2},1024))),128))]),_:1})])):k("",!0),s("div",Mi,[a(S,{modelValue:r.view,"onUpdate:modelValue":i[4]||(i[4]=p=>r.view=p),class:"is-right",onOnViewChanged:i[5]||(i[5]=p=>e.$emit("on-view-changed",p))},null,8,["modelValue"])])])]),s("div",Bi,[a(_,{records:t.records},null,8,["records"])]),s("div",Si,[(d(),y(_e(l.isGalleryView?"BizMediaGallery":"BizMediaList"),{media:t.records.data,"is-delete-enabled":t.isDeleteEnabled,"is-download-enabled":t.isDownloadEnabled,"is-edit-enabled":t.isEditEnabled,"is-select-enabled":t.isSelectEnabled,onOnDeleteClicked:l.onDeleteRecord,onOnEditClicked:l.openEditModal},{itemActions:n(({mediumItem:p})=>[M(e.$slots,"itemActions",{mediumItem:p})]),_:3},40,["media","is-delete-enabled","is-download-enabled","is-edit-enabled","is-select-enabled","onOnDeleteClicked","onOnEditClicked"]))]),t.isPaginationDisplayed?(d(),f("div",Ii,[a(X,{"is-ajax":t.isAjax,links:((R=t.records)==null?void 0:R.links)??[],"query-params":t.queryParams},null,8,["is-ajax","links","query-params"])])):k("",!0)]),o.isEditing?(d(),y(Q,{key:1,"content-class":{"is-huge":l.isImage(o.formMedia)},"is-close-hidden":!0,onClose:l.closeEditModal},{header:n(()=>[Di,a(w,{"aria-label":"close",class:"delete is-primary",type:"button",onClick:l.closeEditModal},null,8,["onClick"])]),default:n(()=>[s("div",Ri,[s("div",Pi,[l.isImage(o.formMedia)?(d(),f("div",Fi,[s("div",Ai,[a(K,{src:l.previewFileSrc,"img-style":{maxHeight:500+"px"}},null,8,["src"])]),s("footer",Oi,[a(w,{class:"card-footer-item is-borderless is-shadowless",type:"button",onClick:l.openImageEditorModal},{default:n(()=>[m(" Edit Image ")]),_:1},8,["onClick"])])])):(d(),f("div",xi,[s("div",Vi,[s("span",Ui,[s("span",Li,[s("i",{class:h([l.mediaIconThumbnail(o.formMedia),"fa-6x"])},null,2)])])])]))]),s("div",ji,[a(J,{media:o.formMedia,"is-ajax":t.isAjax,onOnSuccessSubmit:l.onSuccessSubmit,onOnErrorSubmit:l.onErrorSubmit,onCancel:l.closeEditModal},null,8,["media","is-ajax","onOnSuccessSubmit","onOnErrorSubmit","onCancel"])])])]),_:1},8,["content-class","onClose"])):k("",!0),o.isImageEditing?(d(),y(Z,{key:2,modelValue:o.formMedia.file_url,"onUpdate:modelValue":i[6]||(i[6]=p=>o.formMedia.file_url=p),cropper:o.cropper,"onUpdate:cropper":i[7]||(i[7]=p=>o.cropper=p),"file-name":o.formMedia.file_name,"is-processing":l.isProcessing,onClose:l.closeImageEditorModal},{actions:n(p=>[o.formMedia.id?(d(),f(E,{key:0},[a(w,{type:"button",class:h({"is-loading":o.isUploading,"is-link":!0}),disabled:l.isProcessing,onClick:l.updateImage},{default:n(()=>[m(" Save ")]),_:1},8,["class","disabled","onClick"]),a(w,{type:"button",class:h({"is-loading":o.isUploading,"is-primary":!0}),disabled:l.isProcessing,onClick:l.saveAsImageConfirm},{default:n(()=>[m(" Save As New ")]),_:1},8,["class","disabled","onClick"]),a(w,{type:"button",class:"is-link is-light",disabled:l.isProcessing,onClick:l.closeImageEditorModal},{default:n(()=>[m(" Cancel ")]),_:1},8,["disabled","onClick"])],64)):(d(),y(w,{key:1,type:"button",class:h({"is-loading":o.isUploading,"is-link":!0}),disabled:l.isProcessing,onClick:l.updateFile},{default:n(()=>[m(" Done ")]),_:1},8,["class","disabled","onClick"]))]),_:1},8,["modelValue","cropper","file-name","is-processing","onClose"])):k("",!0)])}const _t=B(mi,[["render",Ti]]);export{_t as B};
