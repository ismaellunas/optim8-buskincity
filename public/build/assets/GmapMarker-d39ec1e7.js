import{u as P,L as _}from"./map-049204a6.js";import{R as z,B as i,L as O,M as V,o as x,f as S,n as C,D as b,s as j,i as D,l as M,ao as A}from"./vue-loading.min-aa20e13d.js";import{u as E,i as g}from"./utils-79a9c8b1.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";const K={props:{modelValue:{type:Object,default:()=>{}},searchBoxStyle:{type:[String,Array,Object],default:"width: 300px"},searchBoxClass:{type:[String,Array,Object],default:"m-2"},mapStyle:{type:[String,Array,Object],default:()=>["width: 100%","height: 50vh"]},initPosition:{type:Object,default:null},apiKey:{type:String,default:null},enableSearchBox:{type:Boolean,default:!0},enableMarkerMove:{type:Boolean,default:!0},isDraggable:{type:Boolean,default:!0}},setup(a,{emit:p}){const t=E(a,p);let s=null;if(!g(a.modelValue)&&!g(a.modelValue.longitude)&&!g(a.modelValue.latitude))s={lat:t.value.latitude,lng:t.value.longitude};else if(!g(a.initPosition))s={lat:a.initPosition.latitude,lng:a.initPosition.longitude};else{const{coords:e}=P();s={lat:e.value.latitude,lng:e.value.longitude}}const u=z(()=>s),r=i([]),B=i(null),m=i(null),c=i(null),L=new _({apiKey:a.apiKey,version:"weekly",libraries:["geometry","drawing","places"]});let l=i(null),f=null,v=null;const d=function(e){r.value.push(new google.maps.Marker({position:e,map:l.value})),t.value.latitude=M.isFunction(e.lat)?e.lat():e.lat,t.value.longitude=M.isFunction(e.lng)?e.lng():e.lng},w=function(e){for(let n=0;n<r.value.length;n++)A(r.value[n]).setMap(e)},k=function(){w(null)},y=function(){k(),r.value=[]},h=function(){w(l.value)};return O(async()=>{await L.load(),l.value=new google.maps.Map(B.value,{center:u.value,zoom:11,draggable:a.isDraggable,streetViewControl:!1}),a.enableSearchBox&&(c.value=new google.maps.places.SearchBox(m.value),l.value.controls[google.maps.ControlPosition.TOP_LEFT].push(m.value),l.value.addListener("bounds_changed",()=>{c.value.setBounds(l.value.getBounds())}),v=c.value.addListener("places_changed",()=>{const e=c.value.getPlaces();if(e.length==0)return;y();const n=new google.maps.LatLngBounds;e.forEach(o=>{if(!o.geometry||!o.geometry.location){console.log("Returned place contains no geometry");return}o.icon,new google.maps.Size(71,71),new google.maps.Point(0,0),new google.maps.Point(17,34),new google.maps.Size(25,25),d(o.geometry.location),o.geometry.viewport?n.union(o.geometry.viewport):n.extend(o.geometry.location)}),l.value.fitBounds(n)})),f=l.value.addListener("click",e=>{if(!a.enableMarkerMove)return!1;y(),d(e.latLng),h()}),d(u.value),h()}),V(()=>{f&&f.remove,v&&v.remove}),{currPos:u,markers:r,mapDiv:B,searchInput:m,hideMarkers:k,showMarkers:h,deleteMarkers:y,addMarker:d}}};function R(a,p,t,s,u,r){return x(),S("div",null,[t.enableSearchBox?(x(),S("input",{key:0,id:"pac-input",ref:"searchInput",type:"text",placeholder:"Search Box",class:C(["input",t.searchBoxClass]),style:b(t.searchBoxStyle)},null,6)):j("",!0),D("div",{ref:"mapDiv",style:b(t.mapStyle)},null,4)])}const U=F(K,[["render",R]]);export{U as B};
