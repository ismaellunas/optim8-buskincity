import{B as f}from"./Button-b3acaac2.js";import{B as h}from"./ButtonIcon-05c24ca4.js";import{B as M}from"./MediaLibrary-5a0e38b7.js";import{B}from"./ModalCard-42b1747b.js";import{B as g}from"./Pagination-8d9b0028.js";import{ah as r,r as s,o as L,u as T,q as o,i as l,t as z,p as n,n as _,ai as w}from"./vue-loading.min-aa20e13d.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";import{o as C}from"./alert-e0e75cb7.js";const P={name:"BizMediaBrowser",components:{BizButton:f,BizButtonIcon:h,BizMediaLibrary:M,BizModalCard:B,BizPagination:g},props:{acceptedFileType:{type:Array,default:null},data:{type:Object,required:!0},isDownloadEnabled:{type:Boolean,default:!0},isUploadEnabled:{type:Boolean,default:!0},queryParams:{type:Object,default:()=>{}},search:{type:Function,required:!0},title:{type:String,default:"Images"}},emits:["close","on-clicked-pagination","on-media-selected","on-media-submitted","on-view-changed"],setup(e){return{acceptedTypes:e.acceptedFileType??r}}},v={class:"modal-card-title"},q=l("span",null,"Select",-1);function x(e,a,t,m,S,E){const c=s("biz-button"),p=s("biz-pagination"),u=s("biz-button-icon"),y=s("biz-media-library"),b=s("biz-modal-card");return L(),T(b,{"content-class":["is-huge"],"is-close-hidden":!0,onClose:a[4]||(a[4]=i=>e.$emit("close"))},{header:o(()=>[l("p",v,z(t.title),1),n(c,{"aria-label":"close",class:"delete is-primary",type:"button",onClick:a[0]||(a[0]=i=>e.$emit("close"))})]),footer:o(()=>{var i;return[n(p,{"is-ajax":!0,links:((i=t.data)==null?void 0:i.links)??[],onOnClickedPagination:a[1]||(a[1]=d=>e.$emit("on-clicked-pagination",d))},null,8,["links"])]}),default:o(()=>[n(y,{"accepted-types":m.acceptedTypes,"is-ajax":!0,"is-delete-enabled":!1,"is-download-enabled":t.isDownloadEnabled,"is-edit-enabled":!1,"is-pagination-displayed":!1,"is-upload-enabled":t.isUploadEnabled,"query-params":t.queryParams,records:t.data,search:t.search,onOnMediaSubmitted:a[2]||(a[2]=i=>e.$emit("on-media-submitted",i)),onOnViewChanged:a[3]||(a[3]=i=>e.$emit("on-view-changed",i))},{itemActions:o(({mediumItem:i})=>[n(u,{icon:"fas fa-check",title:"Select",type:"button",class:_({"is-borderless is-shadowless is-inverted is-primary":!0,"card-footer-item  p-2":t.queryParams.view!=="list"}),onClick:d=>e.$emit("on-media-selected",i,d)},{default:o(()=>[q]),_:2},1032,["class","onClick"])]),_:1},8,["accepted-types","is-download-enabled","is-upload-enabled","query-params","records","search"])]),_:1})}const $=k(P,[["render",x]]),A={name:"MediaLibraryMixin",data(){return{media:[],mediaListQueryParams:{type:["image"]},mediaListRouteName:"admin.media.lists"}},methods:{getMediaList(e){const a=this;axios.get(e,{params:this.mediaListQueryParams}).then(function(t){a.setMedia(t.data),a.onMediaListLoadedSuccess(t)}).catch(function(t){C(),a.onMediaListLoadedFail(t)})},setTerm(e){this.mediaListQueryParams.term=e},setView(e){this.mediaListQueryParams.view=e},setType(e){this.mediaListQueryParams.type=e},search(e){this.setTerm(e),this.getMediaList(route(this.mediaListRouteName))},setMedia(e){this.media=e},onMediaListLoadedFail(){},onMediaListLoadedSuccess(){}}},R={name:"MixinMediaTextEditor",data(){return{fileType:null}},computed:{acceptedTypes(){switch(this.fileType){case"media":return w;default:return r}}},methods:{setTypeToMedia(e){switch(this.fileType=e,this.fileType){case"media":this.setType(["video"]);break;default:this.setType([e]);break}}}};export{$ as B,A as M,R as a};
