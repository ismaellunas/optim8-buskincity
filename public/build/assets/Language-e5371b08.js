import{M as k}from"./HasPageErrors-da5616c1.js";import{A as w}from"./AppLayout-40f8bbe7.js";import{B as x}from"./Button-03e0d3fd.js";import{o as u,f as c,x as C,n as D,H as A,l as n,z as N,p as d,i as o,w as q,q as i,F as h,j as b,r,k as g,t as m,u as E}from"./vue-loading.min-a6a947f0.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import{a as F}from"./Dropdown-034da47d.js";import{B as P}from"./ErrorNotifications-090d6193.js";import{B as j}from"./DropdownSearch-eb09b8b3.js";import{B as V}from"./Field-a8082082.js";import{s as M}from"./alert-fe3154bb.js";import"./utils-caa7a80b.js";import"./Breadcrumbs-f0ae94d4.js";import"./Link-359d994c.js";import"./NavbarItem-766600c9.js";import"./InputError-9b7084c8.js";import"./DropdownSearch-d54bf8fb.js";import"./Input-4c73d710.js";import"./Icon-6def3c13.js";import"./icon-class-4ab3933f.js";import"./Field-e1691255.js";import"./sweetalert2.all-7b2d1616.js";const R={name:"BizButtonOption",props:{type:{type:String,default:"submit"},selected:{type:Boolean,default:null},selectedClasess:{type:Array,default:()=>["is-link"]},unselectedClasess:{type:Array,default:()=>["is-outlined"]},option:{type:Object,default:()=>{}},selectedAttribute:{type:String,default:"selected"}},computed:{isSelected(){if(this.selected===null){const e=this.option[this.selectedAttribute]??!1;return e&&e==!0}return this.selected},classes(){return this.isSelected?this.selectedClasess:this.unselectedClasess}}},H=["type"];function I(e,t,l,f,p,a){return u(),c("button",{class:D(["button",a.classes]),type:l.type},[C(e.$slots,"default")],10,H)}const T=L(R,[["render",I]]),$={name:"LanguageIndex",components:{BizButton:x,BizButtonOption:T,BizDropdownItem:F,BizErrorNotifications:P,BizFormDropdownSearch:j,BizLabel:V},mixins:[k],layout:w,props:{supportedLanguages:{type:Array,required:!0},baseRouteName:{type:String,required:!0},errors:{type:Object,default:()=>{}},languageOptions:{type:Object,required:!0},defaultLanguage:{type:Number,required:!0},title:{type:String,required:!0}},setup(e){const t={languages:e.supportedLanguages,default_language:e.defaultLanguage};return{form:A(t)}},data(){return{isProcessing:!1,loader:null,filteredLanguages:this.languageOptions.slice(0,10),supportedLanguageOptions:this.initSupportedLanguageOptions(),trans:{labels:{"Supported Languages":"Supported Languages"}}}},computed:{sortedLanguageOptions(){return n.sortBy(this.supportedLanguageOptions,["value"])},selectedDefaultLanguage:{get(){return this.form.default_language?n.find(this.languageOptions,["id",parseInt(this.form.default_language)]).value:""},set(e){this.form.default_language=e.id,this.addSupportedLanguages(e.id);const t=n.find(this.supportedLanguageOptions,e);t.selected=!0}}},methods:{onSubmit(){const e=this;this.form.post(route(this.baseRouteName+".update"),{preserveScroll:!1,onStart:()=>{e.loader=e.$loading.show(),e.isProcessing=!0},onSuccess:t=>{e.form.isDirty=!1,e.supportedLanguageOptions=e.initSupportedLanguageOptions(),M(t.props.flash.message)},onFinish:()=>{e.loader.hide(),e.isProcessing=!1}})},searchLanguage:n.debounce(function(e){!n.isEmpty(e)&&e.length>1?this.filteredLanguages=n.filter(this.languageOptions,function(t){return new RegExp(e,"i").test(t.value)}).slice(0,10):this.filteredLanguages=this.languageOptions.slice(0,10)},N),addSupportedLanguages(e){this.form.languages.includes(e)||this.form.languages.push(e)},updateSelectedLanguage(e){const t=this.form.languages,l=t.indexOf(e);l===-1?t.push(e):t.splice(l,1)},toggleLanguage(e){e.selected=!e.selected,this.updateSelectedLanguage(e.id)},initSupportedLanguageOptions(){const e=this;return e.languageOptions.map(t=>(t.selected=e.supportedLanguages.includes(t.id),t))}}},U={class:"mb-6"},G={class:"column"},J=["disabled"],K={class:"field is-grouped is-grouped-right"},Q={class:"control"},W={class:"columns"},X={class:"column"},Y={style:{"min-width":"4rem"}},Z={class:"columns mt-2 is-multiline"},ee={class:"column is-full"};function te(e,t,l,f,p,a){const y=r("biz-error-notifications"),S=r("biz-button"),O=r("biz-dropdown-item"),z=r("biz-form-dropdown-search"),v=r("biz-label"),B=r("biz-button-option");return u(),c("div",null,[d(y,{errors:e.$page.props.errors},null,8,["errors"]),o("div",U,[o("form",{class:"columns",method:"post",onSubmit:t[1]||(t[1]=q((...s)=>a.onSubmit&&a.onSubmit(...s),["prevent"]))},[o("div",G,[o("fieldset",{class:"box",disabled:p.isProcessing},[o("div",K,[o("div",Q,[d(S,{class:"is-link"},{default:i(()=>[g(" Update ")]),_:1})])]),o("div",W,[o("div",X,[d(z,{label:"Default Language","close-on-click":!0,onSearch:t[0]||(t[0]=s=>a.searchLanguage(s))},{trigger:i(()=>[o("span",Y,m(a.selectedDefaultLanguage),1)]),default:i(()=>[(u(!0),c(h,null,b(p.filteredLanguages,s=>(u(),E(O,{key:s.id,onClick:_=>a.selectedDefaultLanguage=s},{default:i(()=>[g(m(s.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})])]),o("div",Z,[o("div",ee,[d(v,null,{default:i(()=>[g(m(p.trans.labels["Supported Languages"]),1)]),_:1})]),(u(!0),c(h,null,b(a.sortedLanguageOptions,(s,_)=>(u(),c("div",{key:s.id,class:"column is-3 py-1"},[d(B,{class:"is-fullwidth",type:"button","selected-attribute":"selected",option:s,disabled:s.id==f.form.default_language,onClick:se=>a.toggleLanguage(a.sortedLanguageOptions[_])},{default:i(()=>[g(m(s.value),1)]),_:2},1032,["option","disabled","onClick"])]))),128))])],8,J)])],32)])])}const ve=L($,[["render",te]]);export{ve as default};
