import{M as x}from"./HasLoader-a564cfe6.js";import{M as E}from"./HasModal-fa56130c.js";import{M as V}from"./HasPageErrors-4d447fdf.js";import{L as w}from"./User-145a30bc.js";import{B as I}from"./Breadcrumbs-0b4348b1.js";import{B as L}from"./Button-b3acaac2.js";import{B as P}from"./ButtonIcon-05c24ca4.js";import{B as N}from"./ButtonLink-71ebb617.js";import{B as O}from"./GmapMarker-d39ec1e7.js";import{B as q}from"./Icon-150b61ef.js";import{B as R}from"./Tag-083af5c2.js";import T from"./TableEventDetail-3ec75548.js";import A from"./ModalCancelEventConfirmation-a890d76d.js";import{i as F}from"./icon-class-4ab3933f.js";import{o as p,s as b,b as H}from"./alert-e0e75cb7.js";import{H as j,l as D,f as u,i,p as r,t as h,q as l,s as _,u as K,r as a,o as m,k}from"./vue-loading.min-aa20e13d.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import"./utils-79a9c8b1.js";import"./Link-2bcf0cab.js";import"./NavbarItem-7e983d41.js";import"./map-049204a6.js";import"./Table-2efbef14.js";import"./booking-icon-853771cf.js";import"./Textarea-18e9b25c.js";import"./Field-fbae01a6.js";import"./Field-c2e062a9.js";import"./InputError-bc1e9f36.js";import"./Textarea-3c29db5c.js";import"./ModalCard-42b1747b.js";import"./sweetalert2.all-ebd52f41.js";const G={components:{BizBreadcrumbs:I,BizButton:L,BizButtonIcon:P,BizButtonLink:N,BizGmapMarker:O,BizIcon:q,BizTag:R,EventDetailTable:T,ModalCancelEventConfirmation:A},mixins:[x,E,V],layout:w,props:{breadcrumbs:{type:Array,default:()=>[]},baseRouteName:{type:String,required:!0},can:{type:Object,required:!0},description:{type:String,required:!0},order:{type:Object,required:!0},checkInTime:{type:[String,null],required:!0},googleApiKey:{type:String,default:null}},setup(t){var o,n,s,c;return{form:j({message:null}),icon:F,mapPosition:{latitude:(n=(o=t.order)==null?void 0:o.location)==null?void 0:n.latitude,longitude:(c=(s=t.order)==null?void 0:s.location)==null?void 0:c.longitude}}},methods:{cancel(){const t=this;t.form.post(route(t.baseRouteName+".cancel",t.order.id),{onStart:()=>t.onStartLoadingOverlay(),onFinish:()=>t.onEndLoadingOverlay(),onError:e=>{p()},onSuccess:e=>{t.closeModal(),b(e.props.flash.message)}})},onShownModal(){this.form.reset()},submitCheckIn(t){const e=this,o=route(e.baseRouteName+".check-in",e.order.id),n={geolocation:{latitude:t.coords.latitude,longitude:t.coords.longitude}};this.$inertia.post(o,n,{onStart:()=>e.onStartLoadingOverlay(),onFinish:()=>e.onEndLoadingOverlay(),onError:s=>{const c={};D.has(s,"default.geolocation")&&(c.html=e.error("geolocation")),p(c)},onSuccess:s=>{b(s.props.flash.message)}})},checkIn(){const t=this;H("Check-in Location","Are you sure you want to check-in your current location?","Continue").then(e=>{if(e.isConfirmed){const o=s=>{t.submitCheckIn(s)},n=s=>{p({text:"Please enable location permission to check-in."})};navigator.geolocation.getCurrentPosition(o,n)}})}}},Y={class:"columns is-multiline is-centered box"},J={class:"column is-11"},Q={class:"column is-11"},W={class:"columns"},X={class:"column is-7"},Z={class:"title is-2 mt-5 mb-2"},$={class:"is-size-7"},oo={class:"column is-5"},eo={class:"columns is-multiline is-centered mt-5"},to={key:0,class:"column is-10"},no={class:"card"},io={key:1,class:"column is-8"},so=i("span",null,"Reschedule",-1),ro={key:2,class:"column is-8"},ao=i("span",null,"Cancel",-1),co={key:3,class:"column is-8"},lo=i("span",null,"Check-in",-1);function mo(t,e,o,n,s,c){const g=a("biz-breadcrumbs"),v=a("biz-tag"),y=a("event-detail-table"),C=a("biz-gmap-marker"),z=a("biz-icon"),B=a("biz-button-link"),f=a("biz-button-icon"),M=a("biz-button"),S=a("modal-cancel-event-confirmation");return m(),u("div",Y,[i("div",J,[r(g,{breadcrumbs:o.breadcrumbs},null,8,["breadcrumbs"])]),i("div",Q,[i("div",W,[i("div",X,[i("h1",Z,h(o.order.product.name),1),i("p",$,[r(v,{class:"is-medium"},{default:l(()=>[k(h(o.order.event.status),1)]),_:1})]),r(y,{class:"mt-3","check-in-time":o.checkInTime,event:o.order.event,location:o.order.location,product:o.order.product},null,8,["check-in-time","event","location","product"])]),i("div",oo,[i("div",eo,[n.mapPosition.latitude&&n.mapPosition.latitude?(m(),u("div",to,[i("div",no,[r(C,{modelValue:n.mapPosition,"onUpdate:modelValue":e[0]||(e[0]=d=>n.mapPosition=d),"api-key":o.googleApiKey,"init-position":n.mapPosition,"map-style":["width: 100%","height: 378px"],"enable-search-box":!1,"enable-marker-move":!1},null,8,["modelValue","api-key","init-position"])])])):_("",!0),o.can.reschedule?(m(),u("div",io,[r(B,{class:"is-fullwidth is-warning",href:t.route(o.baseRouteName+".reschedule",o.order.id)},{default:l(()=>[r(z,{icon:n.icon.recycle},null,8,["icon"]),so]),_:1},8,["href"])])):_("",!0),o.can.cancel?(m(),u("div",ro,[r(f,{class:"is-fullwidth is-danger",type:"button",icon:n.icon.remove,onClick:t.openModal},{default:l(()=>[ao]),_:1},8,["icon","onClick"])])):_("",!0),o.can.checkIn?(m(),u("div",co,[r(f,{class:"is-fullwidth",type:"button",icon:n.icon.buildingCheck,onClick:c.checkIn},{default:l(()=>[lo]),_:1},8,["icon","onClick"])])):_("",!0)])])])]),t.isModalOpen?(m(),K(S,{key:0,modelValue:n.form.message,"onUpdate:modelValue":e[2]||(e[2]=d=>n.form.message=d),title:"Cancel Event",event:o.order.event,"product-name":o.order.product.name,onClose:e[3]||(e[3]=d=>t.closeModal())},{actions:l(()=>[r(M,{class:"is-danger ml-1",type:"button",onClick:e[1]||(e[1]=d=>c.cancel())},{default:l(()=>[k(" Yes for sure ")]),_:1})]),_:1},8,["modelValue","event","product-name"])):_("",!0)])}const jo=U(G,[["render",mo]]);export{jo as default};
