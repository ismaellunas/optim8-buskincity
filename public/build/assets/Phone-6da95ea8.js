import{a as S}from"./Field-a8082082.js";import{a as z}from"./Dropdown-034da47d.js";import{B}from"./DropdownScroll-6b0f6840.js";import{B as V}from"./DropdownSearch-d54bf8fb.js";import{u as b}from"./utils-caa7a80b.js";import{l,z as v,r as a,o as c,f as y,i as s,p,q as n,t as u,F as M,j as N,u as _,k as g,m as q,v as k,n as x,Q as O,x as E}from"./vue-loading.min-a6a947f0.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import{B as I}from"./InputError-9b7084c8.js";const D={name:"BizPhone",components:{BizDropdownItem:z,BizDropdownScroll:B,BizDropdownSearch:V},props:{countryOptions:{type:Array,required:!0},defaultCountry:{type:String,default:"US"},disabled:{type:Boolean,default:!1},dropdownMaxHeight:{type:Number,default:350},dropdownMaxWidth:{type:Number,default:null},hasError:{type:Boolean,default:!1},modelValue:{type:Object,default:void 0},optionsIncreaseNumber:{type:Number,default:50},optionsMaxNumber:{type:Number,default:25},placeholder:{type:String,default:null},required:{type:Boolean,default:!1}},setup(t,{emit:e}){return{computedValue:b(t,e)}},data(){return{filteredCountries:this.countryOptions,latestIndex:this.optionsMaxNumber}},computed:{selectedCountry(){return l.find(this.countryOptions,t=>t.id==(this.computedValue.country??this.defaultCountry))},displayedCountries(){return this.filteredCountries.slice(0,this.latestIndex)}},beforeMount(){(!this.computedValue.country||this.computedValue.country=="")&&(this.computedValue.country=this.defaultCountry)},methods:{focus(){this.$refs.dropdownSearch.focus()},getDefaultCountries(){return this.countryOptions.slice(0,this.optionsMaxNumber)},keyPress(t){let e=String.fromCharCode(t.keyCode);if(t.target.value.slice(-1),new RegExp("^[0-9]+$").test(e))return!0;t.preventDefault()},searchCountry:l.debounce(function(t){!l.isEmpty(t)&&t.length>1?this.filteredCountries=l.filter(this.countryOptions,function(e){return new RegExp(t,"i").test(e.value)||new RegExp(t,"i").test(e.id)}):this.filteredCountries=this.countryOptions,this.latestIndex=this.optionsMaxNumber},v),onScroll({target:{scrollTop:t,clientHeight:e,scrollHeight:r}}){t+e>=r&&this.filteredCountries.length>this.latestIndex-1&&(this.latestIndex+=this.optionsIncreaseNumber)}}},P={class:"field has-addons"},A={class:"control"},U={class:"icon is-small"},j={class:"control is-expanded has-icons-left"},F=["placeholder","disabled","required"],W={class:"icon is-left"};function H(t,e,r,i,w,d){const m=a("biz-dropdown-item"),f=a("biz-dropdown-scroll"),h=a("biz-dropdown-search");return c(),y("div",P,[s("p",A,[p(h,{ref:"dropdownSearch",label:"Country","close-on-click":!0,onClick:e[0]||(e[0]=o=>d.focus()),onSearch:e[1]||(e[1]=o=>d.searchCountry(o))},{trigger:n(()=>[s("span",U,u(d.selectedCountry.id),1)]),default:n(()=>[p(f,{"max-height":r.dropdownMaxHeight,"max-width":r.dropdownMaxWidth,onScroll:d.onScroll},{default:n(()=>[(c(!0),y(M,null,N(d.displayedCountries,o=>(c(),_(m,{key:o.id,tag:"a","is-active":o.id==d.selectedCountry.id,onClick:K=>i.computedValue.country=o.id},{default:n(()=>[g(u(o.value)+" (+"+u(o.dial)+") ",1)]),_:2},1032,["is-active","onClick"]))),128))]),_:1},8,["max-height","max-width","onScroll"])]),_:1},512)]),s("div",j,[q(s("input",{ref:"input-phonenumber","onUpdate:modelValue":e[2]||(e[2]=o=>i.computedValue.number=o),class:x(["input",{"is-danger":r.hasError}]),placeholder:r.placeholder,disabled:r.disabled,required:r.required,onKeypress:e[3]||(e[3]=(...o)=>d.keyPress&&d.keyPress(...o))},null,42,F),[[k,i.computedValue.number]]),s("span",W," +"+u(d.selectedCountry.dial??""),1)])])}const R=C(D,[["render",H]]),T={name:"BizFormPhone",components:{BizFormField:S,BizInputError:I,BizPhone:R},inheritAttrs:!1,props:{fieldClass:{type:[Object,Array,String],default:void 0},label:{type:String,default:""},message:{type:[Array,Object,String],default:void 0},modelValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},countryOptions:{type:[Array,Object],default:()=>[{id:"AU",value:"Australia",dial:"61"},{id:"ID",value:"Indonesia",dial:"62"},{id:"SG",value:"Singapore",dial:"65"},{id:"US",value:"United States",dial:"1"}]},defaultCountry:{type:String,default:"US"},dropdownMaxHeight:{type:Number,default:350},dropdownMaxWidth:{type:Number,default:null}},emits:["update:modelValue"],setup(t,{emit:e}){return{computedValue:b(t,e)}},data(){return{selectedCountryCode:this.defaultCountry}},computed:{isError(){return!l.isEmpty(this.message)}}};function G(t,e,r,i,w,d){const m=a("biz-phone"),f=a("biz-input-error"),h=a("biz-form-field");return c(),_(h,{class:x(r.fieldClass),"is-required":r.required},{label:n(()=>[g(u(r.label),1)]),error:n(()=>[p(f,{message:r.message},null,8,["message"])]),default:n(()=>[p(m,O({modelValue:i.computedValue,"onUpdate:modelValue":e[0]||(e[0]=o=>i.computedValue=o)},t.$attrs,{"is-error":d.isError,"country-options":r.countryOptions,"default-country":r.defaultCountry,disabled:r.disabled,required:r.required,"dropdown-max-height":r.dropdownMaxHeight,"dropdown-max-width":r.dropdownMaxWidth}),null,16,["modelValue","is-error","country-options","default-country","disabled","required","dropdown-max-height","dropdown-max-width"]),E(t.$slots,"note")]),_:3},8,["class","is-required"])}const te=C(T,[["render",G]]);export{te as B};
