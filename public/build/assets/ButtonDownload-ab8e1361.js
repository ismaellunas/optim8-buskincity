import{B as Z}from"./Button-b3acaac2.js";import{c as ee,g as te,r as re,o as ne,u as oe,q as ie,x as ae,i as X}from"./vue-loading.min-aa20e13d.js";import{_ as ue}from"./_plugin-vue_export-helper-c27b6911.js";var K={},se={get exports(){return K},set exports(A){K=A}};(function(A,U){(function(b,y){A.exports=y()})(ee,function(){return function(F){var b={};function y(l){if(b[l])return b[l].exports;var c=b[l]={i:l,l:!1,exports:{}};return F[l].call(c.exports,c,c.exports,y),c.l=!0,c.exports}return y.m=F,y.c=b,y.d=function(l,c,w){y.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:w})},y.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},y.t=function(l,c){if(c&1&&(l=y(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var w=Object.create(null);if(y.r(w),Object.defineProperty(w,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var S in l)y.d(w,S,function(E){return l[E]}.bind(null,S));return w},y.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return y.d(c,"a",c),c},y.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},y.p="",y(y.s="./src/index.js")}({"./node_modules/@babel/runtime/regenerator/index.js":function(F,b,y){F.exports=y("./node_modules/regenerator-runtime/runtime.js")},"./node_modules/regenerator-runtime/runtime.js":function(F,b,y){var l=function(c){var w=Object.prototype,S=w.hasOwnProperty,E,j=typeof Symbol=="function"?Symbol:{},M=j.iterator||"@@iterator",B=j.asyncIterator||"@@asyncIterator",G=j.toStringTag||"@@toStringTag";function k(t,e,o){return Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{k({},"")}catch{k=function(e,o,h){return e[o]=h}}function C(t,e,o,h){var s=e&&e.prototype instanceof f?e:f,g=Object.create(s.prototype),T=new z(h||[]);return g._invoke=Y(t,o,T),g}c.wrap=C;function v(t,e,o){try{return{type:"normal",arg:t.call(e,o)}}catch(h){return{type:"throw",arg:h}}}var d="suspendedStart",u="suspendedYield",n="executing",r="completed",a={};function f(){}function i(){}function p(){}var _={};k(_,M,function(){return this});var m=Object.getPrototypeOf,P=m&&m(m(W([])));P&&P!==w&&S.call(P,M)&&(_=P);var O=p.prototype=f.prototype=Object.create(_);i.prototype=p,k(O,"constructor",p),k(p,"constructor",i),i.displayName=k(p,G,"GeneratorFunction");function x(t){["next","throw","return"].forEach(function(e){k(t,e,function(o){return this._invoke(e,o)})})}c.isGeneratorFunction=function(t){var e=typeof t=="function"&&t.constructor;return e?e===i||(e.displayName||e.name)==="GeneratorFunction":!1},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,k(t,G,"GeneratorFunction")),t.prototype=Object.create(O),t},c.awrap=function(t){return{__await:t}};function N(t,e){function o(g,T,D,R){var L=v(t[g],t,T);if(L.type==="throw")R(L.arg);else{var J=L.arg,I=J.value;return I&&typeof I=="object"&&S.call(I,"__await")?e.resolve(I.__await).then(function($){o("next",$,D,R)},function($){o("throw",$,D,R)}):e.resolve(I).then(function($){J.value=$,D(J)},function($){return o("throw",$,D,R)})}}var h;function s(g,T){function D(){return new e(function(R,L){o(g,T,R,L)})}return h=h?h.then(D,D):D()}this._invoke=s}x(N.prototype),k(N.prototype,B,function(){return this}),c.AsyncIterator=N,c.async=function(t,e,o,h,s){s===void 0&&(s=Promise);var g=new N(C(t,e,o,h),s);return c.isGeneratorFunction(e)?g:g.next().then(function(T){return T.done?T.value:g.next()})};function Y(t,e,o){var h=d;return function(g,T){if(h===n)throw new Error("Generator is already running");if(h===r){if(g==="throw")throw T;return V()}for(o.method=g,o.arg=T;;){var D=o.delegate;if(D){var R=q(D,o);if(R){if(R===a)continue;return R}}if(o.method==="next")o.sent=o._sent=o.arg;else if(o.method==="throw"){if(h===d)throw h=r,o.arg;o.dispatchException(o.arg)}else o.method==="return"&&o.abrupt("return",o.arg);h=n;var L=v(t,e,o);if(L.type==="normal"){if(h=o.done?r:u,L.arg===a)continue;return{value:L.arg,done:o.done}}else L.type==="throw"&&(h=r,o.method="throw",o.arg=L.arg)}}}function q(t,e){var o=t.iterator[e.method];if(o===E){if(e.delegate=null,e.method==="throw"){if(t.iterator.return&&(e.method="return",e.arg=E,q(t,e),e.method==="throw"))return a;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return a}var h=v(o,t.iterator,e.arg);if(h.type==="throw")return e.method="throw",e.arg=h.arg,e.delegate=null,a;var s=h.arg;if(!s)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,a;if(s.done)e[t.resultName]=s.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=E);else return s;return e.delegate=null,a}x(O),k(O,G,"Generator"),k(O,M,function(){return this}),k(O,"toString",function(){return"[object Generator]"});function Q(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function H(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function z(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(Q,this),this.reset(!0)}c.keys=function(t){var e=[];for(var o in t)e.push(o);return e.reverse(),function h(){for(;e.length;){var s=e.pop();if(s in t)return h.value=s,h.done=!1,h}return h.done=!0,h}};function W(t){if(t){var e=t[M];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var o=-1,h=function s(){for(;++o<t.length;)if(S.call(t,o))return s.value=t[o],s.done=!1,s;return s.value=E,s.done=!0,s};return h.next=h}}return{next:V}}c.values=W;function V(){return{value:E,done:!0}}return z.prototype={constructor:z,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=E,this.done=!1,this.delegate=null,this.method="next",this.arg=E,this.tryEntries.forEach(H),!t)for(var e in this)e.charAt(0)==="t"&&S.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=E)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(R,L){return g.type="throw",g.arg=t,e.next=R,L&&(e.method="next",e.arg=E),!!L}for(var h=this.tryEntries.length-1;h>=0;--h){var s=this.tryEntries[h],g=s.completion;if(s.tryLoc==="root")return o("end");if(s.tryLoc<=this.prev){var T=S.call(s,"catchLoc"),D=S.call(s,"finallyLoc");if(T&&D){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(T){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else if(D){if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var h=this.tryEntries[o];if(h.tryLoc<=this.prev&&S.call(h,"finallyLoc")&&this.prev<h.finallyLoc){var s=h;break}}s&&(t==="break"||t==="continue")&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var g=s?s.completion:{};return g.type=t,g.arg=e,s?(this.method="next",this.next=s.finallyLoc,a):this.complete(g)},complete:function(t,e){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&e&&(this.next=e),a},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),H(o),a}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc===t){var h=o.completion;if(h.type==="throw"){var s=h.arg;H(o)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:W(t),resultName:e,nextLoc:o},this.method==="next"&&(this.arg=E),a}},c}(F.exports);try{regeneratorRuntime=l}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=l:Function("r","regeneratorRuntime = r")(l)}},"./src/exception.js":function(F,b,y){y.r(b),y.d(b,"DownloadException",function(){return d}),y.d(b,"downloadException",function(){return u});function l(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l=function(a){return typeof a}:l=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},l(n)}function c(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function w(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&C(n,r)}function S(n){var r=G();return function(){var f=v(n),i;if(r){var p=v(this).constructor;i=Reflect.construct(f,arguments,p)}else i=f.apply(this,arguments);return E(this,i)}}function E(n,r){if(r&&(l(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j(n)}function j(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function M(n){var r=typeof Map=="function"?new Map:void 0;return M=function(f){if(f===null||!k(f))return f;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(f))return r.get(f);r.set(f,i)}function i(){return B(f,arguments,v(this).constructor)}return i.prototype=Object.create(f.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),C(i,f)},M(n)}function B(n,r,a){return G()?B=Reflect.construct:B=function(i,p,_){var m=[null];m.push.apply(m,p);var P=Function.bind.apply(i,m),O=new P;return _&&C(O,_.prototype),O},B.apply(null,arguments)}function G(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function C(n,r){return C=Object.setPrototypeOf||function(f,i){return f.__proto__=i,f},C(n,r)}function v(n){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},v(n)}var d=function(n){w(a,n);var r=S(a);function a(f,i){var p;return c(this,a),p=r.call(this,"Downloader error: ".concat(f)),p.request=i,p.name="DownloadException",p}return a}(M(Error)),u=d},"./src/index.js":function(F,b,y){y.r(b);var l=y("./node_modules/@babel/runtime/regenerator/index.js"),c=y.n(l),w=y("./src/exception.js"),S=y("./src/signatures.js");/*!
 * JS File Downloader v 1.1.24
 * https://github.com/AleeeKoi/js-file-downloader
 *
 * Copyright Alessandro Pellizzari
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 */function E(v,d,u,n,r,a,f){try{var i=v[a](f),p=i.value}catch(_){u(_);return}i.done?d(p):Promise.resolve(p).then(n,r)}function j(v){return function(){var d=this,u=arguments;return new Promise(function(n,r){var a=v.apply(d,u);function f(p){E(a,n,r,f,i,"next",p)}function i(p){E(a,n,r,f,i,"throw",p)}f(void 0)})}}function M(v,d){if(!(v instanceof d))throw new TypeError("Cannot call a class as a function")}function B(v,d){for(var u=0;u<d.length;u++){var n=d[u];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(v,n.key,n)}}function G(v,d,u){return d&&B(v.prototype,d),u&&B(v,u),v}var k={timeout:4e4,headers:[],forceDesktopMode:!1,autoStart:!0,withCredentials:!1,method:"GET",nameCallback:function(d){return d},contentType:"application/x-www-form-urlencoded",body:null,nativeFallbackOnError:!1,contentTypeDetermination:!1},C=function(){function v(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return M(this,v),this.params=Object.assign({},k,d),this.link=this.createLink(),this.request=null,this.downloadedFile=null,this.params.autoStart?this.downloadFile():this}return G(v,[{key:"start",value:function(){return this.downloadFile()}},{key:"downloadFile",value:function(){var u=this;return new Promise(function(n,r){u.initDownload(n,r)})}},{key:"initDownload",value:function(u,n){var r=this,a=function(){r.link.target="_blank",r.link.href=r.params.url,r.clickLink()};return!("download"in this.link)||this.isMobile()?(a(),u()):(this.request=this.createRequest(),this.params.url?(this.request.onload=j(c.a.mark(function f(){return c.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(parseInt(r.request.status,10)===200){p.next=2;break}return p.abrupt("return",n(new w.DownloadException("status code [".concat(r.request.status,"]"),r.request)));case 2:return p.next=4,r.startDownload();case 4:return p.abrupt("return",u(r));case 5:case"end":return p.stop()}},f)})),this.request.ontimeout=function(){n(new w.DownloadException("request timeout",r.request))},this.request.onerror=function(){r.params.nativeFallbackOnError?(a(),u(r)):n(new w.DownloadException("network error",r.request))},this.request.send(this.params.body),this):n(new w.DownloadException("url param not defined!",this.request)))}},{key:"isMobile",value:function(){return!this.params.forceDesktopMode&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},{key:"createRequest",value:function(){var u=new XMLHttpRequest;return u.open(this.params.method,this.params.url,!0),this.params.contentType!==!1&&u.setRequestHeader("Content-type",this.params.contentType),this.params.headers.forEach(function(n){u.setRequestHeader(n.name,n.value)}),u.responseType="arraybuffer",this.params.process&&typeof this.params.process=="function"&&u.addEventListener("progress",this.params.process),this.params.onloadstart&&typeof this.params.onloadstart=="function"&&(u.onloadstart=this.params.onloadstart),u.timeout=this.params.timeout,u.withCredentials=!!this.params.withCredentials||!!this.params.includeCredentials,u}},{key:"getFileName",value:function(){if(typeof this.params.filename=="string")return this.params.filename;var u=this.request.getResponseHeader("Content-Disposition"),n=[];u&&(n=u.replace(/["']/g,"").match(/filename\*?=([^;]+)/));var r=n&&n.length>=1?n[1]:this.params.url.split("/").pop().split("?")[0];return this.params.nameCallback(r)}},{key:"getContentTypeFromFileSignature",value:function(u){var n=Object.assign({},S.fileSignatures,this.params.customFileSignatures);return new Promise(function(r,a){var f=new FileReader,i=u.slice(0,4);f.onloadend=function(p){if(p.target.readyState!==FileReader.DONE){a();return}var _=new Uint8Array(p.target.result),m=[];_.forEach(function(O){m.push(O.toString(16))});var P=m.join("").toUpperCase();r(n[P])},f.onerror=a,f.readAsArrayBuffer(i)})}},{key:"getContentTypeFromResponseHeader",value:function(){return this.request.getResponseHeader("content-type")}},{key:"getContentType",value:function(u){var n=this;return new Promise(function(){var r=j(c.a.mark(function a(f){var i,p,_,m,P,O,x,N;return c.a.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(i=n.params.contentTypeDetermination,p="application/octet-stream",(i==="header"||i==="full")&&(_=n.getContentTypeFromResponseHeader()),!(i==="signature"||i==="full")){q.next=7;break}return q.next=6,n.getContentTypeFromFileSignature(new Blob([u]));case 6:m=q.sent;case 7:f(i==="header"?(P=_)!==null&&P!==void 0?P:p:i==="signature"?(O=m)!==null&&O!==void 0?O:p:i==="full"&&(x=(N=m)!==null&&N!==void 0?N:_)!==null&&x!==void 0?x:p);case 8:case"end":return q.stop()}},a)}));return function(a){return r.apply(this,arguments)}}())}},{key:"createLink",value:function(){var u=document.createElement("a");return u.style.display="none",u}},{key:"clickLink",value:function(){var u;try{u=new MouseEvent("click")}catch{u=document.createEvent("MouseEvent"),u.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null)}this.link.dispatchEvent(u)}},{key:"getFile",value:function(){var d=j(c.a.mark(function n(r,a){var f,i,p;return c.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.getContentType(r);case 2:f=m.sent,p={type:f};try{i=new File([r],a,p)}catch{i=new Blob([r],p),i.name=a,i.lastModifiedDate=new Date}return m.abrupt("return",i);case 6:case"end":return m.stop()}},n,this)}));function u(n,r){return d.apply(this,arguments)}return u}()},{key:"startDownload",value:function(){var d=j(c.a.mark(function n(){var r,a;return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=this.getFileName(),i.next=3,this.getFile(this.request.response,r);case 3:if(this.downloadedFile=i.sent,!("msSaveOrOpenBlob"in window.navigator)){i.next=6;break}return i.abrupt("return",window.navigator.msSaveOrOpenBlob(this.downloadedFile,r));case 6:return a=window.URL.createObjectURL(this.downloadedFile),this.link.href=a,this.link.download=r,this.clickLink(),setTimeout(function(){(window.URL||window.webkitURL||window).revokeObjectURL(a)},4e4),i.abrupt("return",this.downloadedFile);case 12:case"end":return i.stop()}},n,this)}));function u(){return d.apply(this,arguments)}return u}()}]),v}();b.default=C},"./src/signatures.js":function(F,b,y){y.r(b),y.d(b,"fileSignatures",function(){return l});var l={"89504E47":"image/png",25504446:"application/pdf"}}}).default})})(se);const le=te(K),fe={name:"BizButtonDownload",components:{BizButton:Z},props:{url:{type:String,required:!0}},emits:["on-success","on-failed"],methods:{download(A){A.preventDefault();const U=this;new le({url:U.url}).then(function(){U.$emit("on-success")}).catch(function(F){U.$emit("on-failed",F)})}}},ce=X("span",{class:"icon is-small"},[X("i",{class:"fas fa-download"})],-1);function pe(A,U,F,b,y,l){const c=re("biz-button");return ne(),oe(c,{onClick:U[0]||(U[0]=w=>l.download(w))},{default:ie(()=>[ae(A.$slots,"default",{},()=>[ce])]),_:3})}const ve=ue(fe,[["render",pe]]);export{ve as B,le as J};
