import{M as C}from"./FilterDataHandle-94157290.js";import{A as q}from"./AppLayout-25ccdbdb.js";import{B as O}from"./ButtonLink-71ebb617.js";import{B as D}from"./Checkbox-8d9a17c8.js";import{B as I,a as N}from"./Dropdown-5425ae3a.js";import{B as V}from"./DropdownScroll-6bec070e.js";import{B as j}from"./Search-cafe34ab.js";import{B as T}from"./Icon-150b61ef.js";import{B as F}from"./TableIndex-6b2a4ef8.js";import L from"./SpaceRow-59249827.js";import{i as Q}from"./icon-class-4ab3933f.js";import{c as E,o as R,s as A}from"./alert-e0e75cb7.js";import{B as p,l as M,f as u,i as t,p as i,q as a,u as _,s as U,r as l,o as c,t as h,F as y,j as b,k as B}from"./vue-loading.min-aa20e13d.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";import"./HasLoader-a564cfe6.js";import"./Breadcrumbs-0b4348b1.js";import"./Link-2bcf0cab.js";import"./utils-79a9c8b1.js";import"./NavbarItem-7e983d41.js";import"./Button-b3acaac2.js";import"./ButtonIcon-05c24ca4.js";import"./Field-c2e062a9.js";import"./Input-2fb71e37.js";import"./Pagination-8d9b0028.js";import"./Table-2efbef14.js";import"./TableInfo-c372d0e5.js";import"./sweetalert2.all-ebd52f41.js";const W={components:{BizButtonLink:O,BizCheckbox:D,BizDropdown:I,BizDropdownItem:N,BizDropdownScroll:V,BizFilterSearch:j,BizIcon:T,BizTableIndex:F,SpaceRow:L},mixins:[C],layout:q,props:{baseRouteName:{type:String,required:!0},can:{type:Object,required:!0},pageQueryParams:{type:Object,default:()=>{}},parent:{type:String,default:null},parentOptions:{type:Object,required:!0},records:{type:Object,required:!0},title:{type:String,default:""},typeOptions:{type:Object,required:!0}},setup(o){var e,s;return{icon:Q,parentId:p(o.parent),queryParams:p(o.pageQueryParams),term:p(((e=o.pageQueryParams)==null?void 0:e.term)??null),types:p(((s=o.pageQueryParams)==null?void 0:s.types)??[])}},computed:{selectedParent(){const o=M.find(this.parentOptions,e=>e.id==this.parentId);return o||this.parentOptions[0]}},watch:{parentId(o){const e=route("admin.spaces.index",{parent:o});this.$inertia.visit(e)}},methods:{deleteSpace(o){const e=this;E().then(s=>{s.isConfirmed&&e.$inertia.delete(route(this.baseRouteName+".destroy",o.id),{onStart:e.onStartLoadingOverlay,onFinish:e.onEndLoadingOverlay,onError:()=>{R()},onSuccess:r=>{A(r.props.flash.message)}})})},onTypesChanged(){this.queryParams.types=this.types,this.refreshWithQueryParams()}}},G={class:"box"},J={class:"columns"},K={class:"column"},X={class:"column"},Y=t("span",null,"Type",-1),Z={class:"ml-1"},$={class:"column has-text-right"},ee=t("span",null,"Create New",-1),te=t("tr",null,[t("th",null,"Name"),t("th",null,"Parents"),t("th",null,"Type"),t("th",null,[t("div",{class:"level-right"}," Actions ")])],-1);function oe(o,e,s,r,re,d){const v=l("biz-filter-search"),f=l("biz-icon"),g=l("biz-dropdown-item"),z=l("biz-dropdown-scroll"),k=l("biz-dropdown"),w=l("biz-checkbox"),x=l("biz-button-link"),S=l("space-row"),P=l("biz-table-index");return c(),u("div",null,[t("div",G,[t("div",J,[t("div",K,[i(v,{modelValue:r.term,"onUpdate:modelValue":e[0]||(e[0]=n=>r.term=n),onSearch:o.search},null,8,["modelValue","onSearch"])]),t("div",X,[i(k,{"close-on-click":!1},{trigger:a(()=>[t("span",null,h(d.selectedParent?d.selectedParent.value:"Select Parent"),1),i(f,{icon:r.icon.angleDown},null,8,["icon"])]),default:a(()=>[i(z,{"max-height":300},{default:a(()=>[(c(!0),u(y,null,b(s.parentOptions,n=>(c(),_(g,{key:n.id,onClick:m=>r.parentId=n.id},{default:a(()=>[B(h(n.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),i(k,{class:"ml-2","close-on-click":!1},{trigger:a(()=>[Y,t("span",Z," ("+h(r.types.length)+") ",1),i(f,{icon:r.icon.angleDown},null,8,["icon"])]),default:a(()=>[i(z,{"max-height":300},{default:a(()=>[(c(!0),u(y,null,b(s.typeOptions,n=>(c(),_(g,{key:n.id},{default:a(()=>[i(w,{checked:r.types,"onUpdate:checked":e[1]||(e[1]=m=>r.types=m),value:n.id,onChange:d.onTypesChanged},{default:a(()=>[B(" Â  "+h(n.value),1)]),_:2},1032,["checked","value","onChange"])]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",$,[s.can.add?(c(),_(x,{key:0,class:"is-primary",href:o.route("admin.spaces.create")},{default:a(()=>[i(f,{icon:r.icon.add},null,8,["icon"]),ee]),_:1},8,["href"])):U("",!0)])]),i(P,{records:s.records,"query-params":r.queryParams},{thead:a(()=>[te]),default:a(()=>[(c(!0),u(y,null,b(s.records.data,n=>(c(),_(S,{key:n.id,space:n,can:s.can,onDeleteRow:e[2]||(e[2]=m=>d.deleteSpace(m))},null,8,["space","can"]))),128))]),_:1},8,["records","query-params"])])])}const De=H(W,[["render",oe]]);export{De as default};
