import{O as E,B as y,L as S,h as _,r as b,o as p,f as m,u as k,s as g}from"./vue-loading.min-a6a947f0.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";function h(){return h=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},h.apply(this,arguments)}var C=function(){var e=!1,t=[],a=function(){if(!e){e=!0;for(var s=0,d=t.length;s<d;s++)t[s]()}},n=function(s){if(!e){t.push(s);return}s()},i={resolved:function(){return e},resolve:a,promise:{then:n}};return i},R=Object.prototype.hasOwnProperty;function A(){var r=C();return{notify:function(){r.resolve()},wait:function(){return r.promise},render:function(t,a,n){this.wait().then(function(){n(window.grecaptcha.render(t,a))})},reset:function(t){typeof t>"u"||(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.reset(t)}))},execute:function(t){typeof t>"u"||(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.execute(t)}))},checkRecaptchaLoad:function(){R.call(window,"grecaptcha")&&R.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!r.resolved())throw new Error("ReCAPTCHA has not been loaded")}}}var u=A();typeof window<"u"&&(window.vueRecaptchaApiLoaded=u.notify);var B=E({name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!0},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},emits:["render","verify","expired","error"],setup:function(e,t){var a=t.slots,n=t.emit,i=y(null),o=y(null),s=function(f){n("verify",f)},d=function(){n("expired")},w=function(){n("error")};return S(function(){if(u.checkRecaptchaLoad(),e.loadRecaptchaScript&&!document.getElementById(e.recaptchaScriptId)){var c=document.createElement("script");c.id=e.recaptchaScriptId,c.src="https://"+e.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+e.language,c.async=!0,c.defer=!0,document.head.appendChild(c)}var f=h({},e,{callback:s,"expired-callback":d,"error-callback":w}),l=i.value,x=a.default?l.children[0]:l;u.render(x,f,function(v){o.value=v,n("render",v)})}),{root:i,widgetId:o,reset:function(){u.reset(o.value)},execute:function(){u.execute(o.value)}}},render:function(){var e=this.$slots.default,t;return typeof e=="function"?t=e():t=e,_("div",{ref:"root"},t)}});const V={name:"BizRecaptcha",components:{VueRecaptcha:B},props:{siteKey:{type:[String,null],default:null}},emits:["on-verify"],data(){return{isRecaptchaError:!1}},computed:{isRecaptchaAvailable(){return!!this.siteKey&&!this.isRecaptchaError},isRecaptchaLoaded(){return!!this.$refs.vueRecaptcha}},methods:{execute(){this.isRecaptchaLoaded?this.$refs.vueRecaptcha.execute():this.$emit("on-verify")},onExpired(){this.isRecaptchaLoaded&&this.isRecaptchaAvailable&&this.$refs.vueRecaptcha.reset()},onError(){this.isRecaptchaError=!0},onVerify(r){this.$emit("on-verify",r)}}},P={key:1,class:"help has-text-danger"};function O(r,e,t,a,n,i){const o=b("vue-recaptcha");return p(),m("div",null,[i.isRecaptchaAvailable?(p(),k(o,{key:0,ref:"vueRecaptcha",sitekey:t.siteKey,size:"invisible",theme:"light",onExpired:i.onExpired,onError:i.onError,onVerify:i.onVerify},null,8,["sitekey","onExpired","onError","onVerify"])):g("",!0),n.isRecaptchaError?(p(),m("span",P," Please check the reCAPTCHA! ")):g("",!0)])}const I=L(V,[["render",O]]);export{I as B};
