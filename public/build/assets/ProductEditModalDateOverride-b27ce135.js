import{B as D}from"./Button-03e0d3fd.js";import{B}from"./ButtonIcon-b1d1d2b0.js";import{B as z}from"./Datepicker-4f509259.js";import{B as k}from"./ModalCard-06597c5e.js";import{B as T}from"./Tag-8100534e.js";import V from"./ScheduleRuleTimes-1bb18fa6.js";import{h}from"./moment-fbc5633a.js";import{a as R}from"./icon-class-4ab3933f.js";import{l as r,B as f,u as C,q as d,r as l,o as O,i as t,p as n,k as m,x,m as w,y as M,w as S}from"./vue-loading.min-a6a947f0.js";import{u as I}from"./utils-caa7a80b.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import"./Icon-6def3c13.js";import"./ScheduleRuleTime-7016460d.js";const Y={name:"ProductEditModalDateOverride",components:{BizButton:D,BizButtonIcon:B,BizModalCard:k,BizTag:T,BizDatepicker:z,ScheduleRuleTimes:V},props:{modelValue:{type:Object,required:!0},formatDateIso:{type:String,default:"YYYY-MM-DD"}},emits:["close","after-apply"],setup(o,{emit:e}){const c=I(o,e),a=r.cloneDeep(o.modelValue.dates),u=r.cloneDeep(o.modelValue.times);return{dateOverrides:c,dates:f(a),iconAdd:R,minDate:h().toDate(),timeRanges:f(u)}},computed:{hasDateSelected(){return this.dates&&this.dates.length>0}},methods:{dateToIso(o){return h(o).format(this.formatDateIso)},addTime(){this.$refs.scheduleRuleTime.addTimeRange()},apply(){this.dateOverrides.unusedDates=r.difference(this.dateOverrides.dates.map(this.dateToIso),this.dates.map(this.dateToIso)),this.dateOverrides.times=this.timeRanges,this.dateOverrides.dates=this.dates,this.dateOverrides.isAvailable=this.timeRanges.length>0,this.$emit("close"),this.$emit("after-apply")},close(){this.$emit("close")}}},E=t("p",{class:"modal-card-title has-text-weight-bold"}," Date Overrides ",-1),N={class:"field is-grouped is-grouped-centered"},U={class:"control"},q=t("div",{class:"columns"},[t("div",{class:"column has-text-centered"}," What hours are you available? ")],-1),P={class:"columns"},W={class:"column"},j={class:"column is-2"},$={class:"columns mx-0",style:{width:"100%"}},F={class:"column px-0"},G={class:"is-pulled-right"};function H(o,e,c,a,u,i){const _=l("biz-datepicker"),v=l("biz-tag"),b=l("schedule-rule-times"),g=l("biz-button-icon"),p=l("biz-button"),y=l("biz-modal-card");return O(),C(y,{"content-class":"is-tiny",onClose:e[6]||(e[6]=s=>i.close())},{header:d(()=>[E,t("button",{"aria-label":"close",class:"delete",onClick:e[0]||(e[0]=s=>o.$emit("close"))})]),footer:d(()=>[t("div",$,[t("div",F,[t("div",G,[n(p,{onClick:e[5]||(e[5]=s=>i.close())},{default:d(()=>[m(" Cancel ")]),_:1}),n(p,{class:"is-info ml-1",type:"button",onClick:i.apply},{default:d(()=>[m(" Apply ")]),_:1},8,["onClick"]),x(o.$slots,"actions")])])])]),default:d(()=>[t("form",{onSubmit:e[4]||(e[4]=S((...s)=>i.apply&&i.apply(...s),["prevent"]))},[t("div",N,[t("p",U,[n(_,{modelValue:a.dates,"onUpdate:modelValue":e[1]||(e[1]=s=>a.dates=s),"auto-apply":"",inline:"","month-name-format":"long","multi-dates":"","no-today":"","enable-time-picker":!1,"min-date":a.minDate},null,8,["modelValue","min-date"])])]),w(t("div",null,[q,t("div",P,[t("div",W,[n(b,{ref:"scheduleRuleTime",modelValue:a.timeRanges,"onUpdate:modelValue":e[2]||(e[2]=s=>a.timeRanges=s)},{emptyTimeRange:d(()=>[n(v,{class:"is-warning is-medium is-italic"},{default:d(()=>[m(" Unavailable ")]),_:1})]),_:1},8,["modelValue"])]),t("div",j,[n(g,{class:"is-info",type:"button",icon:a.iconAdd,onClick:e[3]||(e[3]=s=>i.addTime())},null,8,["icon"])])])],512),[[M,i.hasDateSelected]])],32)]),_:3})}const le=A(Y,[["render",H]]);export{le as default};
