import{W as C,O as M,ak as O,B as j,L as x,al as L,am as H,an as I,h as S,a2 as _,r as K,o as U,u as z,s as T}from"./vue-loading.min-a6a947f0.js";import{u as R}from"./utils-caa7a80b.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";var F=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],G=function(e){return F.map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase())!==-1},W=function(e,t,n){Object.keys(t).filter(G).forEach(function(o){var i=t[o];typeof i=="function"&&(o==="onInit"?i(e,n):n.on(o.substring(2),function(r){return i(r,n)}))})},q=function(e,t,n,o){var i=e.modelEvents?e.modelEvents:null,r=Array.isArray(i)?i.join(" "):i;C(o,function(s,l){n&&typeof s=="string"&&s!==l&&s!==n.getContent({format:e.outputFormat})&&n.setContent(s)}),n.on(r||"change input undo redo",function(){t.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},J=function(e,t,n,o,i,r){o.setContent(r()),n.attrs["onUpdate:modelValue"]&&q(t,n,o,i),W(e,n.attrs,o)},k=0,B=function(e){var t=Date.now(),n=Math.floor(Math.random()*1e9);return k++,e+"_"+n+k+String(t)},Q=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},E=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},X=function(e,t){return E(e).concat(E(t))},Y=function(e){return e==null},w=function(){return{listeners:[],scriptId:B("tiny-script"),scriptLoaded:!1}},Z=function(){var e=w(),t=function(i,r,s,l){var a=r.createElement("script");a.referrerPolicy="origin",a.type="application/javascript",a.id=i,a.src=s;var m=function(){a.removeEventListener("load",m),l()};a.addEventListener("load",m),r.head&&r.head.appendChild(a)},n=function(i,r,s){e.scriptLoaded?s():(e.listeners.push(s),i.getElementById(e.scriptId)||t(e.scriptId,i,r,function(){e.listeners.forEach(function(l){return l()}),e.scriptLoaded=!0}))},o=function(){e=w()};return{load:n,reinitialize:o}},$=Z(),ee=function(){return typeof window<"u"?window:global},c=function(){var e=ee();return e&&e.tinymce?e.tinymce:null},ne={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},f=globalThis&&globalThis.__assign||function(){return f=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},f.apply(this,arguments)},te=function(e,t,n,o){return e(o||"div",{id:t,ref:n})},oe=function(e,t,n){return e("textarea",{id:t,visibility:"hidden",ref:n})},ie=M({props:ne,setup:function(e,t){var n=e.init?f({},e.init):{},o=O(e),i=o.disabled,r=o.modelValue,s=o.tagName,l=j(null),a=null,m=e.id||B("tiny-vue"),h=e.init&&e.init.inline||e.inline,p=!!t.attrs["onUpdate:modelValue"],y=!0,P=e.initialValue?e.initialValue:"",b="",V=function(u){return p?function(){return r!=null&&r.value?r.value:""}:function(){return u?P:b}},g=function(){var u=V(y),d=f(f({},n),{readonly:e.disabled,selector:"#"+m,plugins:X(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:h,setup:function(v){a=v,v.on("init",function(D){return J(D,e,t,v,r,u)}),typeof n.setup=="function"&&n.setup(v)}});Q(l.value)&&(l.value.style.visibility=""),c().init(d),y=!1};C(i,function(u){var d;a!==null&&(typeof((d=a.mode)===null||d===void 0?void 0:d.set)=="function"?a.mode.set(u?"readonly":"design"):a.setMode(u?"readonly":"design"))}),C(s,function(u){var d;p||(b=a.getContent()),(d=c())===null||d===void 0||d.remove(a),_(function(){return g()})}),x(function(){if(c()!==null)g();else if(l.value&&l.value.ownerDocument){var u=e.cloudChannel?e.cloudChannel:"5",d=e.apiKey?e.apiKey:"no-api-key",v=Y(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+d+"/tinymce/"+u+"/tinymce.min.js":e.tinymceScriptSrc;$.load(l.value.ownerDocument,v,g)}}),L(function(){c()!==null&&c().remove(a)}),h||(H(function(){y||g()}),I(function(){var u;p||(b=a.getContent()),(u=c())===null||u===void 0||u.remove(a)}));var A=function(u){var d;b=a.getContent(),(d=c())===null||d===void 0||d.remove(a),n=f(f({},n),u),_(function(){return g()})};return t.expose({rerender:A}),function(){return h?te(S,m,l,e.tagName):oe(S,m,l)}}});const ae={inline:!0,menubar:!1,branding:!1,plugins:["advlist autolink lists link image charmap","searchreplace visualblocks code fullscreen","print preview anchor insertdatetime media","paste code help wordcount table"],block_formats:"Paragraph=p; Header 1=h1; Header 2=h2; Header 3=h3",toolbar:"formatselect | bold italic link | alignleft aligncenter alignright alignjustify | bullist numlist | table",formats:{bold:{inline:"b"}},extended_valid_elements:"b",invalid_elements:"strong"},ce={plugins:"link lists",toolbar:"formatselect | bold italic forecolor backcolor link | align bullist numlist | removeformat",menubar:!1,target_list:!1,object_resizing:!1,block_formats:"Paragraph=p; Header 1=h1; Header 2=h2; Header 3=h3",toolbar_mode:"wrap",noneditable_regexp:/\{\{[^\}]+\}\}/g},fe={height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview searchreplace visualblocks fullscreen","insertdatetime media table paste wordcount hr"],block_formats:"Paragraph=p; Header 1=h1; Header 2=h2; Header 3=h3",toolbar1:"fullscreen | formatselect | bold italic underline strikethrough blockquote | forecolor backcolor | removeformat image media",toolbar2:"alignleft aligncenter alignright alignjustify | bullist numlist outdent indent hr | link table charmap"},re={name:"BizEditorTinymce",components:{Editor:ie},props:{modelValue:{},config:{type:Object,default:()=>{}},disabled:{type:Boolean,default:!1}},setup(e,{emit:t}){return{content:R(e,t),editorConfig:e.config??ae}},data(){return{apiKey:null,isShowed:!1}},beforeMount(){this.getApiKey()},methods:{getApiKey(){const e=this;axios.get(route("admin.api.tinymce.key")).then(function(t){e.apiKey=t.data}).then(()=>e.isShowed=!0)}}};function le(e,t,n,o,i,r){const s=K("Editor");return i.isShowed?(U(),z(s,{key:0,modelValue:o.content,"onUpdate:modelValue":t[0]||(t[0]=l=>o.content=l),"api-key":i.apiKey,init:o.editorConfig,disabled:n.disabled},null,8,["modelValue","api-key","init","disabled"])):T("",!0)}const me=N(re,[["render",le]]);export{me as B,ce as e,fe as f};
