import{M as f}from"./HasLoader-a564cfe6.js";import{M as y}from"./HasPageErrors-4d447fdf.js";import{B as v}from"./InputError-bc1e9f36.js";import{B as b}from"./Link-2bcf0cab.js";import{b as g,o as S}from"./alert-e0e75cb7.js";import{H as C,r as l,o as n,f as i,i as e,t as d,F as u,x as k,m as w,N as x,j as B,p,q as F,k as _}from"./vue-loading.min-aa20e13d.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";const q={name:"StripeConnect",components:{BizInputError:v,BizLink:b},mixins:[f,y],props:{data:{type:Object,required:!0},title:{type:String,default:""},order:{type:Number,required:!0}},setup(t){const o={country:t.data.defaultCountry};return{createStripeForm:C(o)}},methods:{createConnectedAccount(){const t=this,o=route("payments.stripe.create-connected-account");g("Please double-check your country!","You will not be able to change your country in the future.","Continue").then(r=>{r.isConfirmed&&t.createStripeForm.post(o,{replace:!0,preserveState:!0,onStart:()=>t.onStartLoadingOverlay(),onFinish:()=>t.onEndLoadingOverlay(),onError:a=>{S()}})})}}},A={class:"column is-half"},E={class:"title is-4"},L={class:"box is-shadowless"},M=e("p",null,"If you would like to receive donations and payments for private gigs through BuskinCity, please apply for payments with Stripe:",-1),N=e("label",{class:"label mt-5"},[_("Country"),e("sup",{class:"has-text-danger"},"*")],-1),O={class:"field is-horizontal"},V={class:"field-body"},H={class:"field"},j={class:"control"},D={class:"select is-fullwidth"},I=e("option",{value:""}," Select option ",-1),P=["value"],Y={class:"field"},T={class:"control"},U=e("span",{class:"has-text-weight-bold"},"Create Connected Account",-1),W=[U],G={key:1,class:"notification is-info is-light"},J=e("p",null,[_("You are already connected with Stripe. "),e("strong",null,"See more details?")],-1),K={class:"buttons are-small mt-5"},Q=e("span",{class:"icon is-small"},[e("i",{class:"fa-solid fa-arrow-up-right-from-square"})],-1),R=e("span",{class:"has-text-weight-bold"},"Stripe Connect",-1);function X(t,o,r,a,Z,c){const m=l("biz-input-error"),h=l("biz-link");return n(),i("div",A,[e("h2",E,d(r.title),1),e("div",L,[r.data.hasConnectedAccount?(n(),i("div",G,[J,e("div",K,[p(h,{href:t.route("payments.stripe.show"),class:"button is-info"},{default:F(()=>[Q,R]),_:1},8,["href"])])])):(n(),i(u,{key:0},[k(t.$slots,"description",{},()=>[M]),N,e("div",O,[e("div",V,[e("div",H,[e("div",j,[e("div",D,[w(e("select",{"onUpdate:modelValue":o[0]||(o[0]=s=>a.createStripeForm.country=s),required:""},[I,(n(!0),i(u,null,B(r.data.countryOptions,s=>(n(),i("option",{key:s.id,value:s.id},d(s.value),9,P))),128))],512),[[x,a.createStripeForm.country]])])]),p(m,{message:t.error("country")},null,8,["message"])]),e("div",Y,[e("div",T,[e("button",{class:"button is-primary",onClick:o[1]||(o[1]=(...s)=>c.createConnectedAccount&&c.createConnectedAccount(...s))},W)])])])])],64))])])}const ie=z(q,[["render",X]]);export{ie as B};
