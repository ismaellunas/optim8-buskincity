import{B as R}from"./ButtonLink-71ebb617.js";import{B as E}from"./Loader-5695d04b.js";import{B as P}from"./Pagination-8d9b0028.js";import{B as S,a as j}from"./PanelBlock-876eebcb.js";import{B as O}from"./Select-9fda6861.js";import{B as T}from"./Table-2efbef14.js";import{i as q}from"./icon-class-4ab3933f.js";import{l as z,r as m,o as s,f as i,p as d,q as a,i as l,t as g,F as f,j as h,s as k,k as L,u as B}from"./vue-loading.min-aa20e13d.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import"./Link-2bcf0cab.js";import"./utils-79a9c8b1.js";import"./Button-b3acaac2.js";const H={name:"FormBuilderEntryWidget",components:{BizButtonLink:R,BizLoader:E,BizPagination:P,BizPanel:S,BizPanelBlock:j,BizSelect:O,BizTable:T},props:{data:{type:Object,required:!0},title:{type:String,default:""}},data(){return{fieldLabels:[],fieldNames:[],icon:q,isLoading:!1,records:[],selectedForm:null}},computed:{hasRecords(){var n,e;return((e=(n=this.records)==null?void 0:n.data)==null?void 0:e.length)>0},hasFormLists(){return!z.isEmpty(this.data.formLists)}},mounted(){this.hasFormLists&&(this.selectedForm=z.head(Object.keys(this.data.formLists)),this.getRecords())},methods:{getRecords(n=null){const e=this;n=n||route("admin.api.widget.form-builder.entries",e.selectedForm),e.isLoading=!0,axios.get(n).then(r=>{e.fieldLabels=r.data.fieldLabels,e.fieldNames=r.data.fieldNames,e.records=r.data.records}).then(()=>{e.isLoading=!1})},onSelectedFormChange(){this.getRecords()}}},M={class:"column is-6"},U={class:"columns"},A={class:"column"},W={key:0,class:"column"},G=["value"],I={class:"table-container",style:{width:"100%"}},J=l("th",null,null,-1),K=["innerHTML"],Q={key:1},X=["colspan"],Y={class:"level",style:{width:"100%"}},Z=l("div",{class:"level-left"},null,-1),$={class:"level-right"};function ee(n,e,r,te,t,u){const F=m("biz-select"),v=m("biz-loader"),y=m("biz-button-link"),V=m("biz-table"),p=m("biz-panel-block"),N=m("biz-pagination"),w=m("biz-panel");return s(),i("div",M,[d(w,{class:"is-white is-relative"},{heading:a(()=>[l("div",U,[l("div",A,g(r.title),1),u.hasFormLists?(s(),i("div",W,[d(F,{modelValue:t.selectedForm,"onUpdate:modelValue":e[0]||(e[0]=c=>t.selectedForm=c),class:"is-small is-pulled-right",onChange:e[1]||(e[1]=c=>u.onSelectedFormChange())},{default:a(()=>[(s(!0),i(f,null,h(r.data.formLists,(c,_,o)=>(s(),i("option",{key:o,value:_},g(c),9,G))),128))]),_:1},8,["modelValue"])])):k("",!0)])]),default:a(()=>{var c,_;return[d(v,{modelValue:t.isLoading,"onUpdate:modelValue":e[2]||(e[2]=o=>t.isLoading=o),"is-full-page":!1},null,8,["modelValue"]),d(p,null,{default:a(()=>[l("div",I,[d(V,{"is-fullwidth":""},{default:a(()=>[l("thead",null,[l("tr",null,[(s(!0),i(f,null,h(t.fieldLabels,(o,b)=>(s(),i("th",{key:b},g(o),1))),128)),J])]),l("tbody",null,[u.hasRecords?(s(!0),i(f,{key:0},h(t.records.data,(o,b)=>(s(),i("tr",{key:b},[(s(!0),i(f,null,h(t.fieldNames,(x,C)=>(s(),i("td",{key:C,class:"content",innerHTML:o[x]},null,8,K))),128)),l("td",null,[d(y,{class:"is-primary is-outlined is-small",href:n.route(r.data.baseRouteName+".entries.show",{form_builder:t.selectedForm,form_entry:o.id})},{default:a(()=>[L(" View Detail ")]),_:2},1032,["href"])])]))),128)):(s(),i("tr",Q,[l("td",{class:"has-text-centered",colspan:t.fieldLabels.length+1}," Empty ",8,X)]))])]),_:1})])]),_:1}),((_=(c=t.records)==null?void 0:c.links)==null?void 0:_.length)>3?(s(),B(p,{key:0},{default:a(()=>{var o;return[d(N,{links:(o=t.records)==null?void 0:o.links,"is-ajax":!0,onOnClickedPagination:u.getRecords},null,8,["links","onOnClickedPagination"])]}),_:1})):k("",!0),d(p,null,{default:a(()=>[l("div",Y,[Z,l("div",$,[t.selectedForm?(s(),B(y,{key:0,class:"is-primary is-outlined is-small",href:n.route(r.data.baseRouteName+".entries.index",t.selectedForm)},{default:a(()=>[L(" View All ")]),_:1},8,["href"])):k("",!0)])])]),_:1})]}),_:1})])}const fe=D(H,[["render",ee]]);export{fe as default};
