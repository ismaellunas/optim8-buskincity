import{M as E}from"./HasLoader-a564cfe6.js";import{A as O}from"./AppLayout-40f8bbe7.js";import{B as T}from"./Button-03e0d3fd.js";import{B as U}from"./ButtonLink-abb08373.js";import{B as j}from"./Card-64180043.js";import{B as S}from"./Link-359d994c.js";import{B as F}from"./Table-6b0ddb68.js";import P from"./MediaGallery-9e3a2066.js";import{i as V}from"./icon-class-4ab3933f.js";import{h as Y}from"./moment-fbc5633a.js";import{o as H,s as I,c as z}from"./alert-fe3154bb.js";import{f as s,i as t,p as m,q as i,u as R,s as h,r as p,o as a,F as g,j as G,t as o,x as K,K as J,k as l,w as D}from"./vue-loading.min-a6a947f0.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";import"./Breadcrumbs-f0ae94d4.js";import"./utils-caa7a80b.js";import"./NavbarItem-766600c9.js";import"./Icon-6def3c13.js";import"./Gallery-86a7e0a4.js";import"./HasModal-fa56130c.js";import"./ButtonDownload-7545f1b2.js";import"./ButtonIcon-b1d1d2b0.js";import"./Image-c2b8efed.js";import"./Modal-655bec1f.js";import"./sweetalert2.all-7b2d1616.js";const W={name:"FormBuilderEntryDetail",components:{BizLink:S,BizButton:T,BizButtonLink:U,BizTable:F,BizCard:j,MediaGallery:P},mixins:[E],layout:O,props:{baseRouteName:{type:String,required:!0},can:{type:Object,default:()=>{}},entry:{type:Object,default:()=>{}},entryDisplay:{type:Object,default:()=>{}},fieldLabels:{type:Object,default:()=>{}},formBuilder:{type:Object,required:!0}},data(){return{icon:V}},computed:{urlPath(){var n,r;return(r=(n=this.entry)==null?void 0:n.meta_data)!=null&&r.page_url?new URL(this.entry.meta_data.page_url).pathname:null},isUserExists(){var n;return!!((n=this.entry)!=null&&n.user)},hasActions(){return this.entry.meta_data.can.mark_as_read||this.entry.meta_data.can.mark_as_unread||this.entry.meta_data.can.archive||this.entry.meta_data.can.restore||this.entry.meta_data.can.force_delete}},methods:{moment:Y,actionRequest(n,r,e){const A=this;this.$inertia.post(route(n,{form_builder:this.formBuilder.id,form_entry:this.entry.id}),{},{onStart:()=>this.onStartLoadingOverlay(),onFinish:y=>{A.onEndLoadingOverlay()},onError:y=>{H()},onSuccess:y=>{I(y.props.flash.message),_.isFunction(e)&&e(y)}})},archive(n){z("Confirm Archive","Are you sure?").then(r=>{r.isConfirmed&&this.actionRequest(n,this.entry)})},restore(n){z("Confirm Restore","Are you sure?").then(r=>{r.isConfirmed&&this.actionRequest(n,this.entry)})},forceDelete(n){z("Are you sure?","Once the resource is deleted, it will be permanently deleted.","Confirm Deletion").then(r=>{r.isConfirmed&&this.actionRequest(n,this.entry)})}}},X={class:"box"},Z={class:"columns"},$={class:"column is-two-thirds"},ee={class:"has-text-weight-bold",width:"20%"},te={key:0},re=["innerHTML"],ae={class:"column"},ne=t("th",null,"Entry ID",-1),se=t("th",null,"User IP",-1),ie=t("th",null,"User",-1),oe={key:0},le={key:1},de=t("th",null,"Submitted on",-1),ue=t("th",null,"Timezone",-1),me=t("th",null,"Page Url",-1),ce=["href"],_e=t("th",null,"Browser",-1),he=t("th",null,"Device",-1),ye={key:0,class:"m-2"},fe={key:1,class:"m-2"},be={key:2,class:"m-2"},ve={key:3,class:"m-2"},ke={key:4,class:"m-2"};function Be(n,r,e,A,y,d){const L=p("biz-table"),q=p("biz-link"),x=p("biz-card"),f=p("biz-button");return a(),s("div",X,[t("div",Z,[t("div",$,[m(L,{class:"is-bordered","is-fullwidth":""},{default:i(()=>[t("tbody",null,[(a(!0),s(g,null,G(e.fieldLabels,(u,c,w)=>{var b,v,k,B;return a(),s("tr",{key:w},[t("td",ee,o(u),1),(b=e.entryDisplay[c])!=null&&b.component?(a(),s("td",te,[(a(),R(J((v=e.entryDisplay[c])==null?void 0:v.component),{value:(k=e.entryDisplay[c])==null?void 0:k.value},{itemActions:i(({mediumItem:C})=>[K(n.$slots,"itemActions",{mediumItem:C})]),_:2},1032,["value"]))])):(a(),s("td",{key:1,innerHTML:(B=e.entryDisplay[c])==null?void 0:B.value},null,8,re))])}),128))])]),_:3})]),t("div",ae,[m(x,null,{headerTitle:i(()=>[l(" Entry ")]),default:i(()=>[m(L,{"is-fullwidth":""},{default:i(()=>{var u,c,w,b,v,k,B,C,M,N;return[t("tr",null,[ne,t("td",null,o(e.entry.id),1)]),t("tr",null,[se,t("td",null,o(((c=(u=e.entry)==null?void 0:u.meta_data)==null?void 0:c.ip_address)??"-"),1)]),t("tr",null,[ie,d.isUserExists?(a(),s("td",oe,[e.can.user.redirectUser?(a(),R(q,{key:0,href:n.route("admin.users.edit",e.entry.user.id)},{default:i(()=>[l(o(e.entry.user.full_name),1)]),_:1},8,["href"])):(a(),s(g,{key:1},[l(o(e.entry.user.full_name),1)],64))])):(a(),s("td",le," - "))]),t("tr",null,[de,t("td",null,o(d.moment(e.entry.created_at).format("YYYY-MM-DD [at] h:mm a")),1)]),t("tr",null,[ue,t("td",null,o(((b=(w=e.entry)==null?void 0:w.meta_data)==null?void 0:b.timezone)??"-"),1)]),t("tr",null,[me,t("td",null,[(k=(v=e.entry)==null?void 0:v.meta_data)!=null&&k.page_url?(a(),s("a",{key:0,href:e.entry.meta_data.page_url}," .."+o(d.urlPath),9,ce)):(a(),s(g,{key:1},[l(" - ")],64))])]),t("tr",null,[_e,t("td",null,o(((C=(B=e.entry)==null?void 0:B.meta_data)==null?void 0:C.browser)??"-"),1)]),t("tr",null,[he,t("td",null,o(((N=(M=e.entry)==null?void 0:M.meta_data)==null?void 0:N.device)??"-"),1)])]}),_:1})]),_:1}),d.hasActions?(a(),R(x,{key:0,class:"mt-2 has-text-centered"},{headerTitle:i(()=>[l(" Actions ")]),default:i(()=>[e.entry.meta_data.can.mark_as_read?(a(),s("div",ye,[m(f,{class:"is-fullwidth",type:"button",onClick:r[0]||(r[0]=D(u=>d.actionRequest(e.baseRouteName+".mark-as-read"),["prevent"]))},{default:i(()=>[l(" Mark as read ")]),_:1})])):h("",!0),e.entry.meta_data.can.mark_as_unread?(a(),s("div",fe,[m(f,{class:"is-fullwidth",type:"button",onClick:r[1]||(r[1]=D(u=>d.actionRequest(e.baseRouteName+".mark-as-unread"),["prevent"]))},{default:i(()=>[l(" Mark as unread ")]),_:1})])):h("",!0),e.entry.meta_data.can.archive?(a(),s("div",be,[m(f,{class:"is-fullwidth is-danger",type:"button",onClick:r[2]||(r[2]=D(u=>d.archive(e.baseRouteName+".archive"),["prevent"]))},{default:i(()=>[l(" Archive ")]),_:1})])):h("",!0),e.entry.meta_data.can.restore?(a(),s("div",ve,[m(f,{class:"is-fullwidth",type:"button",onClick:r[3]||(r[3]=D(u=>d.restore(e.baseRouteName+".restore"),["prevent"]))},{default:i(()=>[l(" Restore ")]),_:1})])):h("",!0),e.entry.meta_data.can.force_delete?(a(),s("div",ke,[m(f,{class:"is-fullwidth is-danger",type:"button",onClick:r[4]||(r[4]=D(u=>d.forceDelete(e.baseRouteName+".force-delete"),["prevent"]))},{default:i(()=>[l(" Delete ")]),_:1})])):h("",!0)]),_:1})):h("",!0)])])])}const Ie=Q(W,[["render",Be]]);export{Ie as default};
