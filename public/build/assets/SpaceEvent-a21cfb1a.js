import{M as g}from"./HasLoader-a564cfe6.js";import{M}from"./HasModal-fa56130c.js";import{M as y}from"./HasPageErrors-4d447fdf.js";import{B as x}from"./Button-b3acaac2.js";import{B as C}from"./TableIndex-6b2a4ef8.js";import k from"./SpaceEventFormModal-4c65f45f.js";import{i as E}from"./icon-class-4ab3933f.js";import{c as S,s as B,o as q}from"./alert-e0e75cb7.js";import{f as m,i as e,p as r,q as l,u as z,s as R,r as p,o as c,n as u,F as A,j as N,t as _}from"./vue-loading.min-aa20e13d.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";import"./utils-79a9c8b1.js";import"./Pagination-8d9b0028.js";import"./Link-2bcf0cab.js";import"./Table-2efbef14.js";import"./TableInfo-c372d0e5.js";import"./DateTime-b3a25f5d.js";import"./Datepicker-847140ac.js";import"./Field-fbae01a6.js";import"./Field-c2e062a9.js";import"./InputError-bc1e9f36.js";import"./Input-50a73630.js";import"./Input-2fb71e37.js";import"./Textarea-18e9b25c.js";import"./Textarea-3c29db5c.js";import"./LanguageTab-090d99fd.js";import"./ModalCard-42b1747b.js";import"./sweetalert2.all-ebd52f41.js";const P={name:"SpaceEvent",components:{BizButton:x,BizTableIndex:C,SpaceEventFormModal:k},mixins:[g,M,y],props:{space:{type:Object,required:!0}},data(){return{baseRouteName:"admin.spaces.events",icon:E,queryParams:{},selectedEvent:{},term:null,events:{}}},beforeMount(){this.getRecords()},methods:{getRecords(s=null){const t=this;s=s??route(t.baseRouteName+".records",this.space.id),axios.get(s,{params:t.queryParams}).then(a=>{t.events=a.data})},openModalEdit(s){this.selectedEvent=s,this.openModal()},onDelete(s){const t=this;S().then(a=>{if(a.isConfirmed){const h=route("admin.spaces.events.destroy",[t.space.id,s.id]);t.onStartLoadingOverlay(),axios.delete(h).then(o=>{t.getRecords(),B(o.data)}).catch(o=>{q()}).then(()=>{t.onEndLoadingOverlay()})}})},openModalCreate(){this.selectedEvent=null,this.openModal()},afterSubmit(){this.getRecords()}}},D={class:"columns"},L={class:"column has-text-right"},j={class:"icon is-small"},F=e("span",null,"Add New",-1),H=e("tr",null,[e("th",null,"Title"),e("th",null,"Started At"),e("th",null,"Ended At"),e("th",null,[e("div",{class:"level-right"}," Actions ")])],-1),V={class:"level-right"},w={class:"icon is-small"},T={class:"icon is-small"};function I(s,t,a,h,o,i){const d=p("biz-button"),f=p("biz-table-index"),v=p("space-event-form-modal");return c(),m("div",null,[e("div",D,[e("div",L,[r(d,{type:"button",class:"is-primary",onClick:t[0]||(t[0]=n=>i.openModalCreate())},{default:l(()=>[e("span",j,[e("i",{class:u(o.icon.add)},null,2)]),F]),_:1})])]),r(f,{records:o.events,"is-ajax-pagination":!0,"query-params":o.queryParams,onOnClickedPagination:i.getRecords},{thead:l(()=>[H]),default:l(()=>[(c(!0),m(A,null,N(o.events.data,n=>(c(),m("tr",{key:n.id},[e("td",null,_(n.title),1),e("td",null,_(n.started_at),1),e("td",null,_(n.ended_at),1),e("td",null,[e("div",V,[r(d,{type:"button",class:"is-ghost has-text-black",onClick:b=>i.openModalEdit(n)},{default:l(()=>[e("span",w,[e("i",{class:u(o.icon.edit)},null,2)])]),_:2},1032,["onClick"]),r(d,{type:"button",class:"is-ghost has-text-black ml-1",onClick:b=>i.onDelete(n)},{default:l(()=>[e("span",T,[e("i",{class:u(o.icon.remove)},null,2)])]),_:2},1032,["onClick"])])])]))),128))]),_:1},8,["records","query-params","onOnClickedPagination"]),s.isModalOpen?(c(),z(v,{key:0,"selected-event":o.selectedEvent,space:a.space,onClose:t[1]||(t[1]=n=>s.closeModal()),onAfterSubmit:i.afterSubmit},null,8,["selected-event","space","onAfterSubmit"])):R("",!0)])}const ve=O(P,[["render",I]]);export{ve as default};
