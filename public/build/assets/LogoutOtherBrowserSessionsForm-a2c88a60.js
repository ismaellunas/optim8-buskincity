import{M as v}from"./HasLoader-a564cfe6.js";import{M as k}from"./HasModal-fa56130c.js";import{M as B}from"./HasPageErrors-4d447fdf.js";import{F as M}from"./ActionSection-a95d067d.js";import{B as x}from"./Button-b3acaac2.js";import{B as S}from"./Password-7112046e.js";import{B as O}from"./ModalCard-42b1747b.js";import{s as C,o as L}from"./alert-e0e75cb7.js";import{u as h,q as r,r as l,o as e,k as d,f as a,i as s,F as z,j as F,t as c,s as _,p as m,a1 as V,n as E}from"./vue-loading.min-aa20e13d.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import"./utils-79a9c8b1.js";import"./Field-fbae01a6.js";import"./Field-c2e062a9.js";import"./ButtonIcon-05c24ca4.js";import"./Icon-150b61ef.js";import"./icon-class-4ab3933f.js";import"./InputError-bc1e9f36.js";import"./sweetalert2.all-ebd52f41.js";const P={components:{ActionSection:M,BizButton:x,BizFormPassword:S,BizModalCard:O},mixins:[v,k,B],props:{sessions:{type:Array,default:()=>[]}},data(){return{form:this.$inertia.form({password:""})}},methods:{confirmLogout(){this.openModal(),setTimeout(()=>this.$refs.password.$refs.input.focus(),250)},logoutOtherBrowserSessions(){this.onStartLoadingOverlay(),this.form.delete(route("other-browser-sessions.destroy"),{preserveScroll:!0,onSuccess:()=>{this.closeModal(),C("Done")},onError:()=>{this.$refs.password.$refs.input.focus(),L()},onFinish:()=>{this.form.reset(),this.onEndLoadingOverlay()}})},closeModal(){this.isModalOpen=!1,this.form.reset()}}},A=s("p",null," Manage and log out your active sessions on other browsers and devices. ",-1),H=s("p",null," If necessary, you may log out of all of your other browser sessions across all of your devices. Some of your recent sessions are listed below; however, this list may not be exhaustive. If you feel your account has been compromised, you should also update your password. ",-1),K={key:0,class:"mt-5"},T={class:"table is-bordered is-striped is-hoverable is-fullwidth"},q={class:"has-text-centered"},D={key:0,class:"fas fa-desktop fa-3x"},I={key:1,class:"fas fa-mobile-alt fa-3x"},j={key:0,class:"has-text-weight-semibold"},U={key:1},G={class:"flex mt-5"},J=s("span",{class:"has-text-weight-bold"}," Log Out Other Browser Sessions ",-1),Q=s("p",{class:"modal-card-title has-text-weight-bold"}," Log Out Other Browser Sessions ",-1),R=s("p",null," Please enter your password to confirm you would like to log out of your other browser sessions across all of your devices. ",-1),W={class:"mt-4"};function X(p,t,f,Y,n,i){const u=l("biz-button"),y=l("biz-form-password"),w=l("biz-modal-card"),b=l("action-section");return e(),h(b,null,{title:r(()=>[d(" Browser Sessions ")]),content:r(()=>[A,H,f.sessions.length>0?(e(),a("div",K,[s("table",T,[s("tbody",null,[(e(!0),a(z,null,F(f.sessions,(o,g)=>(e(),a("tr",{key:g},[s("td",q,[o.agent.is_desktop?(e(),a("i",D)):(e(),a("i",I))]),s("td",null,[s("div",null,c(o.agent.platform)+" - "+c(o.agent.browser),1),s("div",null,[s("div",null,[d(c(o.ip_address)+", ",1),o.is_current_device?(e(),a("span",j," This device ")):(e(),a("span",U," Last active "+c(o.last_active),1))])])])]))),128))])])])):_("",!0),s("div",G,[m(u,{class:"is-medium is-primary",onClick:i.confirmLogout},{default:r(()=>[J]),_:1},8,["onClick"])]),p.isModalOpen?(e(),h(w,{key:1,onClose:t[3]||(t[3]=o=>i.closeModal())},{header:r(()=>[Q,s("button",{class:"delete","aria-label":"close",onClick:t[0]||(t[0]=o=>i.closeModal())})]),default:r(()=>[R,s("div",W,[m(y,{ref:"password",modelValue:n.form.password,"onUpdate:modelValue":t[1]||(t[1]=o=>n.form.password=o),placeholder:"Password",message:p.error("password"),required:!0,onKeyup:V(i.logoutOtherBrowserSessions,["enter"])},null,8,["modelValue","message","onKeyup"])])]),footer:r(()=>[m(u,{onClick:t[2]||(t[2]=o=>i.closeModal())},{default:r(()=>[d(" Cancel ")]),_:1}),m(u,{class:E(["is-primary ml-2",{"opacity-25":n.form.processing}]),disabled:n.form.processing,onClick:i.logoutOtherBrowserSessions},{default:r(()=>[d(" Log Out Other Browser Sessions ")]),_:1},8,["class","disabled","onClick"])]),_:1})):_("",!0)]),_:1})}const _s=N(P,[["render",X]]);export{_s as default};
